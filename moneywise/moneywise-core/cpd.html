<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from org.apache.maven.plugins:maven-pmd-plugin:3.28.0:cpd at 2026-01-08
 | Rendered using Apache Maven Fluido Skin 2.0.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>CPD Results â€“ MoneyWise Personal Finance - Core</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.0.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.0.1.min.js"></script>
  </head>
  <body class="topBarEnabled">
    <header id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
        <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
            <ul class="nav">
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">MoneyWise Core <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="index.html">Introduction</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">Parent Project <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../index.html">MoneyWise Personal Finance</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="project-info.html">Project Information</a>
              <ul class="dropdown-menu">
                  <li><a href="dependencies.html">Dependencies</a></li>
                  <li><a href="dependency-info.html">Maven Coordinates</a></li>
                  <li><a href="distribution-management.html">Distribution Management</a></li>
                  <li><a href="index.html">About</a></li>
                  <li><a href="issue-management.html">Issue Management</a></li>
                  <li><a href="licenses.html">Licenses</a></li>
                  <li><a href="plugin-management.html">Plugin Management</a></li>
                  <li><a href="plugins.html">Plugins</a></li>
                  <li><a href="scm.html">Source Code Management</a></li>
                  <li><a href="summary.html">Summary</a></li>
                  <li><a href="team.html">Team</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a href="project-reports.html">Project Reports</a>
              <ul class="dropdown-menu">
                  <li><a href="checkstyle.html">Checkstyle</a></li>
                  <li><a>CPD</a></li>
                  <li><a href="pmd.html">PMD</a></li>
                  <li><a href="jacoco/index.html">JaCoCo</a></li>
                  <li><a href="surefire.html">Surefire</a></li>
              </ul>
            </li>
        </ul>
      </li>
            </ul>
        </div>
      </div>
    </header>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2026-01-08<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.6.3-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">MoneyWise Core</li>
    <li><a href="index.html">Introduction</a></li>
   <li class="nav-header">Parent Project</li>
    <li><a href="../index.html">MoneyWise Personal Finance</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html"><span class="icon-chevron-down"></span>Project Reports</a>
     <ul class="nav nav-list">
      <li><a href="checkstyle.html">Checkstyle</a></li>
      <li class="active"><a>CPD</a></li>
      <li><a href="pmd.html">PMD</a></li>
      <li><a href="jacoco/index.html">JaCoCo</a></li>
      <li><a href="surefire.html">Surefire</a></li>
     </ul></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="CPD_Results"></a>
<h1>CPD Results</h1>
<p>The following document contains the results of PMD's  <a class="externalLink" href="https://pmd.github.io/latest/pmd_userdocs_cpd.html">CPD</a> 7.20.0.</p><section><a id="Duplications"></a>
<h2>Duplications</h2>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\dialog\MoneyWiseXTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/dialog/MoneyWiseXTransactionDialog.html#L693">693</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\dialog\MoneyWiseTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/dialog/MoneyWiseTransactionDialog.html#L723">723</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>buildAssetMenu(pMenu, getDataList(MoneyWiseBasicDataType.PAYEE, MoneyWisePayeeList.class), false, myTrans);
    }

    /**
     * Build the asset menu for an item.
     * @param &lt;T&gt; the Asset type
     * @param pMenu the menu
     * @param pIsAccount is this item the account rather than partner
     * @param pList the asset list
     * @param pTrans the transaction to build for
     */
    private static &lt;T extends MoneyWiseAssetBase&gt; void buildAssetMenu(final TethysUIScrollMenu&lt;MoneyWiseTransAsset&gt; pMenu,
                                                                      final MoneyWiseAssetBaseList&lt;T&gt; pList,
                                                                      final boolean pIsAccount,
                                                                      final MoneyWiseTransaction pTrans) {
        /* Record active item */
        final MoneyWiseTransAsset myAccount = pTrans.getAccount();
        final MoneyWiseTransCategory myCategory = pTrans.getCategory();
        final MoneyWiseDataValidatorTrans&lt;?&gt; myValidator = pTrans.getList().getValidator();
        final MoneyWiseTransAsset myCurr = pIsAccount
                ? myAccount
                : pTrans.getPartner();
        TethysUIScrollItem&lt;MoneyWiseTransAsset&gt; myActive = null;
        TethysUIScrollSubMenu&lt;MoneyWiseTransAsset&gt; myMenu = null;

        /* Loop through the available values */
        final Iterator&lt;T&gt; myIterator = pList.iterator();
        while (myIterator.hasNext()) {
            final T myAsset = myIterator.next();

            /* Only process non-deleted/non-closed items */
            boolean bIgnore = myAsset.isDeleted() || myAsset.isClosed();

            /* Check whether the asset is allowable for the owner */
            bIgnore |= !(pIsAccount
                    ? myValidator.isValidAccount(myAsset)
                    : myValidator.isValidPartner(myAccount, myCategory, myAsset));
            if (bIgnore) {
                continue;
            }

            /* If this the first item */
            if (myMenu == null) {
                /* Create a new subMenu and add it to the popUp */
                myMenu = pMenu.addSubMenu(pList.getItemType().getItemName());
            }

            /* Create a new MenuItem and add it to the popUp */
            final TethysUIScrollItem&lt;MoneyWiseTransAsset&gt; myItem = myMenu.getSubMenu().addItem(myAsset);

            /* If this is the active category */
            if (myAsset.equals(myCurr)) {
                /* Record it */
                myActive = myItem;
            }
        }

        /* Ensure active item is visible */
        if (myActive != null) {
            myActive.scrollToItem();
        }
    }

    /**
     * Build the holding asset menu for an item.
     * @param pMenu the menu
     * @param pIsAccount is this item the account rather than partner
     * @param pTrans the transaction to build for
     */
    private static void buildHoldingMenu(final TethysUIScrollMenu&lt;MoneyWiseTransAsset&gt; pMenu,
                                         final boolean pIsAccount,
                                         final MoneyWiseTransaction pTrans) {
        /* Record active item */
        final MoneyWiseTransAsset myAccount = pTrans.getAccount();
        final MoneyWiseTransCategory myCategory = pTrans.getCategory();
        final MoneyWiseDataValidatorTrans&lt;?&gt; myValidator = pTrans.getList().getValidator();
        final MoneyWiseTransAsset myCurr = pIsAccount
                ? myAccount
                : pTrans.getPartner();
        TethysUIScrollItem&lt;MoneyWiseTransAsset&gt; myActive = null;
        TethysUIScrollSubMenu&lt;MoneyWiseTransAsset&gt; myMenu = null;

        /* Access Portfolios and Holdings Map */
        final MoneyWiseDataSet myData = pTrans.getDataSet();
        final MoneyWisePortfolioList myPortfolios = myData.getPortfolios();
        final MoneyWiseSecurityHoldingMap myMap = myPortfolios.getSecurityHoldingsMap();

        /* Loop through the Portfolios */
        final Iterator&lt;MoneyWisePortfolio&gt; myPortIterator = myPortfolios.iterator();
        while (myPortIterator.hasNext()) {
            final MoneyWisePortfolio myPortfolio = myPortIterator.next();
            TethysUIScrollSubMenu&lt;MoneyWiseTransAsset&gt; myCoreMenu = null;

            /* Ignore deleted or closed */
            if (myPortfolio.isDeleted()
                    || Boolean.TRUE.equals(myPortfolio.isClosed())) {
                continue;
            }

            /* Look for existing and new holdings */
            final Iterator&lt;MoneyWiseSecurityHolding&gt; myExistIterator = myMap.existingIterator(myPortfolio);
            final Iterator&lt;MoneyWiseSecurityHolding&gt; myNewIterator = myMap.newIterator(myPortfolio);
            if ((myExistIterator != null) || (myNewIterator != null)) {
                /* If there are existing elements */
                if (myExistIterator != null) {
                    /* Loop through them */
                    while (myExistIterator.hasNext()) {
                        final MoneyWiseSecurityHolding myHolding = myExistIterator.next();
                        final MoneyWiseSecurity mySecurity = myHolding.getSecurity();

                        /* Check whether the asset is allowable for the owner */
                        final boolean bIgnore = !(pIsAccount
                                ? myValidator.isValidAccount(myHolding)
                                : myValidator.isValidPartner(myAccount, myCategory, myHolding));
                        if (bIgnore) {
                            continue;
                        }

                        /* Ensure that hierarchy is created */
                        if (myMenu == null) {
                            /* Create a new JMenu and add it to the popUp */
                            myMenu = pMenu.addSubMenu(MoneyWiseAssetType.SECURITYHOLDING.toString());
                        }
                        if (myCoreMenu == null) {
                            /* Create a new Menu and add it to the popUp */
                            myCoreMenu = myMenu.getSubMenu().addSubMenu(myPortfolio.getName());
                        }

                        /* Add the item to the menu */
                        final TethysUIScrollItem&lt;MoneyWiseTransAsset&gt; myItem = myCoreMenu.getSubMenu().addItem(myHolding, mySecurity.getName());

                        /* If this is the active holding */
                        if (mySecurity.equals(myCurr)) {
                            /* Record it */
                            myActive = myItem;
                        }
                    }
                }

                /* If there are new elements */
                if (myNewIterator != null) {
                    /* Loop through them */
                    TethysUIScrollSubMenu&lt;MoneyWiseTransAsset&gt; mySubMenu = null;
                    while (myNewIterator.hasNext()) {
                        final MoneyWiseSecurityHolding myHolding = myNewIterator.next();
                        final MoneyWiseSecurity mySecurity = myHolding.getSecurity();

                        /* Check whether the asset is allowable for the owner */
                        final boolean bIgnore = !(pIsAccount
                                ? myValidator.isValidAccount(myHolding)
                                : myValidator.isValidPartner(myAccount, myCategory, myHolding));
                        if (bIgnore) {
                            continue;
                        }

                        /* Ensure that hierarchy is created */
                        if (myMenu == null) {
                            /* Create a new subMenu and add it to the popUp */
                            myMenu = pMenu.addSubMenu(MoneyWiseAssetType.SECURITYHOLDING.toString());
                        }
                        if (myCoreMenu == null) {
                            /* Create a new subMenu and add it to the popUp */
                            myCoreMenu = myMenu.getSubMenu().addSubMenu(myPortfolio.getName());
                        }
                        if (mySubMenu == null) {
                            /* Create a new subMenu */
                            mySubMenu = myCoreMenu.getSubMenu().addSubMenu(MoneyWiseSecurityHolding.SECURITYHOLDING_NEW);
                        }

                        /* Add the item to the menu */
                        mySubMenu.getSubMenu().addItem(myHolding, mySecurity.getName());
                    }
                }
            }
        }

        /* Ensure active item is visible */
        if (myActive != null) {
            myActive.scrollToItem();
        }
    }

    /**
     * Build the category menu for an item.
     * @param pMenu the menu
     * @param pEvent the event to build for
     */
    public void buildCategoryMenu(final TethysUIScrollMenu&lt;MoneyWiseTransCategory&gt; pMenu,
                                  final MoneyWiseXAnalysisEvent pEvent) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\dialog\MoneyWiseXTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/dialog/MoneyWiseXTransactionDialog.html#L502">502</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\dialog\MoneyWiseTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/dialog/MoneyWiseTransactionDialog.html#L532">532</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseTransaction myTrans = getItem().getTransaction();
        final MoneyWiseValidateTransaction myBuilder = (MoneyWiseValidateTransaction) myTrans.getList().getValidator();

        /* Process updates */
        if (MoneyWiseBasicResource.MONEYWISEDATA_FIELD_DATE.equals(myField)) {
            /* Update the Date */
            myTrans.setDate(pUpdate.getValue(OceanusDate.class));
        } else if (MoneyWiseBasicResource.TRANSACTION_AMOUNT.equals(myField)) {
            /* Update the Amount */
            myTrans.setAmount(pUpdate.getValue(OceanusMoney.class));
            myBuilder.autoCorrect(myTrans);
        } else if (MoneyWiseBasicResource.TRANSACTION_ACCOUNT.equals(myField)) {
            /* Update the Account */
            myTrans.setAccount(resolveAsset(pUpdate.getValue(MoneyWiseTransAsset.class)));
            myBuilder.autoCorrect(myTrans);
        } else if (MoneyWiseBasicResource.TRANSACTION_DIRECTION.equals(myField)) {
            /* Update the Direction */
            myTrans.switchDirection();
            myBuilder.autoCorrect(myTrans);
        } else if (MoneyWiseBasicResource.TRANSACTION_PARTNER.equals(myField)) {
            /* Update the Partner */
            myTrans.setPartner(resolveAsset(pUpdate.getValue(MoneyWiseTransAsset.class)));
            myBuilder.autoCorrect(myTrans);
        } else if (MoneyWiseBasicDataType.TRANSCATEGORY.equals(myField)) {
            /* Update the Category */
            myTrans.setCategory(pUpdate.getValue(MoneyWiseTransCategory.class));
            myBuilder.autoCorrect(myTrans);
        } else if (MoneyWiseBasicResource.TRANSACTION_RECONCILED.equals(myField)) {
            /* Update the Reconciled indication */
            myTrans.setReconciled(pUpdate.getValue(Boolean.class));
        } else if (MoneyWiseTransInfoClass.COMMENTS.equals(myField)) {
            /* Update the Comments */
            myTrans.setComments(pUpdate.getValue(String.class));
        } else if (MoneyWiseTransInfoClass.REFERENCE.equals(myField)) {
            /* Update the Reference */
            myTrans.setReference(pUpdate.getValue(String.class));
        } else if (MoneyWiseTransInfoClass.TRANSTAG.equals(myField)) {
            /* Update the Tag indication */
            myTrans.setTransactionTags(pUpdate.getValue(List.class));
        } else if (MoneyWiseTransInfoClass.PARTNERAMOUNT.equals(myField)) {
            /* Update the PartnerAmount */
            myTrans.setPartnerAmount(pUpdate.getValue(OceanusMoney.class));
        } else if (MoneyWiseTransInfoClass.XCHANGERATE.equals(myField)) {
            /* Update the ExchangeRate */
            myTrans.setExchangeRate(pUpdate.getValue(OceanusRatio.class));
        } else if (MoneyWiseTransInfoClass.ACCOUNTDELTAUNITS.equals(myField)) {
            /* Update the AccountDeltaUnits */
            myTrans.setAccountDeltaUnits(pUpdate.getValue(OceanusUnits.class));
        } else if (MoneyWiseTransInfoClass.PARTNERDELTAUNITS.equals(myField)) {
            /* Update the PartnerDeltaUnits */
            myTrans.setPartnerDeltaUnits(pUpdate.getValue(OceanusUnits.class));
        } else if (MoneyWiseTransInfoClass.PRICE.equals(myField)) {
            /* Update the Price */
            myTrans.setPrice(pUpdate.getValue(OceanusPrice.class));
        } else if (MoneyWiseTransInfoClass.COMMISSION.equals(myField)) {
            /* Update the Commission */
            myTrans.setCommission(pUpdate.getValue(OceanusMoney.class));
        } else if (MoneyWiseTransInfoClass.DILUTION.equals(myField)) {
            /* Update the Dilution */
            myTrans.setDilution(pUpdate.getValue(OceanusRatio.class));
        } else if (MoneyWiseTransInfoClass.QUALIFYYEARS.equals(myField)) {
            /* Update the QualifyYears */
            myTrans.setYears(pUpdate.getValue(Integer.class));
        } else if (MoneyWiseTransInfoClass.RETURNEDCASHACCOUNT.equals(myField)) {
            /* Update the ReturnedCashAccount */
            myTrans.setReturnedCashAccount(pUpdate.getValue(MoneyWiseTransAsset.class));
            myBuilder.autoCorrect(myTrans);
        } else if (MoneyWiseTransInfoClass.RETURNEDCASH.equals(myField)) {
            /* Update the ReturnedCash */
            myTrans.setReturnedCash(pUpdate.getValue(OceanusMoney.class));
        } else if (MoneyWiseTransInfoClass.TAXCREDIT.equals(myField)) {
            /* Update the TaxCredit */
            myTrans.setTaxCredit(pUpdate.getValue(OceanusMoney.class));
        } else if (MoneyWiseTransInfoClass.EMPLOYEENATINS.equals(myField)) {
            /* Update the EmployeeNatIns */
            myTrans.setEmployeeNatIns(pUpdate.getValue(OceanusMoney.class));
        } else if (MoneyWiseTransInfoClass.EMPLOYERNATINS.equals(myField)) {
            /* Update the EmployerNayIns */
            myTrans.setEmployerNatIns(pUpdate.getValue(OceanusMoney.class));
        } else if (MoneyWiseTransInfoClass.DEEMEDBENEFIT.equals(myField)) {
            /* Update the Benefit */
            myTrans.setDeemedBenefit(pUpdate.getValue(OceanusMoney.class));
        } else if (MoneyWiseTransInfoClass.WITHHELD.equals(myField)) {
            /* Update the Withheld */
            myTrans.setWithheld(pUpdate.getValue(OceanusMoney.class));
        }
    }

    @Override
    protected void declareGoToItems(final boolean pUpdates) {
        /* Access the item */
        final MoneyWiseXAnalysisEvent myItem = getItem();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\sheets\MoneyWiseReader.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/sheets/MoneyWiseReader.html#L43">43</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\sheets\MoneyWiseWriter.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/sheets/MoneyWiseWriter.html#L40">40</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>super(pFactory, pReport, pPasswordMgr);
    }

    /**
     * Register sheets.
     */
    @Override
    protected void registerSheets() {
        /* Loop through the static types */
        for (MoneyWiseStaticDataType myType : MoneyWiseStaticDataType.values()) {
            /* Create the sheet */
            addSheet(newSheet(myType));
        }

        /* Loop through the basic types */
        for (MoneyWiseBasicDataType myType : MoneyWiseBasicDataType.values()) {
            /* Create the sheet */
            addSheet(newSheet(myType));
        }
    }

    /**
     * Create new sheet of required type.
     * @param pDataType the data type
     * @return the new sheet
     */
    private PrometheusSheetDataItem&lt;?&gt; newSheet(final MoneyWiseStaticDataType pDataType) {
        /* Switch on data Type */
        switch (pDataType) {
            case DEPOSITTYPE:
                return new MoneyWiseSheetDepositCategoryType(this);
            case CASHTYPE:
                return new MoneyWiseSheetCashCategoryType(this);
            case LOANTYPE:
                return new MoneyWiseSheetLoanCategoryType(this);
            case PORTFOLIOTYPE:
                return new MoneyWiseSheetPortfolioType(this);
            case PAYEETYPE:
                return new MoneyWiseSheetPayeeType(this);
            case SECURITYTYPE:
                return new MoneyWiseSheetSecurityType(this);
            case TRANSTYPE:
                return new MoneyWiseSheetTransCategoryType(this);
            case ACCOUNTINFOTYPE:
                return new MoneyWiseSheetAccountInfoType(this);
            case TRANSINFOTYPE:
                return new MoneyWiseSheetTransInfoType(this);
            case CURRENCY:
                return new MoneyWiseSheetCurrency(this);
            case TAXBASIS:
                return new MoneyWiseSheetTaxBasis(this);
            default:
                throw new IllegalArgumentException(pDataType.toString());
        }
    }

    /**
     * Create new sheet of required type.
     * @param pDataType the data type
     * @return the new sheet
     */
    private PrometheusSheetDataItem&lt;?&gt; newSheet(final MoneyWiseBasicDataType pDataType) {
        /* Switch on data Type */
        switch (pDataType) {
            case TRANSTAG:
                return new MoneyWiseSheetTransTag(this);
            case REGION:
                return new MoneyWiseSheetRegion(this);
            case DEPOSITCATEGORY:
                return new MoneyWiseSheetDepositCategory(this);
            case CASHCATEGORY:
                return new MoneyWiseSheetCashCategory(this);
            case LOANCATEGORY:
                return new MoneyWiseSheetLoanCategory(this);
            case TRANSCATEGORY:
                return new MoneyWiseSheetTransCategory(this);
            case EXCHANGERATE:
                return new MoneyWiseSheetExchangeRate(this);
            case PAYEE:
                return new MoneyWiseSheetPayee(this);
            case PAYEEINFO:
                return new MoneyWiseSheetPayeeInfo(this);
            case SECURITY:
                return new MoneyWiseSheetSecurity(this);
            case SECURITYPRICE:
                return new MoneyWiseSheetSecurityPrice(this);
            case SECURITYINFO:
                return new MoneyWiseSheetSecurityInfo(this);
            case DEPOSIT:
                return new MoneyWiseSheetDeposit(this);
            case DEPOSITRATE:
                return new MoneyWiseSheetDepositRate(this);
            case DEPOSITINFO:
                return new MoneyWiseSheetDepositInfo(this);
            case CASH:
                return new MoneyWiseSheetCash(this);
            case CASHINFO:
                return new MoneyWiseSheetCashInfo(this);
            case LOAN:
                return new MoneyWiseSheetLoan(this);
            case LOANINFO:
                return new MoneyWiseSheetLoanInfo(this);
            case PORTFOLIO:
                return new MoneyWiseSheetPortfolio(this);
            case PORTFOLIOINFO:
                return new MoneyWiseSheetPortfolioInfo(this);
            case TRANSACTION:
                return new MoneyWiseSheetTransaction(this);
            case TRANSACTIONINFO:
                return new MoneyWiseSheetTransInfo(this);
            default:
                throw new IllegalArgumentException(pDataType.toString());
        }
    }
}</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\panel\MoneyWiseXEventTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/panel/MoneyWiseXEventTable.html#L876">876</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\panel\MoneyWiseTransactionTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/panel/MoneyWiseTransactionTable.html#L881">881</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final TethysUITableManager&lt;MetisDataFieldId, MoneyWiseXAnalysisEvent&gt; myTable = getTable();
        hideAllColumns();

        /* Switch on column set */
        switch (pSet) {
            case BALANCE:
                myTable.getColumn(MoneyWiseTransInfoClass.COMMENTS).setVisible(true);
                myTable.getColumn(MoneyWiseTransDataId.DEBIT).setVisible(true);
                myTable.getColumn(MoneyWiseTransDataId.CREDIT).setVisible(true);
                myTable.getColumn(MoneyWiseTransDataId.BALANCE).setVisible(true);
                break;
            case STANDARD:
                myTable.getColumn(MoneyWiseTransInfoClass.COMMENTS).setVisible(true);
                myTable.getColumn(MoneyWiseBasicResource.TRANSACTION_AMOUNT).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.TRANSTAG).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.REFERENCE).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.PARTNERAMOUNT).setVisible(true);
                break;
            case SALARY:
                myTable.getColumn(MoneyWiseBasicResource.TRANSACTION_AMOUNT).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.TAXCREDIT).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.EMPLOYEENATINS).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.EMPLOYERNATINS).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.DEEMEDBENEFIT).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.WITHHELD).setVisible(true);
                break;
            case INTEREST:
                myTable.getColumn(MoneyWiseBasicResource.TRANSACTION_AMOUNT).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.TAXCREDIT).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.WITHHELD).setVisible(true);
                break;
            case DIVIDEND:
                myTable.getColumn(MoneyWiseBasicResource.TRANSACTION_AMOUNT).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.TAXCREDIT).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.ACCOUNTDELTAUNITS).setVisible(true);
                break;
            case SECURITY:
                myTable.getColumn(MoneyWiseBasicResource.TRANSACTION_AMOUNT).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.ACCOUNTDELTAUNITS).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.PARTNERDELTAUNITS).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.DILUTION).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.RETURNEDCASHACCOUNT).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.RETURNEDCASH).setVisible(true);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseRegion.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseRegion.html#L119">119</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseTransTag.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseTransTag.html#L119">119</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public MoneyWiseRegion(final MoneyWiseRegionList pList) {
        super(pList, 0);
        setNextDataKeySet();
    }

    @Override
    public MetisFieldSetDef getDataFieldSet() {
        return FIELD_DEFS;
    }

    @Override
    public String formatObject(final OceanusDataFormatter pFormatter) {
        return toString();
    }

    @Override
    public String toString() {
        return getName();
    }

    @Override
    public boolean includeXmlField(final MetisDataFieldId pField) {
        /* Determine whether fields should be included */
        if (PrometheusDataResource.DATAITEM_FIELD_NAME.equals(pField)) {
            return true;
        }
        if (PrometheusDataResource.DATAITEM_FIELD_DESC.equals(pField)) {
            return getDesc() != null;
        }

        /* Pass call on */
        return super.includeXmlField(pField);
    }

    @Override
    public String getName() {
        return getValues().getValue(PrometheusDataResource.DATAITEM_FIELD_NAME, String.class);
    }

    /**
     * Obtain Encrypted name.
     * @return the bytes
     */
    public byte[] getNameBytes() {
        return getValues().getEncryptedBytes(PrometheusDataResource.DATAITEM_FIELD_NAME);
    }

    /**
     * Obtain Encrypted Name Field.
     * @return the Field
     */
    private PrometheusEncryptedPair getNameField() {
        return getValues().getEncryptedPair(PrometheusDataResource.DATAITEM_FIELD_NAME);
    }

    /**
     * Obtain Description.
     * @return the description
     */
    public String getDesc() {
        return getValues().getValue(PrometheusDataResource.DATAITEM_FIELD_DESC, String.class);
    }

    /**
     * Obtain Encrypted description.
     * @return the bytes
     */
    public byte[] getDescBytes() {
        return getValues().getEncryptedBytes(PrometheusDataResource.DATAITEM_FIELD_DESC);
    }

    /**
     * Obtain Encrypted Description Field.
     * @return the Field
     */
    private PrometheusEncryptedPair getDescField() {
        return getValues().getEncryptedPair(PrometheusDataResource.DATAITEM_FIELD_DESC);
    }

    /**
     * Set name value.
     * @param pValue the value
     * @throws OceanusException on error
     */
    private void setValueName(final String pValue) throws OceanusException {
        setEncryptedValue(PrometheusDataResource.DATAITEM_FIELD_NAME, pValue);
    }

    /**
     * Set name value.
     * @param pBytes the value
     * @throws OceanusException on error
     */
    private void setValueName(final byte[] pBytes) throws OceanusException {
        setEncryptedValue(PrometheusDataResource.DATAITEM_FIELD_NAME, pBytes, String.class);
    }

    /**
     * Set name value.
     * @param pValue the value
     */
    private void setValueName(final PrometheusEncryptedPair pValue) {
        getValues().setUncheckedValue(PrometheusDataResource.DATAITEM_FIELD_NAME, pValue);
    }

    /**
     * Set description value.
     * @param pValue the value
     * @throws OceanusException on error
     */
    private void setValueDesc(final String pValue) throws OceanusException {
        setEncryptedValue(PrometheusDataResource.DATAITEM_FIELD_DESC, pValue);
    }

    /**
     * Set description value.
     * @param pBytes the value
     * @throws OceanusException on error
     */
    private void setValueDesc(final byte[] pBytes) throws OceanusException {
        setEncryptedValue(PrometheusDataResource.DATAITEM_FIELD_DESC, pBytes, String.class);
    }

    /**
     * Set description value.
     * @param pValue the value
     */
    private void setValueDesc(final PrometheusEncryptedPair pValue) {
        getValues().setUncheckedValue(PrometheusDataResource.DATAITEM_FIELD_DESC, pValue);
    }

    @Override
    public MoneyWiseDataSet getDataSet() {
        return (MoneyWiseDataSet) super.getDataSet();
    }

    @Override
    public MoneyWiseRegion getBase() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\dialog\MoneyWiseXTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/dialog/MoneyWiseXTransactionDialog.html#L389">389</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\dialog\MoneyWiseTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/dialog/MoneyWiseTransactionDialog.html#L401">401</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theFieldSet.setFieldEditable(MoneyWiseTransInfoClass.PARTNERAMOUNT, bEditField);

        /* Determine whether the taxCredit field should be visible */
        bEditField = isEditable &amp;&amp; isEditableField(myTrans, MoneyWiseTransInfoClass.TAXCREDIT);
        bShowField = bEditField || myTrans.getTaxCredit() != null;
        theFieldSet.setFieldVisible(MoneyWiseTransInfoClass.TAXCREDIT, bShowField);
        theFieldSet.setFieldEditable(MoneyWiseTransInfoClass.TAXCREDIT, bEditField);

        /* Determine whether the EeNatIns field should be visible */
        bEditField = isEditable &amp;&amp; isEditableField(myTrans, MoneyWiseTransInfoClass.EMPLOYEENATINS);
        bShowField = bEditField || myTrans.getEmployeeNatIns() != null;
        theFieldSet.setFieldVisible(MoneyWiseTransInfoClass.EMPLOYEENATINS, bShowField);
        theFieldSet.setFieldEditable(MoneyWiseTransInfoClass.EMPLOYEENATINS, bEditField);

        /* Determine whether the ErnatIns field should be visible */
        bEditField = isEditable &amp;&amp; isEditableField(myTrans, MoneyWiseTransInfoClass.EMPLOYERNATINS);
        bShowField = bEditField || myTrans.getEmployerNatIns() != null;
        theFieldSet.setFieldVisible(MoneyWiseTransInfoClass.EMPLOYERNATINS, bShowField);
        theFieldSet.setFieldEditable(MoneyWiseTransInfoClass.EMPLOYERNATINS, bEditField);

        /* Determine whether the benefit field should be visible */
        bEditField = isEditable &amp;&amp; isEditableField(myTrans, MoneyWiseTransInfoClass.DEEMEDBENEFIT);
        bShowField = bEditField || myTrans.getDeemedBenefit() != null;
        theFieldSet.setFieldVisible(MoneyWiseTransInfoClass.DEEMEDBENEFIT, bShowField);
        theFieldSet.setFieldEditable(MoneyWiseTransInfoClass.DEEMEDBENEFIT, bEditField);

        /* Determine whether the donation field should be visible */
        bEditField = isEditable &amp;&amp; isEditableField(myTrans, MoneyWiseTransInfoClass.WITHHELD);
        bShowField = bEditField || myTrans.getWithheld() != null;
        theFieldSet.setFieldVisible(MoneyWiseTransInfoClass.WITHHELD, bShowField);
        theFieldSet.setFieldEditable(MoneyWiseTransInfoClass.WITHHELD, bEditField);

        /* Determine whether the account units field should be visible */
        bEditField = isEditable &amp;&amp; isEditableField(myTrans, MoneyWiseTransInfoClass.ACCOUNTDELTAUNITS);
        bShowField = bEditField || myTrans.getAccountDeltaUnits() != null;
        theFieldSet.setFieldVisible(MoneyWiseTransInfoClass.ACCOUNTDELTAUNITS, bShowField);
        theFieldSet.setFieldEditable(MoneyWiseTransInfoClass.ACCOUNTDELTAUNITS, bEditField);

        /* Determine whether the partnerDeltaUnits field should be visible */
        bEditField = isEditable &amp;&amp; isEditableField(myTrans, MoneyWiseTransInfoClass.PARTNERDELTAUNITS);
        bShowField = bEditField || myTrans.getPartnerDeltaUnits() != null;
        theFieldSet.setFieldVisible(MoneyWiseTransInfoClass.PARTNERDELTAUNITS, bShowField);
        theFieldSet.setFieldEditable(MoneyWiseTransInfoClass.PARTNERDELTAUNITS, bEditField);

        /* Determine whether the dilution field should be visible */
        bEditField = isEditable &amp;&amp; isEditableField(myTrans, MoneyWiseTransInfoClass.DILUTION);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\panel\MoneyWiseXReportTab.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/panel/MoneyWiseXReportTab.html#L177">177</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\panel\MoneyWiseReportTab.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/panel/MoneyWiseReportTab.html#L170">170</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theHTMLPane.setCSSContent(MoneyWiseXReportStyleSheet.CSS_REPORT);

        /* Create listeners */
        theView.getEventRegistrar().addEventListener(e -&gt; refreshData());
        theManager.getEventRegistrar().addEventListener(this::handleGoToRequest);
        theError.getEventRegistrar().addEventListener(e -&gt; handleErrorPane());
        final OceanusEventRegistrar&lt;PrometheusDataEvent&gt; myRegistrar = theSelect.getEventRegistrar();
        myRegistrar.addEventListener(PrometheusDataEvent.SELECTIONCHANGED, e -&gt; handleReportRequest());
        myRegistrar.addEventListener(PrometheusDataEvent.PRINT, e -&gt; theHTMLPane.printIt());
        myRegistrar.addEventListener(PrometheusDataEvent.SAVETOFILE, e -&gt; theHTMLPane.saveToFile());
        theHTMLPane.getEventRegistrar().addEventListener(TethysUIEvent.BUILDPAGE, e -&gt; {
            theManager.processReference(e.getDetails(String.class), theHTMLPane);
            e.consume();
        });
    }

    @Override
    public TethysUIComponent getUnderlying() {
        return thePanel;
    }

    @Override
    public OceanusEventRegistrar&lt;PrometheusDataEvent&gt; getEventRegistrar() {
        return theEventManager.getEventRegistrar();
    }

    @Override
    public void setEnabled(final boolean pEnabled) {
        /* Pass on to important elements */
        theSelect.setEnabled(pEnabled);
        theError.setEnabled(pEnabled);
        theHTMLPane.setEnabled(pEnabled);
    }

    @Override
    public void setVisible(final boolean pVisible) {
        thePanel.setVisible(pVisible);
    }

    /**
     * Refresh views/controls after a load/update of underlying data.
     */
    private void refreshData() {
        /* Obtain the active profile */
        OceanusProfile myTask = theView.getActiveTask();
        myTask = myTask.startTask(&quot;Reports&quot;);

        /* Protect against exceptions */
        try {
            /* Hide the instant debug since it is now invalid */
            theSpotEntry.setVisible(false);

            /* Refresh the data */
            theSelect.setRange(theView.getRange());
            theSelect.setSecurities(theView.hasActiveSecurities());
            buildReport();

            /* Create SavePoint */
            theSelect.createSavePoint();
        } catch (OceanusException e) {
            /* Show the error */
            theView.addError(e);

            /* Restore SavePoint */
            theSelect.restoreSavePoint();
        }

        /* Complete the task */
        myTask.end();
    }

    /**
     * Build the report.
     * @throws OceanusException on error
     */
    private void buildReport() throws OceanusException {
        /* Access the values from the selection */
        final MoneyWiseXReportType myReportType = theSelect.getReportType();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXAnalysisSelect.html#L435">435</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseAnalysisSelect.html#L433">433</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public MoneyWiseXAnalysisFilter&lt;?, ?&gt; getFilter() {
        return theState.getFilter();
    }

    /**
     * Obtain the ColumnSet.
     * @return the columnSet.
     */
    public MoneyWiseAnalysisColumnSet getColumns() {
        return theState.getColumns();
    }

    /**
     * Are we showing columns?
     * @return true/false.
     */
    public boolean showColumns() {
        return theState.showColumns();
    }

    /**
     * Create control panel.
     * @param pFactory the GUI factory
     * @param pNewButton the new button
     * @return the panel
     */
    private TethysUIBoxPaneManager buildControlPanel(final TethysUIFactory&lt;?&gt; pFactory,
                                                     final TethysUIButton pNewButton) {
        /* Create the control panel */
        final TethysUIBoxPaneManager myPanel = pFactory.paneFactory().newHBoxPane();

        /* Create the labels */
        final TethysUILabel myRangeLabel = pFactory.controlFactory().newLabel(NLS_RANGE);

        /* Create save button */
        final TethysUIButton mySave = pFactory.buttonFactory().newButton();
        MetisIcon.configureSaveIconButton(mySave);

        /* Create the panel */
        myPanel.setBorderTitle(NLS_TITLE);
        myPanel.addNode(myRangeLabel);
        myPanel.addNode(theRangeButton);
        myPanel.addSpacer();
        myPanel.addNode(theFilterDetail);
        myPanel.addSpacer();
        myPanel.addNode(mySave);
        myPanel.addNode(pNewButton);

        /* Pass through the save event */
        final OceanusEventRegistrar&lt;TethysUIEvent&gt; myRegistrar = mySave.getEventRegistrar();
        myRegistrar.addEventListener(e -&gt; theEventManager.fireEvent(PrometheusDataEvent.SAVETOFILE));

        /* Return the panel */
        return myPanel;
    }

    /**
     * Create filter detail panel.
     * @param pFactory the GUI factory
     * @return the panel
     */
    private TethysUIBoxPaneManager buildFilterDetail(final TethysUIFactory&lt;?&gt; pFactory) {
        /* Create the control panel */
        final TethysUIBoxPaneManager myPanel = pFactory.paneFactory().newHBoxPane();

        /* Create the labels */
        final TethysUILabel myFilterLabel = pFactory.controlFactory().newLabel(NLS_FILTER);

        /* Create the panel */
        myPanel.addNode(myFilterLabel);
        myPanel.addNode(theFilterButton);
        myPanel.addSpacer();
        myPanel.addNode(theBucketLabel);
        myPanel.addNode(theColumnLabel);
        myPanel.addNode(theBucketButton);
        myPanel.addNode(theColumnButton);

        /* Return the panel */
        return myPanel;
    }

    /**
     * Create filter select panel.
     * @param pFactory the GUI factory
     * @return the panel
     */
    private TethysUIBoxPaneManager buildFilterSelect(final TethysUIFactory&lt;?&gt; pFactory) {
        /* Create the filter panel */
        final TethysUIBoxPaneManager myPanel = pFactory.paneFactory().newHBoxPane();

        /* Create the labels */
        final TethysUILabel myTypeLabel = pFactory.controlFactory().newLabel(NLS_FILTERTYPE);

        /* Add to the card panels */
        theCardPanel.addCard(MoneyWiseXAnalysisType.DEPOSIT.name(), theDepositSelect);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\dialog\MoneyWiseXTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/dialog/MoneyWiseXTransactionDialog.html#L449">449</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\dialog\MoneyWiseTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/dialog/MoneyWiseTransactionDialog.html#L479">479</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theFieldSet.setFieldEditable(MoneyWiseTransInfoClass.RETURNEDCASH, bEditField);

        /* Determine whether the reconciled field should be visible */
        final boolean bShowReconciled = isEditable || bIsReconciled;
        theReconciledState = bIsLocked;
        theDirectionState = bIsReconciled;
        theFieldSet.setFieldVisible(MoneyWiseBasicResource.TRANSACTION_RECONCILED, bShowReconciled);
        theFieldSet.setFieldEditable(MoneyWiseBasicResource.TRANSACTION_RECONCILED, isEditable &amp;&amp; !bIsLocked);

        /* Determine basic editing */
        final boolean canEdit = isEditable &amp;&amp; !bIsReconciled;
        final boolean needsNullAmount = myTrans.needsNullAmount();
        theFieldSet.setFieldEditable(MoneyWiseBasicResource.TRANSACTION_DIRECTION, canEdit &amp;&amp; myTrans.canSwitchDirection());
        theFieldSet.setFieldEditable(MoneyWiseBasicResource.TRANSACTION_ACCOUNT, canEdit);
        theFieldSet.setFieldEditable(MoneyWiseBasicResource.TRANSACTION_PARTNER, canEdit);
        theFieldSet.setFieldEditable(MoneyWiseBasicDataType.TRANSCATEGORY, canEdit);
        theFieldSet.setFieldEditable(MoneyWiseBasicResource.MONEYWISEDATA_FIELD_DATE, canEdit);
        theFieldSet.setFieldEditable(MoneyWiseBasicResource.TRANSACTION_AMOUNT, canEdit &amp;&amp; !needsNullAmount);
        theFieldSet.setFieldVisible(MoneyWiseBasicResource.TRANSACTION_AMOUNT, !needsNullAmount);

        /* Set the range for the dateButton */
        final MoneyWiseValidateTransaction myBuilder = (MoneyWiseValidateTransaction) myTrans.getList().getValidator();
        theRange = myBuilder.getRange();
    }

    /**
     * Is the field editable?
     * @param pTrans the transaction
     * @param pField the field class
     * @return true/false
     */
    public static boolean isEditableField(final MoneyWiseTransaction pTrans,
                                          final MoneyWiseTransInfoClass pField) {
        /* Access the infoSet */
        final MoneyWiseTransInfoSet myInfoSet = pTrans.getInfoSet();

        /* If the transaction is reconciled */
        if (Boolean.TRUE.equals(pTrans.isReconciled())) {
            /* Only allow editing of metaData */
            return myInfoSet.isMetaData(pField);
        }

        /* Check whether the field is available */
        final MoneyWiseValidateTransaction myValidator = (MoneyWiseValidateTransaction) pTrans.getList().getValidator();
        final MetisFieldRequired isRequired = myValidator.isClassRequired(pTrans, pField);
        return !isRequired.equals(MetisFieldRequired.NOTALLOWED);
    }

    @SuppressWarnings(&quot;unchecked&quot;)
    @Override
    protected void updateField(final PrometheusFieldSetEvent pUpdate) throws OceanusException {
        /* Access the field */
        final MetisDataFieldId myField = pUpdate.getFieldId();
        final MoneyWiseTransaction myTrans = getItem().getTransaction();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\data\analysis\base\MoneyWiseXAnalysisValues.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/data/analysis/base/MoneyWiseXAnalysisValues.html#L189">189</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\data\analysis\base\MoneyWiseAnalysisValues.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/data/analysis/base/MoneyWiseAnalysisValues.html#L195">195</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public void resetBaseValues() {
    }

    /**
     * Set Value.
     * @param pAttr the attribute
     * @param pValue the value of the attribute
     */
    public void setValue(final E pAttr,
                         final Object pValue) {
        /* Set the value into the map */
        theMap.put(pAttr, pValue);
    }

    /**
     * Obtain an attribute value.
     * @param &lt;X&gt; the data type
     * @param pAttr the attribute
     * @param pClass the class of the attribute
     * @return the value of the attribute or null
     */
    private &lt;X&gt; X getValue(final E pAttr,
                           final Class&lt;X&gt; pClass) {
        /* Obtain the value */
        return pClass.cast(getValue(pAttr));
    }

    /**
     * Obtain an attribute value.
     * @param pAttr the attribute
     * @return the value of the attribute or null
     */
    public Object getValue(final E pAttr) {
        /* Obtain the attribute value */
        return theMap.get(pAttr);
    }

    /**
     * Obtain a decimal attribute value.
     * @param pAttr the attribute
     * @return the value of the attribute or null
     */
    public OceanusDecimal getDecimalValue(final E pAttr) {
        /* Obtain the attribute value */
        return getValue(pAttr, OceanusDecimal.class);
    }

    /**
     * Obtain a units attribute value.
     * @param pAttr the attribute
     * @return the value of the attribute or null
     */
    public OceanusUnits getUnitsValue(final E pAttr) {
        /* Obtain the attribute value */
        return getValue(pAttr, OceanusUnits.class);
    }

    /**
     * Obtain a price attribute value.
     * @param pAttr the attribute
     * @return the value of the attribute or null
     */
    public OceanusPrice getPriceValue(final E pAttr) {
        /* Obtain the attribute value */
        return getValue(pAttr, OceanusPrice.class);
    }

    /**
     * Obtain a money attribute value.
     * @param pAttr the attribute
     * @return the value of the attribute or null
     */
    public OceanusMoney getMoneyValue(final E pAttr) {
        /* Obtain the attribute value */
        return getValue(pAttr, OceanusMoney.class);
    }

    /**
     * Obtain a rate attribute value.
     * @param pAttr the attribute
     * @return the value of the attribute or null
     */
    public OceanusRate getRateValue(final E pAttr) {
        /* Obtain the attribute value */
        return getValue(pAttr, OceanusRate.class);
    }

    /**
     * Obtain a ratio attribute value.
     * @param pAttr the attribute
     * @return the value of the attribute or null
     */
    public OceanusRatio getRatioValue(final E pAttr) {
        /* Obtain the attribute value */
        return getValue(pAttr, OceanusRatio.class);
    }

    /**
     * Obtain a date attribute value.
     * @param pAttr the attribute
     * @return the value of the attribute or null
     */
    public OceanusDate getDateValue(final E pAttr) {
        /* Obtain the attribute value */
        return getValue(pAttr, OceanusDate.class);
    }

    /**
     * Obtain an integer attribute value.
     * @param pAttr the attribute
     * @return the value of the attribute or null
     */
    public Integer getIntegerValue(final E pAttr) {
        /* Obtain the attribute */
        return getValue(pAttr, Integer.class);
    }

    /**
     * Obtain an enum attribute value.
     * @param &lt;V&gt; the enum type
     * @param pAttr the attribute
     * @param pClass the Class of the enum
     * @return the value of the attribute or null
     */
    public &lt;V extends Enum&lt;V&gt;&gt; V getEnumValue(final E pAttr,
                                              final Class&lt;V&gt; pClass) {
        /* Obtain the attribute */
        return getValue(pAttr, pClass);
    }</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWisePayee.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWisePayee.html#L179">179</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWisePortfolio.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWisePortfolio.html#L192">192</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public MoneyWisePayeeInfoSet getInfoSet() {
        return theInfoSet;
    }

    /**
     * Obtain fieldValue for infoSet.
     * @param pFieldId the fieldId
     * @return the value
     */
    private Object getFieldValue(final MetisDataFieldId pFieldId) {
        return theInfoSet != null ? theInfoSet.getFieldValue(pFieldId) : null;
    }

    /**
     * Obtain WebSite.
     * @return the webSite
     */
    public char[] getWebSite() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.WEBSITE, char[].class)
                : null;
    }

    /**
     * Obtain CustNo.
     * @return the customer #
     */
    public char[] getCustNo() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.CUSTOMERNO, char[].class)
                : null;
    }

    /**
     * Obtain UserId.
     * @return the userId
     */
    public char[] getUserId() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.USERID, char[].class)
                : null;
    }

    /**
     * Obtain Password.
     * @return the password
     */
    public char[] getPassword() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.PASSWORD, char[].class)
                : null;
    }

    /**
     * Obtain SortCode.
     * @return the sort code
     */
    public char[] getSortCode() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.SORTCODE, char[].class)
                : null;
    }

    /**
     * Obtain Reference.
     * @return the reference
     */
    public char[] getReference() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.REFERENCE, char[].class)
                : null;
    }

    /**
     * Obtain Account.
     * @return the account
     */
    public char[] getAccount() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.ACCOUNT, char[].class)
                : null;
    }

    /**
     * Obtain Notes.
     * @return the notes
     */
    public char[] getNotes() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.NOTES, char[].class)
                : null;
    }

    @Override
    public MoneyWisePayeeType getCategory() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\data\analysis\buckets\MoneyWiseXAnalysisBucketResource.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/data/analysis/buckets/MoneyWiseXAnalysisBucketResource.html#L33">33</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\data\analysis\data\MoneyWiseAnalysisDataResource.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/data/analysis/data/MoneyWiseAnalysisDataResource.html#L33">33</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>implements OceanusBundleId, MetisDataFieldId {
    /**
     * Analysis Name.
     */
    ANALYSIS_NAME(&quot;Analysis.Name&quot;),

    /**
     * Analysis Analyser Name.
     */
    ANALYSIS_ANALYSER(&quot;Analysis.Analyser&quot;),

    /**
     * Analysis Manager Name.
     */
    ANALYSIS_MANAGER(&quot;Analysis.Manager&quot;),

    /**
     * Analysis Chargeable Events.
     */
    ANALYSIS_CHARGES(&quot;Analysis.Charges&quot;),

    /**
     * Analysis Dilution Events.
     */
    ANALYSIS_DILUTIONS(&quot;Analysis.Dilutions&quot;),

    /**
     * Analysis Totals.
     */
    ANALYSIS_TOTALS(&quot;Analysis.Totals&quot;),

    /**
     * Bucket Account.
     */
    BUCKET_ACCOUNT(&quot;Bucket.Account&quot;),

    /**
     * Bucket BaseValues.
     */
    BUCKET_BASEVALUES(&quot;Bucket.BaseValues&quot;),

    /**
     * Bucket History.
     */
    BUCKET_HISTORY(&quot;Bucket.History&quot;),

    /**
     * Bucket SnapShot.
     */
    BUCKET_SNAPSHOT(&quot;Bucket.SnapShot&quot;),

    /**
     * Bucket Values.
     */
    BUCKET_VALUES(&quot;Bucket.Values&quot;),

    /**
     * Bucket Previous Values.
     */
    BUCKET_PREVIOUS(&quot;Bucket.Previous&quot;),

    /**
     * Filter All.
     */
    FILTER_ALL(&quot;Filter.All&quot;),

    /**
     * TransTag Name.
     */
    TRANSTAG_NAME(&quot;TransTag.Name&quot;),

    /**
     * TransTag List.
     */
    TRANSTAG_LIST(&quot;TransTag.List&quot;),

    /**
     * Cash Name.
     */
    CASH_NAME(&quot;Cash.Name&quot;),

    /**
     * Cash List.
     */
    CASH_LIST(&quot;Cash.List&quot;),

    /**
     * CashCategory Name.
     */
    CASHCATEGORY_NAME(&quot;CashCategory.Name&quot;),

    /**
     * CashCategory List.
     */
    CASHCATEGORY_LIST(&quot;CashCategory.List&quot;),

    /**
     * Deposit Name.
     */
    DEPOSIT_NAME(&quot;Deposit.Name&quot;),

    /**
     * Deposit List.
     */
    DEPOSIT_LIST(&quot;Deposit.List&quot;),

    /**
     * DepositCategory Name.
     */
    DEPOSITCATEGORY_NAME(&quot;DepositCategory.Name&quot;),

    /**
     * DepositCategory List.
     */
    DEPOSITCATEGORY_LIST(&quot;DepositCategory.List&quot;),

    /**
     * Loan Name.
     */
    LOAN_NAME(&quot;Loan.Name&quot;),

    /**
     * Loan List.
     */
    LOAN_LIST(&quot;Loan.List&quot;),

    /**
     * Loan isCreditCard.
     */
    LOAN_CREDITCARD(&quot;Loan.isCreditCard&quot;),

    /**
     * LoanCategory Name.
     */
    LOANCATEGORY_NAME(&quot;LoanCategory.Name&quot;),

    /**
     * LoanCategory List.
     */
    LOANCATEGORY_LIST(&quot;LoanCategory.List&quot;),

    /**
     * TransactionCategory Name.
     */
    TRANSCATEGORY_NAME(&quot;TransCategory.Name&quot;),

    /**
     * TransactionCategory List.
     */
    TRANSCATEGORY_LIST(&quot;TransCategory.List&quot;),

    /**
     * Payee Name.
     */
    PAYEE_NAME(&quot;Payee.Name&quot;),

    /**
     * Payee List.
     */
    PAYEE_LIST(&quot;Payee.List&quot;),

    /**
     * Portfolio Name.
     */
    PORTFOLIO_NAME(&quot;Portfolio.Name&quot;),

    /**
     * Portfolio List.
     */
    PORTFOLIO_LIST(&quot;Portfolio.List&quot;),

    /**
     * Portfolio Cash Name.
     */
    PORTFOLIOCASH_NAME(&quot;Portfolio.Cash.Name&quot;),

    /**
     * Security Name.
     */
    SECURITY_NAME(&quot;Security.Name&quot;),

    /**
     * Security List.
     */
    SECURITY_LIST(&quot;Security.List&quot;),

    /**
     * TaxBasis Name.
     */
    TAXBASIS_NAME(&quot;TaxBasis.Name&quot;),

    /**
     * TaxBasis List.
     */
    TAXBASIS_LIST(&quot;TaxBasis.List&quot;),

    /**
     * TaxBasisAccount Name.
     */
    TAXBASIS_ACCOUNTNAME(&quot;TaxBasis.AccountName&quot;),

    /**
     * TaxBasisAccount List.
     */
    TAXBASIS_ACCOUNTLIST(&quot;TaxBasis.AccountList&quot;),

    /**
     * Dilution Name.
     */
    DILUTION_NAME(&quot;Dilution.Name&quot;),

    /**
     * Dilution List.
     */
    DILUTION_LIST(&quot;Dilution.List&quot;),

    /**
     * Charge Name.
     */
    CHARGE_NAME(&quot;Charge.Name&quot;),

    /**
     * Charge List.
     */
    CHARGE_LIST(&quot;Charge.List&quot;),

    /**
     * Charge Slice.
     */
    CHARGE_SLICE(&quot;Charge.Slice&quot;),

    /**
     * Charge Tax.
     */
    CHARGE_TAX(&quot;Charge.Tax&quot;),

    /**
     * TaxCalculation.
     */
    TAX_CALCULATION(&quot;Tax.Calculation&quot;),

    /**
     * TaxYears.
     */
    TAX_YEARS(&quot;Tax.Years&quot;);

    /**
     * The AnalysisType Map.
     */
    private static final Map&lt;MoneyWiseXAnalysisType, OceanusBundleId&gt; ANALYSIS_MAP = buildAnalysisMap();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\panel\MoneyWiseXEventTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/panel/MoneyWiseXEventTable.html#L948">948</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\panel\MoneyWiseTransactionTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/panel/MoneyWiseTransactionTable.html#L955">955</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final TethysUITableManager&lt;MetisDataFieldId, MoneyWiseXAnalysisEvent&gt; myTable = getTable();
        myTable.getColumn(MoneyWiseTransDataId.DEBIT).setVisible(false);
        myTable.getColumn(MoneyWiseTransDataId.CREDIT).setVisible(false);
        myTable.getColumn(MoneyWiseTransDataId.BALANCE).setVisible(false);
        myTable.getColumn(MoneyWiseTransInfoClass.COMMENTS).setVisible(false);
        myTable.getColumn(MoneyWiseBasicResource.TRANSACTION_AMOUNT).setVisible(false);
        myTable.getColumn(MoneyWiseTransInfoClass.TRANSTAG).setVisible(false);
        myTable.getColumn(MoneyWiseTransInfoClass.REFERENCE).setVisible(false);
        myTable.getColumn(MoneyWiseTransInfoClass.TAXCREDIT).setVisible(false);
        myTable.getColumn(MoneyWiseTransInfoClass.EMPLOYERNATINS).setVisible(false);
        myTable.getColumn(MoneyWiseTransInfoClass.EMPLOYEENATINS).setVisible(false);
        myTable.getColumn(MoneyWiseTransInfoClass.DEEMEDBENEFIT).setVisible(false);
        myTable.getColumn(MoneyWiseTransInfoClass.WITHHELD).setVisible(false);
        myTable.getColumn(MoneyWiseTransInfoClass.ACCOUNTDELTAUNITS).setVisible(false);
        myTable.getColumn(MoneyWiseTransInfoClass.PARTNERDELTAUNITS).setVisible(false);
        myTable.getColumn(MoneyWiseTransInfoClass.PARTNERAMOUNT).setVisible(false);
        myTable.getColumn(MoneyWiseTransInfoClass.DILUTION).setVisible(false);
        myTable.getColumn(MoneyWiseTransInfoClass.RETURNEDCASHACCOUNT).setVisible(false);
        myTable.getColumn(MoneyWiseTransInfoClass.RETURNEDCASH).setVisible(false);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportTaxCalculation.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportTaxCalculation.html#L129">129</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportTaxCalculation.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportTaxCalculation.html#L129">129</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theBuilder.makeTotalCell(myTable, MoneyWiseXReportBuilder.TEXT_TOTAL);
        theBuilder.makeTotalCell(myTable, myTaxAnalysis.getTaxableIncome());
        theBuilder.makeTotalCell(myTable, myTaxAnalysis.getTaxDue());
        theBuilder.startTotalRow(myTable);
        theBuilder.makeTotalCell(myTable, MoneyWiseTaxClass.TAXPAID.toString());
        theBuilder.makeStretchedTotalCell(myTable, myTaxAnalysis.getTaxPaid());
        theBuilder.startTotalRow(myTable);
        theBuilder.makeTotalCell(myTable, TEXT_PROFIT);
        theBuilder.makeStretchedTotalCell(myTable, myTaxAnalysis.getTaxProfit());

        /* Return the document */
        return theBuilder.getDocument();
    }

    /**
     * Build a standard tax report element.
     * @param pParent the parent table
     * @param pSummary the tax summary
     */
    public void makeTaxReport(final MetisHTMLTable pParent,
                              final MoneyWiseTaxDueBucket pSummary) {
        /* Format the detail */
        final MetisHTMLTable myTable = theBuilder.createEmbeddedTable(pParent);
        theBuilder.startRow(myTable);
        theBuilder.makeTitleCell(myTable, TEXT_INCOME);
        theBuilder.makeTitleCell(myTable, TEXT_RATE);
        theBuilder.makeTitleCell(myTable, TEXT_TAXDUE);

        /* Loop through the Transaction Detail Buckets */
        final Iterator&lt;MoneyWiseTaxBandBucket&gt; myIterator = pSummary.taxBandIterator();
        while (myIterator.hasNext()) {
            final MoneyWiseTaxBandBucket myBucket = myIterator.next();

            /* Format the detail */
            theBuilder.startRow(myTable);
            theBuilder.makeValueCell(myTable, myBucket.getAmount());
            theBuilder.makeValueCell(myTable, myBucket.getRate());
            theBuilder.makeValueCell(myTable, myBucket.getTaxDue());
        }

        /* Embed the table correctly */
        theBuilder.embedTable(myTable, pSummary.getTaxBasis().toString());
    }

    @Override
    public MoneyWiseXAnalysisFilter&lt;?, ?&gt; processFilter(final Object pSource) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportBalanceSheet.html#L505">505</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportBalanceSheet.html#L567">567</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportBalanceSheet.html#L629">629</a></td></tr>
<tr class="a">
<td colspan="2">
<pre>final MoneyWiseXAnalysisDepositBucket myBucket = myIterator.next();

            /* Skip record if incorrect category */
            if (!MetisDataDifference.isEqual(myBucket.getCategory(), myCategory)) {
                continue;
            }

            /* Access bucket name */
            final String myName = myBucket.getName();

            /* Access values */
            final MoneyWiseXAnalysisAccountValues myValues = myBucket.getValues();
            final MoneyWiseXAnalysisAccountValues myBaseValues = myBucket.getBaseValues();

            /* Create the detail row */
            theBuilder.startRow(myTable);
            theBuilder.makeFilterLinkCell(myTable, myName);

            /* Handle foreign accounts */
            if (isForeign) {
                if (myBucket.isForeignCurrency()) {
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.BALANCE));
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                    theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.BALANCE));
                    theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                } else {
                    theBuilder.makeStretchedValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                    theBuilder.makeStretchedValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                }
            } else {
                theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
            }
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUEDELTA));

            /* Record the filter */
            setFilterForId(myName, myBucket);
        }

        /* Return the table */
        return myTable;
    }

    /**
     * Create a delayed cash category table.
     * @param pParent the parent table
     * @param pSource the source bucket
     * @return the new document fragment
     */
    private MetisHTMLTable createDelayedCash(final MetisHTMLTable pParent,</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportBalanceSheet.html#L505">505</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportBalanceSheet.html#L567">567</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportBalanceSheet.html#L629">629</a></td></tr>
<tr class="a">
<td colspan="2">
<pre>final MoneyWiseAnalysisDepositBucket myBucket = myIterator.next();

            /* Skip record if incorrect category */
            if (!MetisDataDifference.isEqual(myBucket.getCategory(), myCategory)) {
                continue;
            }

            /* Access bucket name */
            final String myName = myBucket.getName();

            /* Access values */
            final MoneyWiseAnalysisAccountValues myValues = myBucket.getValues();
            final MoneyWiseAnalysisAccountValues myBaseValues = myBucket.getBaseValues();

            /* Create the detail row */
            theBuilder.startRow(myTable);
            theBuilder.makeFilterLinkCell(myTable, myName);

            /* Handle foreign accounts */
            if (isForeign) {
                if (myBucket.isForeignCurrency()) {
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.FOREIGNVALUE));
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                    theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.FOREIGNVALUE));
                    theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                } else {
                    theBuilder.makeStretchedValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                    theBuilder.makeStretchedValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                }
            } else {
                theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
            }
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUEDELTA));

            /* Record the filter */
            setFilterForId(myName, myBucket);
        }

        /* Return the table */
        return myTable;
    }

    /**
     * Create a delayed cash category table.
     * @param pParent the parent table
     * @param pSource the source bucket
     * @return the new document fragment
     */
    private MetisHTMLTable createDelayedCash(final MetisHTMLTable pParent,</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWisePayee.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWisePayee.html#L487">487</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWisePortfolio.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWisePortfolio.html#L521">521</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>resolveDataLink(MoneyWiseBasicResource.CATEGORY_NAME, myEditSet.getDataList(MoneyWiseStaticDataType.PAYEETYPE, MoneyWisePayeeTypeList.class));
        }

        /* Resolve links in infoSet */
        theInfoSet.resolveEditSetLinks(myEditSet);
    }

    /**
     * Set a new WebSite.
     * @param pWebSite the new webSite
     * @throws OceanusException on error
     */
    public void setWebSite(final char[] pWebSite) throws OceanusException {
        setInfoSetValue(MoneyWiseAccountInfoClass.WEBSITE, pWebSite);
    }

    /**
     * Set a new CustNo.
     * @param pCustNo the new custNo
     * @throws OceanusException on error
     */
    public void setCustNo(final char[] pCustNo) throws OceanusException {
        setInfoSetValue(MoneyWiseAccountInfoClass.CUSTOMERNO, pCustNo);
    }

    /**
     * Set a new UserId.
     * @param pUserId the new userId
     * @throws OceanusException on error
     */
    public void setUserId(final char[] pUserId) throws OceanusException {
        setInfoSetValue(MoneyWiseAccountInfoClass.USERID, pUserId);
    }

    /**
     * Set a new Password.
     * @param pPassword the new password
     * @throws OceanusException on error
     */
    public void setPassword(final char[] pPassword) throws OceanusException {
        setInfoSetValue(MoneyWiseAccountInfoClass.PASSWORD, pPassword);
    }

    /**
     * Set a new SortCode.
     * @param pSortCode the new sort code
     * @throws OceanusException on error
     */
    public void setSortCode(final char[] pSortCode) throws OceanusException {
        setInfoSetValue(MoneyWiseAccountInfoClass.SORTCODE, pSortCode);
    }

    /**
     * Set a new Account.
     * @param pAccount the new account
     * @throws OceanusException on error
     */
    public void setAccount(final char[] pAccount) throws OceanusException {
        setInfoSetValue(MoneyWiseAccountInfoClass.ACCOUNT, pAccount);
    }

    /**
     * Set a new Reference.
     * @param pReference the new reference
     * @throws OceanusException on error
     */
    public void setReference(final char[] pReference) throws OceanusException {
        setInfoSetValue(MoneyWiseAccountInfoClass.REFERENCE, pReference);
    }

    /**
     * Set a new Notes.
     * @param pNotes the new notes
     * @throws OceanusException on error
     */
    public void setNotes(final char[] pNotes) throws OceanusException {
        setInfoSetValue(MoneyWiseAccountInfoClass.NOTES, pNotes);
    }

    /**
     * Set an infoSet value.
     * @param pInfoClass the class of info to set
     * @param pValue the value to set
     * @throws OceanusException on error
     */
    private void setInfoSetValue(final MoneyWiseAccountInfoClass pInfoClass,
                                 final Object pValue) throws OceanusException {
        /* Reject if there is no infoSet */
        if (!hasInfoSet) {
            throw new MoneyWiseLogicException(ERROR_BADINFOSET);
        }

        /* Set the value */
        theInfoSet.setValue(pInfoClass, pValue);
    }

    @Override
    public void touchUnderlyingItems() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXCashAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXCashAnalysisSelect.html#L124">124</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseCashAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseCashAnalysisSelect.html#L124">124</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theCashButton = myButtons.newScrollButton(MoneyWiseXAnalysisCashBucket.class);

        /* Create the category button */
        theCatButton = myButtons.newScrollButton(MoneyWiseCashCategory.class);

        /* Create Event Manager */
        theEventManager = new OceanusEventManager&lt;&gt;();

        /* Create the labels */
        final TethysUIControlFactory myControls = pFactory.controlFactory();
        final TethysUILabel myCatLabel = myControls.newLabel(NLS_CATEGORY + TethysUIConstant.STR_COLON);
        final TethysUILabel myCshLabel = myControls.newLabel(NLS_CASH + TethysUIConstant.STR_COLON);

        /* Define the layout */
        thePanel = pFactory.paneFactory().newHBoxPane();
        thePanel.addSpacer();
        thePanel.addNode(myCatLabel);
        thePanel.addNode(theCatButton);
        thePanel.addStrut();
        thePanel.addNode(myCshLabel);
        thePanel.addNode(theCashButton);

        /* Create initial state */
        theState = new MoneyWiseCashState();
        theState.applyState();

        /* Access the menus */
        theCategoryMenu = theCatButton.getMenu();
        theCashMenu = theCashButton.getMenu();

        /* Create the listeners */
        OceanusEventRegistrar&lt;TethysUIEvent&gt; myRegistrar = theCatButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewCategory());
        theCatButton.setMenuConfigurator(e -&gt; buildCategoryMenu());
        myRegistrar = theCashButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewCash());
        theCashButton.setMenuConfigurator(e -&gt; buildCashMenu());
    }

    @Override
    public TethysUIComponent getUnderlying() {
        return thePanel;
    }

    @Override
    public OceanusEventRegistrar&lt;PrometheusDataEvent&gt; getEventRegistrar() {
        return theEventManager.getEventRegistrar();
    }

    @Override
    public MoneyWiseXAnalysisCashFilter getFilter() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXDepositAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXDepositAnalysisSelect.html#L124">124</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseDepositAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseDepositAnalysisSelect.html#L124">124</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theDepositButton = myButtons.newScrollButton(MoneyWiseXAnalysisDepositBucket.class);

        /* Create the category button */
        theCatButton = myButtons.newScrollButton(MoneyWiseDepositCategory.class);

        /* Create Event Manager */
        theEventManager = new OceanusEventManager&lt;&gt;();

        /* Create the labels */
        final TethysUIControlFactory myControls = pFactory.controlFactory();
        final TethysUILabel myCatLabel = myControls.newLabel(NLS_CATEGORY + TethysUIConstant.STR_COLON);
        final TethysUILabel myDepLabel = myControls.newLabel(NLS_DEPOSIT + TethysUIConstant.STR_COLON);

        /* Define the layout */
        thePanel = pFactory.paneFactory().newHBoxPane();
        thePanel.addSpacer();
        thePanel.addNode(myCatLabel);
        thePanel.addNode(theCatButton);
        thePanel.addStrut();
        thePanel.addNode(myDepLabel);
        thePanel.addNode(theDepositButton);

        /* Create initial state */
        theState = new MoneyWiseDepositState();
        theState.applyState();

        /* Access the menus */
        theCategoryMenu = theCatButton.getMenu();
        theDepositMenu = theDepositButton.getMenu();

        /* Create the listeners */
        OceanusEventRegistrar&lt;TethysUIEvent&gt; myRegistrar = theCatButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewCategory());
        theCatButton.setMenuConfigurator(e -&gt; buildCategoryMenu());
        myRegistrar = theDepositButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewDeposit());
        theDepositButton.setMenuConfigurator(e -&gt; buildDepositMenu());
    }

    @Override
    public TethysUIComponent getUnderlying() {
        return thePanel;
    }

    @Override
    public OceanusEventRegistrar&lt;PrometheusDataEvent&gt; getEventRegistrar() {
        return theEventManager.getEventRegistrar();
    }

    @Override
    public MoneyWiseXAnalysisDepositFilter getFilter() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXLoanAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXLoanAnalysisSelect.html#L124">124</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseLoanAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseLoanAnalysisSelect.html#L124">124</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theLoanButton = myButtons.newScrollButton(MoneyWiseXAnalysisLoanBucket.class);

        /* Create the category button */
        theCatButton = myButtons.newScrollButton(MoneyWiseLoanCategory.class);

        /* Create Event Manager */
        theEventManager = new OceanusEventManager&lt;&gt;();

        /* Create the labels */
        final TethysUIControlFactory myControls = pFactory.controlFactory();
        final TethysUILabel myCatLabel = myControls.newLabel(NLS_CATEGORY + TethysUIConstant.STR_COLON);
        final TethysUILabel myLoanLabel = myControls.newLabel(NLS_LOAN + TethysUIConstant.STR_COLON);

        /* Define the layout */
        thePanel = pFactory.paneFactory().newHBoxPane();
        thePanel.addSpacer();
        thePanel.addNode(myCatLabel);
        thePanel.addNode(theCatButton);
        thePanel.addStrut();
        thePanel.addNode(myLoanLabel);
        thePanel.addNode(theLoanButton);

        /* Create initial state */
        theState = new MoneyWiseLoanState();
        theState.applyState();

        /* Access the menus */
        theCategoryMenu = theCatButton.getMenu();
        theLoanMenu = theLoanButton.getMenu();

        /* Create the listener */
        OceanusEventRegistrar&lt;TethysUIEvent&gt; myRegistrar = theCatButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewCategory());
        theCatButton.setMenuConfigurator(e -&gt; buildCategoryMenu());
        myRegistrar = theLoanButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewLoan());
        theLoanButton.setMenuConfigurator(e -&gt; buildLoanMenu());
    }

    @Override
    public TethysUIComponent getUnderlying() {
        return thePanel;
    }

    @Override
    public OceanusEventRegistrar&lt;PrometheusDataEvent&gt; getEventRegistrar() {
        return theEventManager.getEventRegistrar();
    }

    @Override
    public MoneyWiseXAnalysisLoanFilter getFilter() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXReportSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXReportSelect.html#L141">141</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseReportSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseReportSelect.html#L141">141</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theState.setType(MoneyWiseXReportType.getDefault());

        /* Create Event Manager */
        theEventManager = new OceanusEventManager&lt;&gt;();

        /* Create the selection panel */
        thePanel = pFactory.paneFactory().newHBoxPane();
        thePanel.setBorderTitle(NLS_TITLE);

        /* Define the layout */
        thePanel.addNode(myRepLabel);
        thePanel.addNode(theReportButton);
        thePanel.addSpacer();
        thePanel.addNode(theHoldingButton);
        thePanel.addSpacer();
        thePanel.addNode(theRangeSelect);
        thePanel.addSpacer();
        thePanel.addNode(thePrintButton);
        thePanel.addNode(theSaveButton);

        /* Add the listeners */
        theReportButton.getEventRegistrar().addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewReport());
        theReportButton.setMenuConfigurator(e -&gt; buildReportMenu());
        theHoldingButton.getEventRegistrar().addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewSecurity());
        theHoldingButton.setMenuConfigurator(e -&gt; buildHoldingMenu());
        thePrintButton.getEventRegistrar().addEventListener(e -&gt; theEventManager.fireEvent(PrometheusDataEvent.PRINT));
        theSaveButton.getEventRegistrar().addEventListener(e -&gt; theEventManager.fireEvent(PrometheusDataEvent.SAVETOFILE));
        theRangeSelect.getEventRegistrar().addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewRange());
    }

    @Override
    public TethysUIComponent getUnderlying() {
        return thePanel;
    }

    @Override
    public OceanusEventRegistrar&lt;PrometheusDataEvent&gt; getEventRegistrar() {
        return theEventManager.getEventRegistrar();
    }

    /**
     * Obtain the report type.
     * @return the report type
     */
    public MoneyWiseXReportType getReportType() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXAnalysisSelect.html#L386">386</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseAnalysisSelect.html#L384">384</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theAnalysisMgr.getEventRegistrar().addEventListener(e -&gt; refreshData());

        /* Handle buttons */
        theRangeButton.getEventRegistrar().addEventListener(e -&gt; setRangeVisibility(!isRangeVisible));
        theFilterButton.getEventRegistrar().addEventListener(e -&gt; setFilterVisibility(!isFilterVisible));
        theRangeSelect.getEventRegistrar().addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewRange());

        /* handle sub-selections */
        theDepositSelect.getEventRegistrar().addEventListener(e -&gt; buildDepositFilter());
        theCashSelect.getEventRegistrar().addEventListener(e -&gt; buildCashFilter());
        theLoanSelect.getEventRegistrar().addEventListener(e -&gt; buildLoanFilter());
        theSecuritySelect.getEventRegistrar().addEventListener(e -&gt; buildSecurityFilter());
        thePortfolioSelect.getEventRegistrar().addEventListener(e -&gt; buildPortfolioFilter());
        thePayeeSelect.getEventRegistrar().addEventListener(e -&gt; buildPayeeFilter());
        theCategorySelect.getEventRegistrar().addEventListener(e -&gt; buildCategoryFilter());
        theTaxBasisSelect.getEventRegistrar().addEventListener(e -&gt; buildTaxBasisFilter());
        theTagSelect.getEventRegistrar().addEventListener(e -&gt; buildTagFilter());
    }

    @Override
    public TethysUIComponent getUnderlying() {
        return thePanel;
    }

    @Override
    public OceanusEventRegistrar&lt;PrometheusDataEvent&gt; getEventRegistrar() {
        return theEventManager.getEventRegistrar();
    }

    /**
     * Obtain the DateDayRange.
     * @return the range.
     */
    public OceanusDateRange getRange() {
        return theState.getRange();
    }

    /**
     * Obtain the analysis.
     * @return the range.
     */
    public MoneyWiseXAnalysis getAnalysis() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXAnalysisSelect.html#L812">812</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseAnalysisSelect.html#L812">812</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>if (!myAttr.isPreserved()
                    &amp;&amp; myFilter.isRelevantCounter(myAttr)) {
                /* Create a new MenuItem and add it to the popUp */
                theBucketMenu.addItem(myAttr);
            }
        }

        /* Add the entry for null bucket */
        theBucketMenu.addNullItem(NLS_NONE);
    }

    /**
     * Build Columns menu.
     */
    private void buildColumnsMenu() {
        /* Reset the popUp menu */
        theColumnMenu.removeAllItems();

        /* Determine whether we have balances */
        final boolean hasBalances = theState.getType().hasBalances();

        /* Loop through the sets */
        for (MoneyWiseAnalysisColumnSet mySet : MoneyWiseAnalysisColumnSet.values()) {
            /* if we have balances or this is not the balance set */
            if (hasBalances
                    || !mySet.isBalance()) {
                /* Add the item */
                theColumnMenu.addItem(mySet);
            }
        }
    }

    /**
     * Build Deposit Filter.
     */
    private void buildDepositFilter() {
        applyFilter(theDepositSelect.getFilter());
    }

    /**
     * Build Cash Filter.
     */
    private void buildCashFilter() {
        applyFilter(theCashSelect.getFilter());
    }

    /**
     * Build Loan Filter.
     */
    private void buildLoanFilter() {
        applyFilter(theLoanSelect.getFilter());
    }

    /**
     * Build Security Filter.
     */
    private void buildSecurityFilter() {
        applyFilter(theSecuritySelect.getFilter());
    }

    /**
     * Build Portfolio Filter.
     */
    private void buildPortfolioFilter() {
        applyFilter(thePortfolioSelect.getFilter());
    }

    /**
     * Build Payee Filter.
     */
    private void buildPayeeFilter() {
        applyFilter(thePayeeSelect.getFilter());
    }

    /**
     * Build Category Filter.
     */
    private void buildCategoryFilter() {
        applyFilter(theCategorySelect.getFilter());
    }

    /**
     * Build TaxBasis Filter.
     */
    private void buildTaxBasisFilter() {
        applyFilter(theTaxBasisSelect.getFilter());
    }

    /**
     * Build Tag Filter.
     */
    private void buildTagFilter() {
        applyFilter(theTagSelect.getFilter());
    }

    /**
     * Apply Filter.
     * @param pFilter the filter
     */
    private void applyFilter(final MoneyWiseXAnalysisFilter&lt;?, ?&gt; pFilter) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\data\analysis\base\MoneyWiseXAnalysisValues.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/data/analysis/base/MoneyWiseXAnalysisValues.html#L110">110</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\data\analysis\base\MoneyWiseAnalysisValues.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/data/analysis/base/MoneyWiseAnalysisValues.html#L116">116</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public void adjustToBaseValues(final T pBaseValues) {
    }

    /**
     * Obtain delta value.
     * @param pPrevious the previous values.
     * @param pAttr the attribute
     * @return the delta
     */
    protected OceanusDecimal getDeltaValue(final T pPrevious,
                                           final E pAttr) {
        switch (pAttr.getDataType()) {
            case MONEY:
                return getDeltaMoneyValue(pPrevious, pAttr);
            case UNITS:
                return getDeltaUnitsValue(pPrevious, pAttr);
            default:
                return null;
        }
    }

    /**
     * Obtain delta money value.
     * @param pPrevious the previous values.
     * @param pAttr the attribute
     * @return the delta
     */
    protected OceanusMoney getDeltaMoneyValue(final T pPrevious,
                                              final E pAttr) {
        /* Access current and previous values */
        OceanusMoney myCurr = getMoneyValue(pAttr);
        if (pPrevious != null) {
            final OceanusMoney myPrev = pPrevious.getMoneyValue(pAttr);

            /* Calculate delta */
            myCurr = new OceanusMoney(myCurr);
            myCurr.subtractAmount(myPrev);
        }
        return myCurr;
    }

    /**
     * Obtain delta units value.
     * @param pPrevious the previous values.
     * @param pAttr the attribute
     * @return the delta
     */
    protected OceanusUnits getDeltaUnitsValue(final T pPrevious,
                                              final E pAttr) {
        /* Access current and previous values */
        OceanusUnits myCurr = getUnitsValue(pAttr);
        if (pPrevious != null) {
            final OceanusUnits myPrev = pPrevious.getUnitsValue(pAttr);

            /* Calculate delta */
            myCurr = new OceanusUnits(myCurr);
            myCurr.subtractUnits(myPrev);
        }
        return myCurr;
    }

    /**
     * Adjust money value relative to base.
     * @param pBase the base values.
     * @param pAttr the attribute to reBase.
     */
    protected void adjustMoneyToBase(final T pBase,
                                     final E pAttr) {
        /* Adjust spend values */
        OceanusMoney myValue = getMoneyValue(pAttr);
        myValue = new OceanusMoney(myValue);
        final OceanusMoney myBaseValue = pBase.getMoneyValue(pAttr);
        myValue.subtractAmount(myBaseValue);
        theMap.put(pAttr, myValue);
    }</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\data\analysis\buckets\MoneyWiseXAnalysisAccountBucket.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/data/analysis/buckets/MoneyWiseXAnalysisAccountBucket.html#L663">663</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\data\analysis\data\MoneyWiseAnalysisAccountBucket.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/data/analysis/data/MoneyWiseAnalysisAccountBucket.html#L818">818</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>if (myBucket.isActive() || !myBucket.isIdle()) {
                    /* Add to the list */
                    theList.add(myBucket);
                }
            }
        }

        /**
         * Obtain item by id.
         * @param pId the id to lookup
         * @return the item (or null if not present)
         */
        public B findItemById(final Integer pId) {
            /* Return results */
            return theList.getItemById(pId);
        }

        /**
         * Construct a ranged bucket.
         * @param pBase the base bucket
         * @param pRange the Range
         * @return the new bucket
         */
        protected abstract B newBucket(B pBase,
                                       OceanusDateRange pRange);

        /**
         * Obtain the AccountBucket for a given account.
         * @param pAccount the account
         * @return the bucket
         */
        public B getBucket(final T pAccount) {
            /* Locate the bucket in the list */
            B myItem = findItemById(pAccount.getIndexedId());

            /* If the item does not yet exist */
            if (myItem == null) {
                /* Create the new bucket */
                myItem = newBucket(pAccount);

                /* Add to the list */
                theList.add(myItem);
            }

            /* Return the bucket */
            return myItem;
        }

        /**
         * Construct a standard bucket.
         * @param pAccount the Account
         * @return the new bucket
         */
        protected abstract B newBucket(T pAccount);

        /**
         * SortBuckets.
         */
        protected void sortBuckets() {
            theList.sortList();
        }

        /**
         * Mark active accounts.
         * @throws OceanusException on error
         */
        public void markActiveAccounts() throws OceanusException {
            /* Loop through the buckets */
            final Iterator&lt;B&gt; myIterator = iterator();
            while (myIterator.hasNext()) {
                final B myCurr = myIterator.next();
                final T myAccount = myCurr.getAccount();

                /* If we are active */
                if (myCurr.isActive()) {
                    /* Set the account as relevant */
                    myAccount.setRelevant();
                }

                /* If we are closed */
                if (Boolean.TRUE.equals(myAccount.isClosed())) {
                    /* Ensure that we have correct closed/maturity dates */
                    myAccount.adjustClosed();

                    /* If we are Relevant */
                    if (myAccount.isRelevant()
                            &amp;&amp; theAnalysis.getData().checkClosedAccounts()) {
                        /* throw exception */
                        throw new MoneyWiseDataException(myCurr, &quot;Illegally closed account&quot;);
                    }
                }
            }
        }
    }
}</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXSecurityAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXSecurityAnalysisSelect.html#L116">116</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseSecurityAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseSecurityAnalysisSelect.html#L116">116</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>thePortButton = myButtons.newScrollButton(MoneyWiseXAnalysisPortfolioBucket.class);

        /* Create Event Manager */
        theEventManager = new OceanusEventManager&lt;&gt;();

        /* Create the labels */
        final TethysUIControlFactory myControls = pFactory.controlFactory();
        final TethysUILabel myPortLabel = myControls.newLabel(NLS_PORTFOLIO + TethysUIConstant.STR_COLON);
        final TethysUILabel mySecLabel = myControls.newLabel(NLS_SECURITY + TethysUIConstant.STR_COLON);

        /* Define the layout */
        thePanel = pFactory.paneFactory().newHBoxPane();
        thePanel.addSpacer();
        thePanel.addNode(myPortLabel);
        thePanel.addNode(thePortButton);
        thePanel.addStrut();
        thePanel.addNode(mySecLabel);
        thePanel.addNode(theSecButton);

        /* Create initial state */
        theState = new MoneyWiseSecurityState();
        theState.applyState();

        /* Access the menus */
        thePortfolioMenu = thePortButton.getMenu();
        theSecurityMenu = theSecButton.getMenu();

        /* Create the listener */
        OceanusEventRegistrar&lt;TethysUIEvent&gt; myRegistrar = thePortButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewPortfolio());
        thePortButton.setMenuConfigurator(e -&gt; buildPortfolioMenu());
        myRegistrar = theSecButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewSecurity());
        theSecButton.setMenuConfigurator(e -&gt; buildSecurityMenu());
    }

    @Override
    public TethysUIComponent getUnderlying() {
        return thePanel;
    }

    @Override
    public OceanusEventRegistrar&lt;PrometheusDataEvent&gt; getEventRegistrar() {
        return theEventManager.getEventRegistrar();
    }

    @Override
    public MoneyWiseXAnalysisSecurityFilter getFilter() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXTaxBasisAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXTaxBasisAnalysisSelect.html#L120">120</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseTaxBasisAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseTaxBasisAnalysisSelect.html#L120">120</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theAccountButton = myButtons.newScrollButton(MoneyWiseXAnalysisTaxBasisAccountBucket.class);

        /* Create Event Manager */
        theEventManager = new OceanusEventManager&lt;&gt;();

        /* Create the labels */
        final TethysUIControlFactory myControls = pFactory.controlFactory();
        final TethysUILabel myBasisLabel = myControls.newLabel(NLS_BASIS + TethysUIConstant.STR_COLON);
        final TethysUILabel myAccountLabel = myControls.newLabel(NLS_ACCOUNT + TethysUIConstant.STR_COLON);

        /* Define the layout */
        thePanel = pFactory.paneFactory().newHBoxPane();
        thePanel.addSpacer();
        thePanel.addNode(myBasisLabel);
        thePanel.addNode(theBasisButton);
        thePanel.addStrut();
        thePanel.addNode(myAccountLabel);
        thePanel.addNode(theAccountButton);

        /* Create initial state */
        theState = new MoneyWiseTaxBasisState();
        theState.applyState();

        /* Access the menus */
        theTaxMenu = theBasisButton.getMenu();
        theAccountMenu = theAccountButton.getMenu();

        /* Create the listener */
        OceanusEventRegistrar&lt;TethysUIEvent&gt; myRegistrar = theBasisButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewBasis());
        theBasisButton.setMenuConfigurator(e -&gt; buildBasisMenu());
        myRegistrar = theAccountButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewAccount());
        theAccountButton.setMenuConfigurator(e -&gt; buildAccountMenu());
    }

    @Override
    public TethysUIComponent getUnderlying() {
        return thePanel;
    }

    @Override
    public OceanusEventRegistrar&lt;PrometheusDataEvent&gt; getEventRegistrar() {
        return theEventManager.getEventRegistrar();
    }

    @Override
    public MoneyWiseXAnalysisTaxBasisFilter getFilter() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\panel\MoneyWiseXEventTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/panel/MoneyWiseXEventTable.html#L1111">1111</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\panel\MoneyWiseTransactionTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/panel/MoneyWiseTransactionTable.html#L1117">1117</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theTable = new MoneyWiseXEventTable(pView, theEditSet, pAnalysisMgr, theError, myViewerFilter, theViewerAnalysis);

            /* Create the action buttons */
            final TethysUIFactory&lt;?&gt; myGuiFactory = pView.getGuiFactory();

            /* Create the header panel */
            final TethysUIPaneFactory myPanes = myGuiFactory.paneFactory();
            final TethysUIBorderPaneManager myHeader = myPanes.newBorderPane();
            myHeader.setCentre(theTable.getSelect());
            myHeader.setNorth(theError);
            myHeader.setEast(theTable.getActionButtons());

            /* Create the panel */
            thePanel = myPanes.newBorderPane();
            thePanel.setNorth(myHeader);
            thePanel.setCentre(theTable);

            /* Add listeners */
            theError.getEventRegistrar().addEventListener(e -&gt; handleErrorPane());
            theTable.getActionButtons().getEventRegistrar().addEventListener(this::handleActionButtons);
            theTable.getEventRegistrar().addEventListener(PrometheusDataEvent.ADJUSTVISIBILITY, e -&gt; notifyChanges());
            theTable.getEventRegistrar().addEventListener(PrometheusDataEvent.GOTOWINDOW, theEventManager::cascadeEvent);
        }

        @Override
        public TethysUIComponent getUnderlying() {
            return thePanel;
        }

        @Override
        public void setEnabled(final boolean pEnabled) {
            thePanel.setEnabled(pEnabled);
        }

        @Override
        public void setVisible(final boolean pVisible) {
            thePanel.setVisible(pVisible);
        }

        @Override
        public OceanusEventRegistrar&lt;PrometheusDataEvent&gt; getEventRegistrar() {
            return theEventManager.getEventRegistrar();
        }

        /**
         * Select Statement.
         * @param pSelect the selection
         */
        public void selectStatement(final MoneyWiseXStatementSelect pSelect) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseCash.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseCash.html#L295">295</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseDeposit.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseDeposit.html#L324">324</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseLoan.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseLoan.html#L296">296</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWisePayee.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWisePayee.html#L317">317</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWisePortfolio.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWisePortfolio.html#L342">342</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseSecurity.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseSecurity.html#L306">306</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>return (MoneyWiseCashList) super.getList();
    }

    @Override
    public MetisDataState getState() {
        /* Pop history for self */
        MetisDataState myState = super.getState();

        /* If we should use the InfoSet */
        if ((myState == MetisDataState.CLEAN) &amp;&amp; useInfoSet) {
            /* Get state for infoSet */
            myState = theInfoSet.getState();
        }

        /* Return the state */
        return myState;
    }

    @Override
    public MetisDataEditState getEditState() {
        /* Pop history for self */
        MetisDataEditState myState = super.getEditState();

        /* If we should use the InfoSet */
        if (myState == MetisDataEditState.CLEAN
                &amp;&amp; useInfoSet) {
            /* Get state for infoSet */
            myState = theInfoSet.getEditState();
        }

        /* Return the state */
        return myState;
    }

    @Override
    public boolean hasHistory() {
        /* Check for history for self */
        boolean hasHistory = super.hasHistory();

        /* If we should use the InfoSet */
        if (!hasHistory &amp;&amp; useInfoSet) {
            /* Check history for infoSet */
            hasHistory = theInfoSet.hasHistory();
        }

        /* Return details */
        return hasHistory;
    }

    @Override
    public void pushHistory() {
        /* Push history for self */
        super.pushHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Push history for infoSet */
            theInfoSet.pushHistory();
        }
    }

    @Override
    public void popHistory() {
        /* Pop history for self */
        super.popHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Pop history for infoSet */
            theInfoSet.popHistory();
        }
    }

    @Override
    public boolean checkForHistory() {
        /* Check for history for self */
        boolean bChanges = super.checkForHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Check for history for infoSet */
            bChanges |= theInfoSet.checkForHistory();
        }

        /* return result */
        return bChanges;
    }

    @Override
    public MetisDataDifference fieldChanged(final MetisDataFieldId pField) {
        /* Handle InfoSet fields */
        final MoneyWiseAccountInfoClass myClass = MoneyWiseCashInfoSet.getClassForField(pField);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXReportSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXReportSelect.html#L332">332</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseReportSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseReportSelect.html#L332">332</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theState.setType(MoneyWiseXReportType.CAPITALGAINS);

        /* Notify that the state has changed */
        theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
    }

    /**
     * Create SavePoint.
     */
    public void createSavePoint() {
        /* Create the savePoint */
        theSavePoint = new MoneyWiseReportState(theState);
    }

    /**
     * Restore SavePoint.
     */
    public void restoreSavePoint() {
        /* Restore the savePoint */
        theState = new MoneyWiseReportState(theSavePoint);

        /* Apply the state */
        theState.applyState();
    }

    @Override
    public void setEnabled(final boolean bEnable) {
        theRangeSelect.setEnabled(bEnable);
        theReportButton.setEnabled(bEnable);
        theHoldingButton.setEnabled(bEnable);
        thePrintButton.setEnabled(bEnable);
        theSaveButton.setEnabled(bEnable);
    }

    @Override
    public void setVisible(final boolean pVisible) {
        thePanel.setVisible(pVisible);
    }

    /**
     * Handle new report.
     */
    private void handleNewReport() {
        /* Set active flag */
        isActive = true;

        /* Look for a changed report type */
        if (theState.setType(theReportButton.getValue())) {
            /* Notify that the state has changed */
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }

        /* Clear active flag */
        isActive = false;
    }

    /**
     * Handle new holding.
     */
    private void handleNewSecurity() {
        /* Set active flag */
        isActive = true;

        /* Look for a changed report type */
        if (theState.setSecurity(theHoldingButton.getValue())) {
            /* Notify that the state has changed */
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }

        /* Clear active flag */
        isActive = false;
    }

    /**
     * Handle new range.
     */
    private void handleNewRange() {
        /* if we have a changed range and are not changing report */
        if (theState.setRange(theRangeSelect)
                &amp;&amp; !isActive) {
            /* Notify that the state has changed */
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }
    }

    /**
     * SavePoint values.
     */
    private final class MoneyWiseReportState {
        /**
         * The analysis.
         */
        private MoneyWiseXAnalysis theAnalysis;</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportAssetGains.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportAssetGains.html#L139">139</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportPortfolioView.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportPortfolioView.html#L168">168</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisSecurityAttr.REALISEDGAINS));

        /* Return the document */
        return theBuilder.getDocument();
    }

    @Override
    public MetisHTMLTable createDelayedTable(final DelayedTable pTable) {
        /* Access the source */
        final Object mySource = pTable.getSource();
        if (mySource instanceof MoneyWiseXAnalysisPortfolioBucket mySourceBucket) {
            return createDelayedPortfolio(pTable.getParent(), mySourceBucket);
        }

        /* Return the null table */
        return null;
    }

    /**
     * Create a delayed portfolio table.
     * @param pParent the parent table
     * @param pSource the source bucket
     * @return the new document fragment
     */
    private MetisHTMLTable createDelayedPortfolio(final MetisHTMLTable pParent,
                                                  final MoneyWiseXAnalysisPortfolioBucket pSource) {
        /* Access the securities and portfolio */
        final MoneyWiseXAnalysisSecurityBucketList mySecurities = pSource.getSecurities();

        /* Create a new table */
        final MetisHTMLTable myTable = theBuilder.createEmbeddedTable(pParent);

        /* Loop through the Security Buckets */
        final Iterator&lt;MoneyWiseXAnalysisSecurityBucket&gt; myIterator = mySecurities.iterator();
        while (myIterator.hasNext()) {
            final MoneyWiseXAnalysisSecurityBucket myBucket = myIterator.next();

            /* Access bucket name */
            final String myName = myBucket.getSecurityName();
            String myFullName = myBucket.getDecoratedName();
            myFullName = myFullName.replace(':', '-');

            /* Access values */
            final MoneyWiseXAnalysisSecurityValues myValues = myBucket.getValues();

            /* Create the detail row */
            theBuilder.startRow(myTable);
            theBuilder.makeFilterLinkCell(myTable, myFullName, myName);
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisSecurityAttr.VALUATION));
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisSecurityAttr.RESIDUALCOST));
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisSecurityAttr.REALISEDGAINS));</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportAssetGains.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportAssetGains.html#L139">139</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportPortfolioView.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportPortfolioView.html#L168">168</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisSecurityAttr.REALISEDGAINS));

        /* Return the document */
        return theBuilder.getDocument();
    }

    @Override
    public MetisHTMLTable createDelayedTable(final DelayedTable pTable) {
        /* Access the source */
        final Object mySource = pTable.getSource();
        if (mySource instanceof MoneyWiseAnalysisPortfolioBucket mySourceBucket) {
            return createDelayedPortfolio(pTable.getParent(), mySourceBucket);
        }

        /* Return the null table */
        return null;
    }

    /**
     * Create a delayed portfolio table.
     * @param pParent the parent table
     * @param pSource the source bucket
     * @return the new document fragment
     */
    private MetisHTMLTable createDelayedPortfolio(final MetisHTMLTable pParent,
                                                  final MoneyWiseAnalysisPortfolioBucket pSource) {
        /* Access the securities and portfolio */
        final MoneyWiseAnalysisSecurityBucketList mySecurities = pSource.getSecurities();

        /* Create a new table */
        final MetisHTMLTable myTable = theBuilder.createEmbeddedTable(pParent);

        /* Loop through the Security Buckets */
        final Iterator&lt;MoneyWiseAnalysisSecurityBucket&gt; myIterator = mySecurities.iterator();
        while (myIterator.hasNext()) {
            final MoneyWiseAnalysisSecurityBucket myBucket = myIterator.next();

            /* Access bucket name */
            final String myName = myBucket.getSecurityName();
            String myFullName = myBucket.getDecoratedName();
            myFullName = myFullName.replace(':', '-');

            /* Access values */
            final MoneyWiseAnalysisSecurityValues myValues = myBucket.getValues();

            /* Create the detail row */
            theBuilder.startRow(myTable);
            theBuilder.makeFilterLinkCell(myTable, myFullName, myName);
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisSecurityAttr.VALUATION));
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisSecurityAttr.RESIDUALCOST));
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisSecurityAttr.REALISEDGAINS));</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\panel\MoneyWiseXEventTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/panel/MoneyWiseXEventTable.html#L381">381</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\panel\MoneyWiseTransactionTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/panel/MoneyWiseTransactionTable.html#L386">386</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>.setCellValueFactory(MoneyWiseXEventTable::getFilteredAction)
                .setName(MoneyWiseUIResource.STATICDATA_ACTIVE.getValue())
                .setEditable(true)
                .setCellEditable(r -&gt; !r.isHeader() &amp;&amp; !r.isReconciled())
                .setColumnWidth(WIDTH_ICON)
                .setOnCommit((r, v) -&gt; updateField(this::deleteRow, r, v));

        /* Add listeners */
        pView.getEventRegistrar().addEventListener(e -&gt; refreshData());
        theActionButtons.getEventRegistrar().addEventListener(this::handleActionButtons);
        theNewButton.getEventRegistrar().addEventListener(e -&gt; addNewItem());
        theError.getEventRegistrar().addEventListener(e -&gt; handleErrorPane());
        theSelect.getEventRegistrar().addEventListener(PrometheusDataEvent.SELECTIONCHANGED, e -&gt; handleFilterSelection());
        theSelect.getEventRegistrar().addEventListener(PrometheusDataEvent.SAVETOFILE, e -&gt; writeCSVToFile(pView.getGuiFactory()));
        theActiveTran.getEventRegistrar().addEventListener(PrometheusDataEvent.ADJUSTVISIBILITY, e -&gt; handlePanelState());

        /* Hide the action buttons initially */
        theActionButtons.setVisible(false);
        theFilter = theSelect.getFilter();

        /* Initialise the columns */
        adjustColumns(theSelect.showColumns()
                ? theSelect.getColumns()
                : MoneyWiseAnalysisColumnSet.BALANCE);
    }</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseCash.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseCash.html#L296">296</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseTransaction.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseTransaction.html#L443">443</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>}

    @Override
    public MetisDataState getState() {
        /* Pop history for self */
        MetisDataState myState = super.getState();

        /* If we should use the InfoSet */
        if ((myState == MetisDataState.CLEAN) &amp;&amp; useInfoSet) {
            /* Get state for infoSet */
            myState = theInfoSet.getState();
        }

        /* Return the state */
        return myState;
    }

    @Override
    public MetisDataEditState getEditState() {
        /* Pop history for self */
        MetisDataEditState myState = super.getEditState();

        /* If we should use the InfoSet */
        if (myState == MetisDataEditState.CLEAN
                &amp;&amp; useInfoSet) {
            /* Get state for infoSet */
            myState = theInfoSet.getEditState();
        }

        /* Return the state */
        return myState;
    }

    @Override
    public boolean hasHistory() {
        /* Check for history for self */
        boolean hasHistory = super.hasHistory();

        /* If we should use the InfoSet */
        if (!hasHistory &amp;&amp; useInfoSet) {
            /* Check history for infoSet */
            hasHistory = theInfoSet.hasHistory();
        }

        /* Return details */
        return hasHistory;
    }

    @Override
    public void pushHistory() {
        /* Push history for self */
        super.pushHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Push history for infoSet */
            theInfoSet.pushHistory();
        }
    }

    @Override
    public void popHistory() {
        /* Pop history for self */
        super.popHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Pop history for infoSet */
            theInfoSet.popHistory();
        }
    }

    @Override
    public boolean checkForHistory() {
        /* Check for history for self */
        boolean bChanges = super.checkForHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Check for history for infoSet */
            bChanges |= theInfoSet.checkForHistory();
        }

        /* return result */
        return bChanges;
    }

    @Override
    public MetisDataDifference fieldChanged(final MetisDataFieldId pField) {
        /* Handle InfoSet fields */
        final MoneyWiseAccountInfoClass myClass = MoneyWiseCashInfoSet.getClassForField(pField);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseDeposit.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseDeposit.html#L325">325</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseTransaction.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseTransaction.html#L443">443</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>}

    @Override
    public MetisDataState getState() {
        /* Pop history for self */
        MetisDataState myState = super.getState();

        /* If we should use the InfoSet */
        if ((myState == MetisDataState.CLEAN) &amp;&amp; useInfoSet) {
            /* Get state for infoSet */
            myState = theInfoSet.getState();
        }

        /* Return the state */
        return myState;
    }

    @Override
    public MetisDataEditState getEditState() {
        /* Pop history for self */
        MetisDataEditState myState = super.getEditState();

        /* If we should use the InfoSet */
        if (myState == MetisDataEditState.CLEAN
                &amp;&amp; useInfoSet) {
            /* Get state for infoSet */
            myState = theInfoSet.getEditState();
        }

        /* Return the state */
        return myState;
    }

    @Override
    public boolean hasHistory() {
        /* Check for history for self */
        boolean hasHistory = super.hasHistory();

        /* If we should use the InfoSet */
        if (!hasHistory &amp;&amp; useInfoSet) {
            /* Check history for infoSet */
            hasHistory = theInfoSet.hasHistory();
        }

        /* Return details */
        return hasHistory;
    }

    @Override
    public void pushHistory() {
        /* Push history for self */
        super.pushHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Push history for infoSet */
            theInfoSet.pushHistory();
        }
    }

    @Override
    public void popHistory() {
        /* Pop history for self */
        super.popHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Pop history for infoSet */
            theInfoSet.popHistory();
        }
    }

    @Override
    public boolean checkForHistory() {
        /* Check for history for self */
        boolean bChanges = super.checkForHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Check for history for infoSet */
            bChanges |= theInfoSet.checkForHistory();
        }

        /* return result */
        return bChanges;
    }

    @Override
    public MetisDataDifference fieldChanged(final MetisDataFieldId pField) {
        /* Handle InfoSet fields */
        final MoneyWiseAccountInfoClass myClass = MoneyWiseDepositInfoSet.getClassForField(pField);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseLoan.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseLoan.html#L297">297</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseTransaction.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseTransaction.html#L443">443</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>}

    @Override
    public MetisDataState getState() {
        /* Pop history for self */
        MetisDataState myState = super.getState();

        /* If we should use the InfoSet */
        if ((myState == MetisDataState.CLEAN) &amp;&amp; useInfoSet) {
            /* Get state for infoSet */
            myState = theInfoSet.getState();
        }

        /* Return the state */
        return myState;
    }

    @Override
    public MetisDataEditState getEditState() {
        /* Pop history for self */
        MetisDataEditState myState = super.getEditState();

        /* If we should use the InfoSet */
        if (myState == MetisDataEditState.CLEAN
                &amp;&amp; useInfoSet) {
            /* Get state for infoSet */
            myState = theInfoSet.getEditState();
        }

        /* Return the state */
        return myState;
    }

    @Override
    public boolean hasHistory() {
        /* Check for history for self */
        boolean hasHistory = super.hasHistory();

        /* If we should use the InfoSet */
        if (!hasHistory &amp;&amp; useInfoSet) {
            /* Check history for infoSet */
            hasHistory = theInfoSet.hasHistory();
        }

        /* Return details */
        return hasHistory;
    }

    @Override
    public void pushHistory() {
        /* Push history for self */
        super.pushHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Push history for infoSet */
            theInfoSet.pushHistory();
        }
    }

    @Override
    public void popHistory() {
        /* Pop history for self */
        super.popHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Pop history for infoSet */
            theInfoSet.popHistory();
        }
    }

    @Override
    public boolean checkForHistory() {
        /* Check for history for self */
        boolean bChanges = super.checkForHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Check for history for infoSet */
            bChanges |= theInfoSet.checkForHistory();
        }

        /* return result */
        return bChanges;
    }

    @Override
    public MetisDataDifference fieldChanged(final MetisDataFieldId pField) {
        /* Handle InfoSet fields */
        final MoneyWiseAccountInfoClass myClass = MoneyWiseLoanInfoSet.getClassForField(pField);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWisePayee.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWisePayee.html#L318">318</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseTransaction.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseTransaction.html#L443">443</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>}

    @Override
    public MetisDataState getState() {
        /* Pop history for self */
        MetisDataState myState = super.getState();

        /* If we should use the InfoSet */
        if ((myState == MetisDataState.CLEAN) &amp;&amp; useInfoSet) {
            /* Get state for infoSet */
            myState = theInfoSet.getState();
        }

        /* Return the state */
        return myState;
    }

    @Override
    public MetisDataEditState getEditState() {
        /* Pop history for self */
        MetisDataEditState myState = super.getEditState();

        /* If we should use the InfoSet */
        if (myState == MetisDataEditState.CLEAN
                &amp;&amp; useInfoSet) {
            /* Get state for infoSet */
            myState = theInfoSet.getEditState();
        }

        /* Return the state */
        return myState;
    }

    @Override
    public boolean hasHistory() {
        /* Check for history for self */
        boolean hasHistory = super.hasHistory();

        /* If we should use the InfoSet */
        if (!hasHistory &amp;&amp; useInfoSet) {
            /* Check history for infoSet */
            hasHistory = theInfoSet.hasHistory();
        }

        /* Return details */
        return hasHistory;
    }

    @Override
    public void pushHistory() {
        /* Push history for self */
        super.pushHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Push history for infoSet */
            theInfoSet.pushHistory();
        }
    }

    @Override
    public void popHistory() {
        /* Pop history for self */
        super.popHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Pop history for infoSet */
            theInfoSet.popHistory();
        }
    }

    @Override
    public boolean checkForHistory() {
        /* Check for history for self */
        boolean bChanges = super.checkForHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Check for history for infoSet */
            bChanges |= theInfoSet.checkForHistory();
        }

        /* return result */
        return bChanges;
    }

    @Override
    public MetisDataDifference fieldChanged(final MetisDataFieldId pField) {
        /* Handle InfoSet fields */
        final MoneyWiseAccountInfoClass myClass = MoneyWisePayeeInfoSet.getClassForField(pField);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWisePortfolio.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWisePortfolio.html#L343">343</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseTransaction.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseTransaction.html#L443">443</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>}

    @Override
    public MetisDataState getState() {
        /* Pop history for self */
        MetisDataState myState = super.getState();

        /* If we should use the InfoSet */
        if ((myState == MetisDataState.CLEAN) &amp;&amp; useInfoSet) {
            /* Get state for infoSet */
            myState = theInfoSet.getState();
        }

        /* Return the state */
        return myState;
    }

    @Override
    public MetisDataEditState getEditState() {
        /* Pop history for self */
        MetisDataEditState myState = super.getEditState();

        /* If we should use the InfoSet */
        if (myState == MetisDataEditState.CLEAN
                &amp;&amp; useInfoSet) {
            /* Get state for infoSet */
            myState = theInfoSet.getEditState();
        }

        /* Return the state */
        return myState;
    }

    @Override
    public boolean hasHistory() {
        /* Check for history for self */
        boolean hasHistory = super.hasHistory();

        /* If we should use the InfoSet */
        if (!hasHistory &amp;&amp; useInfoSet) {
            /* Check history for infoSet */
            hasHistory = theInfoSet.hasHistory();
        }

        /* Return details */
        return hasHistory;
    }

    @Override
    public void pushHistory() {
        /* Push history for self */
        super.pushHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Push history for infoSet */
            theInfoSet.pushHistory();
        }
    }

    @Override
    public void popHistory() {
        /* Pop history for self */
        super.popHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Pop history for infoSet */
            theInfoSet.popHistory();
        }
    }

    @Override
    public boolean checkForHistory() {
        /* Check for history for self */
        boolean bChanges = super.checkForHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Check for history for infoSet */
            bChanges |= theInfoSet.checkForHistory();
        }

        /* return result */
        return bChanges;
    }

    @Override
    public MetisDataDifference fieldChanged(final MetisDataFieldId pField) {
        /* Handle InfoSet fields */
        final MoneyWiseAccountInfoClass myClass = MoneyWisePortfolioInfoSet.getClassForField(pField);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseSecurity.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseSecurity.html#L307">307</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseTransaction.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseTransaction.html#L443">443</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>}

    @Override
    public MetisDataState getState() {
        /* Pop history for self */
        MetisDataState myState = super.getState();

        /* If we should use the InfoSet */
        if ((myState == MetisDataState.CLEAN) &amp;&amp; useInfoSet) {
            /* Get state for infoSet */
            myState = theInfoSet.getState();
        }

        /* Return the state */
        return myState;
    }

    @Override
    public MetisDataEditState getEditState() {
        /* Pop history for self */
        MetisDataEditState myState = super.getEditState();

        /* If we should use the InfoSet */
        if (myState == MetisDataEditState.CLEAN
                &amp;&amp; useInfoSet) {
            /* Get state for infoSet */
            myState = theInfoSet.getEditState();
        }

        /* Return the state */
        return myState;
    }

    @Override
    public boolean hasHistory() {
        /* Check for history for self */
        boolean hasHistory = super.hasHistory();

        /* If we should use the InfoSet */
        if (!hasHistory &amp;&amp; useInfoSet) {
            /* Check history for infoSet */
            hasHistory = theInfoSet.hasHistory();
        }

        /* Return details */
        return hasHistory;
    }

    @Override
    public void pushHistory() {
        /* Push history for self */
        super.pushHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Push history for infoSet */
            theInfoSet.pushHistory();
        }
    }

    @Override
    public void popHistory() {
        /* Pop history for self */
        super.popHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Pop history for infoSet */
            theInfoSet.popHistory();
        }
    }

    @Override
    public boolean checkForHistory() {
        /* Check for history for self */
        boolean bChanges = super.checkForHistory();

        /* If we should use the InfoSet */
        if (useInfoSet) {
            /* Check for history for infoSet */
            bChanges |= theInfoSet.checkForHistory();
        }

        /* return result */
        return bChanges;
    }

    @Override
    public MetisDataDifference fieldChanged(final MetisDataFieldId pField) {
        /* Handle InfoSet fields */
        final MoneyWiseAccountInfoClass myClass = MoneyWiseSecurityInfoSet.getClassForField(pField);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\panel\MoneyWiseXEventTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/panel/MoneyWiseXEventTable.html#L918">918</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\panel\MoneyWiseTransactionTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/panel/MoneyWiseTransactionTable.html#L924">924</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>myTable.getColumn(MoneyWiseTransInfoClass.RETURNEDCASH).setVisible(true);
                break;
            case ALL:
            default:
                myTable.getColumn(MoneyWiseTransInfoClass.COMMENTS).setVisible(true);
                myTable.getColumn(MoneyWiseBasicResource.TRANSACTION_AMOUNT).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.TRANSTAG).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.REFERENCE).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.TAXCREDIT).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.EMPLOYERNATINS).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.EMPLOYEENATINS).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.DEEMEDBENEFIT).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.WITHHELD).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.ACCOUNTDELTAUNITS).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.PARTNERDELTAUNITS).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.PARTNERAMOUNT).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.DILUTION).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.RETURNEDCASHACCOUNT).setVisible(true);
                myTable.getColumn(MoneyWiseTransInfoClass.RETURNEDCASH).setVisible(true);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\dialog\MoneyWiseXTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/dialog/MoneyWiseXTransactionDialog.html#L203">203</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\dialog\MoneyWiseTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/dialog/MoneyWiseTransactionDialog.html#L198">198</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theFieldSet.addField(MoneyWiseBasicResource.TRANSACTION_RECONCILED, myReconciledButton, MoneyWiseXAnalysisEvent::isReconciled);

        /* Configure the menuBuilders */
        myDateButton.setDateConfigurator(this::handleDateConfig);
        myAccountButton.setMenuConfigurator(c -&gt; buildAccountMenu(c, getItem()));
        myCategoryButton.setMenuConfigurator(c -&gt; buildCategoryMenu(c, getItem()));
        myPartnerButton.setMenuConfigurator(c -&gt; buildPartnerMenu(c, getItem()));
        final Map&lt;Boolean, TethysUIIconMapSet&lt;Boolean&gt;&gt; myRecMapSets = MoneyWiseIcon.configureReconciledIconButton(pFactory);
        myReconciledButton.setIconMapSet(() -&gt; myRecMapSets.get(theReconciledState));
        final Map&lt;Boolean, TethysUIIconMapSet&lt;MoneyWiseAssetDirection&gt;&gt; myDirMapSets = MoneyWiseIcon.configureDirectionIconButton(pFactory);
        myDirectionButton.setIconMapSet(() -&gt; myDirMapSets.get(theDirectionState));
        myAmount.setDeemedCurrency(() -&gt; getItem().getAccount().getCurrency());
    }

    /**
     * Build info subPanel.
     * @param pFactory the GUI factory
     */
    private void buildInfoPanel(final TethysUIFactory&lt;?&gt; pFactory) {
        /* Create a new panel */
        theFieldSet.newPanel(TAB_INFO);

        /* Allocate fields */
        final TethysUIFieldFactory myFields = pFactory.fieldFactory();
        final TethysUIMoneyEditField myAmount = myFields.newMoneyField();
        final TethysUIStringEditField myComments = myFields.newStringField();
        final TethysUIStringEditField myReference = myFields.newStringField();

        /* Create the buttons */
        final TethysUIListButtonField&lt;MoneyWiseTransTag&gt; myTagButton = myFields.newListField();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\dialog\MoneyWiseXTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/dialog/MoneyWiseXTransactionDialog.html#L896">896</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\dialog\MoneyWiseTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/dialog/MoneyWiseTransactionDialog.html#L926">926</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseDataValidatorTrans&lt;?&gt; myValidator = pEvent.getTransaction().getList().getValidator();

        /* Loop through the available category values */
        final Iterator&lt;MoneyWiseTransCategory&gt; myIterator = myCategories.iterator();
        while (myIterator.hasNext()) {
            final MoneyWiseTransCategory myCategory = myIterator.next();

            /* Only process non-deleted low-level items */
            final MoneyWiseTransCategoryClass myClass = myCategory.getCategoryTypeClass();
            boolean bIgnore = myCategory.isDeleted() || myClass.canParentCategory();

            /* Check whether the category is allowable for the owner */
            bIgnore |= !myValidator.isValidCategory(myAccount, myCategory);
            if (bIgnore) {
                continue;
            }

            /* Determine parent */
            final MoneyWiseTransCategory myParent = myCategory.getParentCategory();

            /* If we have a parent */
            if (myParent != null) {
                final String myParentName = myParent.getName();
                final TethysUIScrollSubMenu&lt;MoneyWiseTransCategory&gt; myMenu = myMap.computeIfAbsent(myParentName, pMenu::addSubMenu);

                /* Create a new MenuItem and add it to the subMenu */
                myItem = myMenu.getSubMenu().addItem(myCategory, myCategory.getSubCategory());

            } else {
                /* Create a new MenuItem and add it to the popUp */
                myItem = pMenu.addItem(myCategory);
            }

            /* If this is the active category */
            if (myCategory.equals(myCurr)) {
                /* Record it */
                myActive = myItem;
            }
        }

        /* Ensure active item is visible */
        if (myActive != null) {
            myActive.scrollToItem();
        }
    }

    /**
     * Build the ReturnedAccount menu for an item.
     * @param pMenu the menu
     * @param pEvent the event to build for
     */
    public void buildReturnedAccountMenu(final TethysUIScrollMenu&lt;MoneyWiseTransAsset&gt; pMenu,
                                         final MoneyWiseXAnalysisEvent pEvent) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXAnalysisSelect.html#L646">646</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseAnalysisSelect.html#L646">646</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseXAnalysisFilter&lt;?, ?&gt; myFilter = myPanel.getFilter();
            myFilter.setCurrentAttribute(theState.getBucket());
            theState.setFilter(myFilter);
        }

        /* Notify updated filter */
        theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
    }

    /**
     * Create SavePoint.
     */
    protected void createSavePoint() {
        /* Create the savePoint */
        theSavePoint = new MoneyWiseAnalysisState(theState);
    }

    /**
     * Restore SavePoint.
     */
    protected void restoreSavePoint() {
        /* Restore the savePoint */
        theState = new MoneyWiseAnalysisState(theSavePoint);

        /* Apply the state */
        theState.applyState();
    }

    @Override
    public void setEnabled(final boolean bEnabled) {
        /* If there are filters available */
        if (isAvailable()) {
            /* Enabled disable range selection */
            theRangeButton.setEnabled(bEnabled);

            /* Enable filter detail */
            theFilterDetail.setVisible(true);
            theFilterButton.setEnabled(bEnabled);
            theColumnButton.setEnabled(bEnabled);
            theBucketButton.setEnabled(bEnabled);

            /* If we are disabling */
            if (!bEnabled) {
                /* Hide panels */
                setRangeVisibility(false);
                setFilterVisibility(false);
            }

            /* else no filters available */
        } else {
            /* Enabled disable range selection */
            theRangeButton.setEnabled(false);

            /* Hide panels */
            setRangeVisibility(false);
            setFilterVisibility(false);
            theFilterDetail.setVisible(false);
            theRangeSelect.setEnabled(bEnabled);
        }
    }

    @Override
    public void setVisible(final boolean pVisible) {
        thePanel.setVisible(pVisible);
    }

    /**
     * Is there any filter available?
     * @return true/false
     */
    private boolean isAvailable() {
        /* Loop through the panels */
        for (MoneyWiseXAnalysisFilterSelection myEntry : theMap.values()) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportTaxCalculation.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportTaxCalculation.html#L96">96</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportTaxCalculation.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportTaxCalculation.html#L96">96</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public Document createReport(final MoneyWiseXAnalysis pAnalysis) {
        /* Access the bucket lists */
        final MoneyWiseTaxAnalysis myTaxAnalysis = pAnalysis.getTaxAnalysis();
        final MoneyWiseTaxYear myYear = myTaxAnalysis.getTaxYear();

        /* Start the report */
        final Element myBody = theBuilder.startReport();
        theBuilder.makeTitle(myBody, TEXT_TITLE, theFormatter.formatObject(myYear.getYearEnd()));

        /* Format the header */
        final MetisHTMLTable myTable = theBuilder.startTable(myBody);
        theBuilder.startHdrRow(myTable);
        theBuilder.makeTitleCell(myTable, MoneyWiseStaticResource.TAXBASIS_NAME.getValue());
        theBuilder.makeTitleCell(myTable, TEXT_INCOME);
        theBuilder.makeTitleCell(myTable, TEXT_TAXDUE);

        /* Loop through the Tax Due Buckets */
        final Iterator&lt;MoneyWiseTaxDueBucket&gt; myTaxIterator = myTaxAnalysis.taxDueIterator();
        while (myTaxIterator.hasNext()) {
            final MoneyWiseTaxDueBucket myBucket = myTaxIterator.next();

            /* Format the line */
            theBuilder.startRow(myTable);
            theBuilder.makeTableLinkCell(myTable, myBucket.getTaxBasis().toString());
            theBuilder.makeValueCell(myTable, myBucket.getTaxableIncome());
            theBuilder.makeValueCell(myTable, myBucket.getTaxDue());

            /* Format the detail */
            makeTaxReport(myTable, myBucket);
        }

        /* Access the Totals */
        theBuilder.startTotalRow(myTable);
        theBuilder.makeTotalCell(myTable, MoneyWiseXReportBuilder.TEXT_TOTAL);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\database\MoneyWiseTableDeposit.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/database/MoneyWiseTableDeposit.html#L90">90</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\database\MoneyWiseTableLoan.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/database/MoneyWiseTableLoan.html#L90">90</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\database\MoneyWiseTableSecurity.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/database/MoneyWiseTableSecurity.html#L90">90</a></td></tr>
<tr class="a">
<td colspan="2">
<pre>protected void setFieldValue(final MoneyWiseDeposit pItem,
                                 final MetisDataFieldId iField) throws OceanusException {
        /* Switch on field id */
        final PrometheusTableDefinition myTableDef = getTableDef();
        if (MoneyWiseBasicResource.CATEGORY_NAME.equals(iField)) {
            myTableDef.setIntegerValue(iField, pItem.getCategoryId());
        } else if (MoneyWiseBasicResource.ASSET_PARENT.equals(iField)) {
            myTableDef.setIntegerValue(iField, pItem.getParentId());
        } else if (MoneyWiseStaticDataType.CURRENCY.equals(iField)) {
            myTableDef.setIntegerValue(iField, pItem.getAssetCurrencyId());
        } else if (PrometheusDataResource.DATAITEM_FIELD_NAME.equals(iField)) {
            myTableDef.setBinaryValue(iField, pItem.getNameBytes());
        } else if (PrometheusDataResource.DATAITEM_FIELD_DESC.equals(iField)) {
            myTableDef.setBinaryValue(iField, pItem.getDescBytes());
        } else if (MoneyWiseBasicResource.ASSET_CLOSED.equals(iField)) {
            myTableDef.setBooleanValue(iField, pItem.isClosed());
        } else {
            super.setFieldValue(pItem, iField);
        }
    }
}</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseAccountPanel.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseAccountPanel.html#L283">283</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseCategoryPanel.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseCategoryPanel.html#L273">273</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>setChildListeners(theSecurityTable.getEventRegistrar());
    }

    @Override
    public TethysUIComponent getUnderlying() {
        return thePanel;
    }

    @Override
    public OceanusEventRegistrar&lt;PrometheusDataEvent&gt; getEventRegistrar() {
        return theEventManager.getEventRegistrar();
    }

    /**
     * setChildListeners.
     * @param pRegistrar the registrar
     */
    private void setChildListeners(final OceanusEventRegistrar&lt;PrometheusDataEvent&gt; pRegistrar) {
        pRegistrar.addEventListener(PrometheusDataEvent.ADJUSTVISIBILITY, e -&gt; {
            if (!isRefreshing) {
                setVisibility();
            }
        });
        pRegistrar.addEventListener(PrometheusDataEvent.GOTOWINDOW, this::handleGoToEvent);
    }

    @Override
    public void setEnabled(final boolean pEnabled) {
        theSelectButton.setEnabled(pEnabled);
        theCardPanel.setEnabled(pEnabled);
        theFilterCardPanel.setEnabled(pEnabled);
    }

    @Override
    public void setVisible(final boolean pVisible) {
        thePanel.setVisible(pVisible);
    }

    /**
     * Build select menu.
     */
    private void buildSelectMenu() {
        /* Create builder */
        final TethysUIScrollMenu&lt;PanelName&gt; myMenu = theSelectButton.getMenu();

        /* Loop through the panels */
        for (PanelName myPanel : PanelName.values()) {
            /* Create a new JMenuItem for the panel */
            myMenu.addItem(myPanel);
        }
    }

    /**
     * Show locked accounts.
     * @param pShow true/false
     */
    public void showLocked(final boolean pShow) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXLoanAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXLoanAnalysisSelect.html#L301">301</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseLoanAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseLoanAnalysisSelect.html#L304">304</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseXAnalysisLoanCategoryBucket myBucket = myIterator.next();

            /* Only process low-level items */
            if (myBucket.getAccountCategory().isCategoryClass(MoneyWiseLoanCategoryClass.PARENT)) {
                continue;
            }

            /* Determine menu to add to */
            final MoneyWiseLoanCategory myParent = myBucket.getAccountCategory().getParentCategory();
            final String myParentName = myParent.getName();
            TethysUIScrollSubMenu&lt;MoneyWiseLoanCategory&gt; myMenu = myMap.get(myParent.getName());

            /* If this is a new menu */
            if (myMenu == null) {
                /* Create a new JMenu and add it to the popUp */
                myMenu = theCategoryMenu.addSubMenu(myParentName);
                myMap.put(myParentName, myMenu);
            }

            /* Create a new JMenuItem and add it to the popUp */
            final MoneyWiseLoanCategory myCategory = myBucket.getAccountCategory();
            final TethysUIScrollItem&lt;MoneyWiseLoanCategory&gt; myItem = myMenu.getSubMenu().addItem(myCategory, myCategory.getSubCategory());

            /* If this is the active category */
            if (myCategory.equals(myCurrent)) {
                /* Record it */
                myActive = myItem;
            }
        }

        /* Ensure active item is visible */
        if (myActive != null) {
            myActive.scrollToItem();
        }
    }

    /**
     * Build Loan menu.
     */
    private void buildLoanMenu() {
        /* Reset the popUp menu */
        theLoanMenu.removeAllItems();

        /* Access current category and Loan */
        final MoneyWiseLoanCategory myCategory = theState.getCategory();
        final MoneyWiseXAnalysisLoanBucket myLoan = theState.getLoan();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseAccountPanel.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseAccountPanel.html#L248">248</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseCategoryPanel.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseCategoryPanel.html#L238">238</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theFilterCardPanel.addCard(PanelName.PAYEES.toString(), thePayeeTable.getFilterPanel());

        /* Create the select prompt */
        final TethysUIBoxPaneManager mySelect = myPanes.newHBoxPane();
        mySelect.addNode(myLabel);
        mySelect.addNode(theSelectButton);

        /* Create the selection panel */
        theSelectPanel = myPanes.newBorderPane();
        theSelectPanel.setBorderTitle(NLS_SELECT);
        theSelectPanel.setWest(mySelect);
        theSelectPanel.setCentre(theFilterCardPanel);

        /* Create the header panel */
        final TethysUIBorderPaneManager myHeader = myPanes.newBorderPane();
        myHeader.setCentre(theSelectPanel);
        myHeader.setNorth(theError);
        myHeader.setEast(theActionButtons);

        /* Now define the panel */
        thePanel.setNorth(myHeader);
        thePanel.setCentre(theCardPanel);

        /* Hide the action buttons initially */
        theActionButtons.setVisible(false);

        /* Create the listeners */
        theSelectButton.getEventRegistrar().addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleSelection());
        theError.getEventRegistrar().addEventListener(e -&gt; handleErrorPane());
        theActionButtons.getEventRegistrar().addEventListener(this::handleActionButtons);
        setChildListeners(theDepositTable.getEventRegistrar());
        setChildListeners(theCashTable.getEventRegistrar());
        setChildListeners(theLoanTable.getEventRegistrar());
        setChildListeners(thePayeeTable.getEventRegistrar());</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\dialog\MoneyWiseXTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/dialog/MoneyWiseXTransactionDialog.html#L155">155</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\dialog\MoneyWiseTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/dialog/MoneyWiseTransactionDialog.html#L150">150</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseBaseTable&lt;MoneyWiseXAnalysisEvent&gt; pOwner) {
        /* Initialise the panel */
        super(pFactory, pEditSet, pOwner);
        theAnalysisSelect = pAnalysisSelect;

        /* Access the fieldSet */
        theFieldSet = getFieldSet();

        /* Build the main panel */
        buildMainPanel(pFactory);

        /* Build the info panel */
        buildInfoPanel(pFactory);

        /* Build the tax panel */
        buildTaxPanel(pFactory);

        /* Build the securities panel */
        buildSecuritiesPanel(pFactory);

        /* Build the returned panel */
        buildReturnedPanel(pFactory);
    }

    /**
     * Build Main subPanel.
     * @param pFactory the GUI factory
     */
    private void buildMainPanel(final TethysUIFactory&lt;?&gt; pFactory) {
        /* Allocate fields */
        final TethysUIFieldFactory myFields = pFactory.fieldFactory();
        final TethysUIMoneyEditField myAmount = myFields.newMoneyField();

        /* Create the buttons */
        final TethysUIDateButtonField myDateButton = myFields.newDateField();
        final TethysUIScrollButtonField&lt;MoneyWiseTransAsset&gt; myAccountButton = myFields.newScrollField(MoneyWiseTransAsset.class);
        final TethysUIScrollButtonField&lt;MoneyWiseTransAsset&gt; myPartnerButton = myFields.newScrollField(MoneyWiseTransAsset.class);
        final TethysUIScrollButtonField&lt;MoneyWiseTransCategory&gt; myCategoryButton = myFields.newScrollField(MoneyWiseTransCategory.class);
        final TethysUIIconButtonField&lt;Boolean&gt; myReconciledButton = myFields.newIconField(Boolean.class);
        final TethysUIIconButtonField&lt;MoneyWiseAssetDirection&gt; myDirectionButton = myFields.newIconField(MoneyWiseAssetDirection.class);

        /* Assign the fields to the panel */
        theFieldSet.addField(MoneyWiseBasicResource.MONEYWISEDATA_FIELD_DATE, myDateButton, MoneyWiseXAnalysisEvent::getDate);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\panel\MoneyWiseXEventTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/panel/MoneyWiseXEventTable.html#L1159">1159</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\panel\MoneyWiseTransactionTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/panel/MoneyWiseTransactionTable.html#L1165">1165</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public void selectStatement(final MoneyWiseXStatementSelect pSelect) {
            theTable.selectStatement(pSelect);
        }

        /**
         * handleErrorPane.
         */
        private void handleErrorPane() {
            /* Determine whether we have an error */
            final boolean isError = theError.hasError();

            /* Hide selection panel on error */
            theTable.getSelect().setVisible(!isError);

            /* Lock scroll area */
            theTable.setEnabled(!isError);

            /* Lock Action Buttons */
            theTable.getActionButtons().setEnabled(!isError);
        }

        /**
         * handle Action Buttons.
         * @param pEvent the event
         */
        private void handleActionButtons(final OceanusEvent&lt;PrometheusUIEvent&gt; pEvent) {
            /* Cancel editing */
            theTable.cancelEditing();

            /* Perform the command */
            theEditSet.processCommand(pEvent.getEventId(), theError);

            /* Adjust for changes */
            theTable.notifyChanges();
        }

        /**
         * Determine Focus.
         */
        public void determineFocus() {
            /* Request the focus */
            theTable.determineFocus();

            /* Focus on the Data entry */
            theViewerAnalysis.setFocus();
        }

        /**
         * Call underlying controls to take notice of changes in view/selection.
         */
        private void notifyChanges() {
            /* Notify listeners */
            theEventManager.fireEvent(PrometheusDataEvent.ADJUSTVISIBILITY);
        }

        /**
         * Does the panel have updates?
         * @return true/false
         */
        public boolean hasUpdates() {
            return theTable.hasUpdates();
        }

        /**
         * Does the panel have a session?
         * @return true/false
         */
        public boolean hasSession() {
            return theTable.hasUpdates();
        }

        /**
         * Does the panel have errors?
         * @return true/false
         */
        public boolean hasErrors() {
            return theTable.hasErrors();
        }
    }
}</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseLoanInfoSet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseLoanInfoSet.html#L75">75</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWisePayeeInfoSet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWisePayeeInfoSet.html#L75">75</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWisePortfolioInfoSet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWisePortfolioInfoSet.html#L75">75</a></td></tr>
<tr class="a">
<td colspan="2">
<pre>return (MoneyWiseLoan) super.getOwner();
    }

    /**
     * Obtain fieldValue for infoSet.
     * @param pFieldId the fieldId
     * @return the value
     */
    public Object getFieldValue(final MetisDataFieldId pFieldId) {
        /* Handle InfoSet fields */
        final MoneyWiseAccountInfoClass myClass = getClassForField(pFieldId);
        if (myClass != null) {
            return getInfoSetValue(myClass);
        }

        /* Pass onwards */
        return null;
    }

    /**
     * Get an infoSet value.
     * @param pInfoClass the class of info to get
     * @return the value to set
     */
    private Object getInfoSetValue(final MoneyWiseAccountInfoClass pInfoClass) {
        /* Return the value */
        final Object myValue = getField(pInfoClass);
        return myValue != null
                ? myValue
                : MetisDataFieldValue.SKIP;
    }

    /**
     * Obtain the class of the field if it is an infoSet field.
     * @param pField the field
     * @return the class
     */
    public static MoneyWiseAccountInfoClass getClassForField(final MetisDataFieldId pField) {
        /* Look up field in map */
        return FIELDSET_MAP.get(pField);
    }

    /**
     * Obtain the field for the infoSet class.
     * @param pClass the class
     * @return the field
     */
    public static MetisDataFieldId getFieldForClass(final MoneyWiseAccountInfoClass pClass) {
        /* Look up field in map */
        return REVERSE_FIELDMAP.get(pClass);
    }

    @Override
    public MetisDataFieldId getFieldForClass(final PrometheusDataInfoClass pClass) {
        return getFieldForClass((MoneyWiseAccountInfoClass) pClass);
    }

    @Override
    public Iterator&lt;PrometheusDataInfoClass&gt; classIterator() {
        final PrometheusDataInfoClass[] myValues = MoneyWiseAccountInfoClass.values();
        return Arrays.stream(myValues).iterator();
    }

    /**
     * Clone the dataInfoSet.
     * @param pSource the InfoSet to clone
     */
    protected void cloneDataInfoSet(final MoneyWiseLoanInfoSet pSource) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportNetWorth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportNetWorth.html#L582">582</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportNetWorth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportNetWorth.html#L647">647</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseXAnalysisCashBucket myBucket = myIterator.next();

            /* Skip record if inactive or incorrect category */
            if (!myBucket.isActive()
                    || !MetisDataDifference.isEqual(myBucket.getCategory(), myCategory)) {
                continue;
            }

            /* Access bucket name */
            final String myName = myBucket.getName();

            /* Access values */
            final MoneyWiseXAnalysisAccountValues myValues = myBucket.getValues();

            /* Create the detail row */
            theBuilder.startRow(myTable);
            theBuilder.makeFilterLinkCell(myTable, myName);

            /* Handle foreign accounts */
            if (isForeign) {
                if (myBucket.isForeignCurrency()) {
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.BALANCE));
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                } else {
                    theBuilder.makeStretchedValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                }
            } else {
                theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
            }

            /* Record the filter */
            setFilterForId(myName, myBucket);
        }

        /* Return the table */
        return myTable;
    }

    /**
     * Create a delayed category table.
     * @param pParent the parent table
     * @param pSource the source bucket
     * @return the new document fragment
     */
    private MetisHTMLTable createDelayedLoan(final MetisHTMLTable pParent,</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportNetWorth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportNetWorth.html#L582">582</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportNetWorth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportNetWorth.html#L647">647</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseAnalysisCashBucket myBucket = myIterator.next();

            /* Skip record if inactive or incorrect category */
            if (!myBucket.isActive()
                    || !MetisDataDifference.isEqual(myBucket.getCategory(), myCategory)) {
                continue;
            }

            /* Access bucket name */
            final String myName = myBucket.getName();

            /* Access values */
            final MoneyWiseAnalysisAccountValues myValues = myBucket.getValues();

            /* Create the detail row */
            theBuilder.startRow(myTable);
            theBuilder.makeFilterLinkCell(myTable, myName);

            /* Handle foreign accounts */
            if (isForeign) {
                if (myBucket.isForeignCurrency()) {
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.FOREIGNVALUE));
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                } else {
                    theBuilder.makeStretchedValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                }
            } else {
                theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
            }

            /* Record the filter */
            setFilterForId(myName, myBucket);
        }

        /* Return the table */
        return myTable;
    }

    /**
     * Create a delayed category table.
     * @param pParent the parent table
     * @param pSource the source bucket
     * @return the new document fragment
     */
    private MetisHTMLTable createDelayedLoan(final MetisHTMLTable pParent,</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportBalanceSheet.html#L525">525</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportBalanceSheet.html#L703">703</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>if (myBucket.isForeignCurrency()) {
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.BALANCE));
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                    theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.BALANCE));
                    theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                } else {
                    theBuilder.makeStretchedValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                    theBuilder.makeStretchedValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                }
            } else {
                theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
            }
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUEDELTA));

            /* Record the filter */
            setFilterForId(myName, myBucket);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportBalanceSheet.html#L587">587</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportBalanceSheet.html#L703">703</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>if (myBucket.isForeignCurrency()) {
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.BALANCE));
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                    theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.BALANCE));
                    theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                } else {
                    theBuilder.makeStretchedValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                    theBuilder.makeStretchedValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                }
            } else {
                theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
            }
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUEDELTA));

            /* Record the filter */
            setFilterForId(myName, myBucket);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportBalanceSheet.html#L649">649</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportBalanceSheet.html#L703">703</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>if (myBucket.isForeignCurrency()) {
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.BALANCE));
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                    theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.BALANCE));
                    theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                } else {
                    theBuilder.makeStretchedValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                    theBuilder.makeStretchedValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                }
            } else {
                theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
                theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
            }
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUEDELTA));

            /* Record the filter */
            setFilterForId(myName, myBucket);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportBalanceSheet.html#L525">525</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportBalanceSheet.html#L703">703</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>if (myBucket.isForeignCurrency()) {
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.FOREIGNVALUE));
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                    theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.FOREIGNVALUE));
                    theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                } else {
                    theBuilder.makeStretchedValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                    theBuilder.makeStretchedValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                }
            } else {
                theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
            }
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUEDELTA));

            /* Record the filter */
            setFilterForId(myName, myBucket);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportBalanceSheet.html#L587">587</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportBalanceSheet.html#L703">703</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>if (myBucket.isForeignCurrency()) {
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.FOREIGNVALUE));
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                    theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.FOREIGNVALUE));
                    theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                } else {
                    theBuilder.makeStretchedValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                    theBuilder.makeStretchedValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                }
            } else {
                theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
            }
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUEDELTA));

            /* Record the filter */
            setFilterForId(myName, myBucket);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportBalanceSheet.html#L649">649</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportBalanceSheet.html#L703">703</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>if (myBucket.isForeignCurrency()) {
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.FOREIGNVALUE));
                    theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                    theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.FOREIGNVALUE));
                    theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                } else {
                    theBuilder.makeStretchedValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                    theBuilder.makeStretchedValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                }
            } else {
                theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
                theBuilder.makeValueCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
            }
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUEDELTA));

            /* Record the filter */
            setFilterForId(myName, myBucket);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXAnalysisSelect.html#L59">59</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseAnalysisSelect.html#L59">59</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>implements OceanusEventProvider&lt;PrometheusDataEvent&gt;, TethysUIComponent {
    /**
     * Text for DateRange Label.
     */
    private static final String NLS_RANGE = MoneyWiseUIResource.ANALYSIS_PROMPT_RANGE.getValue();

    /**
     * Text for Filter Label.
     */
    private static final String NLS_FILTER = MoneyWiseUIResource.ANALYSIS_PROMPT_FILTER.getValue();

    /**
     * Text for FilterType Label.
     */
    private static final String NLS_FILTERTYPE = MoneyWiseUIResource.ANALYSIS_PROMPT_FILTERTYPE.getValue();

    /**
     * Text for ColumnSet Label.
     */
    private static final String NLS_COLUMNS = MoneyWiseUIResource.ANALYSIS_PROMPT_COLUMNSET.getValue();

    /**
     * Text for BucketType Label.
     */
    private static final String NLS_BUCKET = MoneyWiseUIResource.ANALYSIS_PROMPT_BUCKET.getValue();

    /**
     * Text for Title.
     */
    private static final String NLS_TITLE = MoneyWiseUIResource.ANALYSIS_TITLE.getValue();

    /**
     * Text for NoBucket.
     */
    private static final String NLS_NONE = MoneyWiseUIResource.ANALYSIS_BUCKET_NONE.getValue();

    /**
     * Text for Title.
     */
    private static final String NLS_FILTERTITLE = MoneyWiseUIResource.ANALYSIS_FILTER_TITLE.getValue();

    /**
     * Text for Box Title.
     */
    private static final String NLS_RANGETITLE = OceanusDateResource.TITLE_BOX.getValue();

    /**
     * The Event Manager.
     */
    private final OceanusEventManager&lt;PrometheusDataEvent&gt; theEventManager;

    /**
     * View.
     */
    private final MoneyWiseView theView;

    /**
     * Panel.
     */
    private final TethysUIBoxPaneManager thePanel;

    /**
     * Range Button.
     */
    private final TethysUIButton theRangeButton;

    /**
     * Filter Button.
     */
    private final TethysUIButton theFilterButton;

    /**
     * Filter Type Button.
     */
    private final TethysUIScrollButtonManager&lt;MoneyWiseXAnalysisType&gt; theFilterTypeButton;</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseDeposit.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseDeposit.html#L510">510</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseLoan.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseLoan.html#L473">473</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>setInfoSetValue(MoneyWiseAccountInfoClass.MATURITY, pMaturity);
    }

    /**
     * Set a new SortCode.
     * @param pSortCode the new sort code
     * @throws OceanusException on error
     */
    public void setSortCode(final char[] pSortCode) throws OceanusException {
        setInfoSetValue(MoneyWiseAccountInfoClass.SORTCODE, pSortCode);
    }

    /**
     * Set a new Account.
     * @param pAccount the new account
     * @throws OceanusException on error
     */
    public void setAccount(final char[] pAccount) throws OceanusException {
        setInfoSetValue(MoneyWiseAccountInfoClass.ACCOUNT, pAccount);
    }

    /**
     * Set a new Reference.
     * @param pReference the new reference
     * @throws OceanusException on error
     */
    public void setReference(final char[] pReference) throws OceanusException {
        setInfoSetValue(MoneyWiseAccountInfoClass.REFERENCE, pReference);
    }

    /**
     * Set a new Notes.
     * @param pNotes the new notes
     * @throws OceanusException on error
     */
    public void setNotes(final char[] pNotes) throws OceanusException {
        setInfoSetValue(MoneyWiseAccountInfoClass.NOTES, pNotes);
    }

    /**
     * Set a new opening balance.
     * @param pBalance the new opening balance
     * @throws OceanusException on error
     */
    public void setOpeningBalance(final OceanusMoney pBalance) throws OceanusException {
        setInfoSetValue(MoneyWiseAccountInfoClass.OPENINGBALANCE, pBalance);
    }

    /**
     * Set an infoSet value.
     * @param pInfoClass the class of info to set
     * @param pValue the value to set
     * @throws OceanusException on error
     */
    private void setInfoSetValue(final MoneyWiseAccountInfoClass pInfoClass,
                                 final Object pValue) throws OceanusException {
        /* Reject if there is no infoSet */
        if (!hasInfoSet) {
            throw new MoneyWiseLogicException(ERROR_BADINFOSET);
        }

        /* Set the value */
        theInfoSet.setValue(pInfoClass, pValue);
    }

    @Override
    public void adjustClosed() throws OceanusException {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportMarketGrowth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportMarketGrowth.html#L202">202</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportPortfolioView.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportPortfolioView.html#L168">168</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>checkPortfolioGrowth(myTotals);

        /* Return the document */
        return theBuilder.getDocument();
    }

    @Override
    public MetisHTMLTable createDelayedTable(final DelayedTable pTable) {
        /* Access the source */
        final Object mySource = pTable.getSource();
        if (mySource instanceof MoneyWiseAnalysisPortfolioBucket mySourceBucket) {
            return createDelayedPortfolio(pTable.getParent(), mySourceBucket);
        }

        /* Return the null table */
        return null;
    }

    /**
     * Create a delayed portfolio table.
     * @param pParent the parent table
     * @param pSource the source bucket
     * @return the new document fragment
     */
    private MetisHTMLTable createDelayedPortfolio(final MetisHTMLTable pParent,
                                                  final MoneyWiseAnalysisPortfolioBucket pSource) {
        /* Access the securities */
        final MoneyWiseAnalysisSecurityBucketList mySecurities = pSource.getSecurities();

        /* Create a new table */
        final MetisHTMLTable myTable = theBuilder.createEmbeddedTable(pParent);

        /* Loop through the Security Buckets */
        final Iterator&lt;MoneyWiseAnalysisSecurityBucket&gt; myIterator = mySecurities.iterator();
        while (myIterator.hasNext()) {
            final MoneyWiseAnalysisSecurityBucket myBucket = myIterator.next();

            /* Access bucket name */
            final String myName = myBucket.getSecurityName();
            String myFullName = myBucket.getDecoratedName();
            myFullName = myFullName.replace(':', '-');

            /* Access values */
            final MoneyWiseAnalysisSecurityValues myValues = myBucket.getValues();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportAssetGains.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportAssetGains.html#L139">139</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportMarketGrowth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportMarketGrowth.html#L180">180</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisSecurityAttr.REALISEDGAINS));

        /* Return the document */
        return theBuilder.getDocument();
    }

    @Override
    public MetisHTMLTable createDelayedTable(final DelayedTable pTable) {
        /* Access the source */
        final Object mySource = pTable.getSource();
        if (mySource instanceof MoneyWiseXAnalysisPortfolioBucket mySourceBucket) {
            return createDelayedPortfolio(pTable.getParent(), mySourceBucket);
        }

        /* Return the null table */
        return null;
    }

    /**
     * Create a delayed portfolio table.
     * @param pParent the parent table
     * @param pSource the source bucket
     * @return the new document fragment
     */
    private MetisHTMLTable createDelayedPortfolio(final MetisHTMLTable pParent,
                                                  final MoneyWiseXAnalysisPortfolioBucket pSource) {
        /* Access the securities and portfolio */
        final MoneyWiseXAnalysisSecurityBucketList mySecurities = pSource.getSecurities();

        /* Create a new table */
        final MetisHTMLTable myTable = theBuilder.createEmbeddedTable(pParent);

        /* Loop through the Security Buckets */
        final Iterator&lt;MoneyWiseXAnalysisSecurityBucket&gt; myIterator = mySecurities.iterator();
        while (myIterator.hasNext()) {
            final MoneyWiseXAnalysisSecurityBucket myBucket = myIterator.next();

            /* Access bucket name */
            final String myName = myBucket.getSecurityName();
            String myFullName = myBucket.getDecoratedName();
            myFullName = myFullName.replace(':', '-');

            /* Access values */
            final MoneyWiseXAnalysisSecurityValues myValues = myBucket.getValues();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportMarketGrowth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportMarketGrowth.html#L180">180</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportPortfolioView.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportPortfolioView.html#L168">168</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisSecurityAttr.MARKETPROFIT));
        //checkPortfolioGrowth(myTotals);

        /* Return the document */
        return theBuilder.getDocument();
    }

    @Override
    public MetisHTMLTable createDelayedTable(final DelayedTable pTable) {
        /* Access the source */
        final Object mySource = pTable.getSource();
        if (mySource instanceof MoneyWiseXAnalysisPortfolioBucket mySourceBucket) {
            return createDelayedPortfolio(pTable.getParent(), mySourceBucket);
        }

        /* Return the null table */
        return null;
    }

    /**
     * Create a delayed portfolio table.
     * @param pParent the parent table
     * @param pSource the source bucket
     * @return the new document fragment
     */
    private MetisHTMLTable createDelayedPortfolio(final MetisHTMLTable pParent,
                                                  final MoneyWiseXAnalysisPortfolioBucket pSource) {
        /* Access the securities */
        final MoneyWiseXAnalysisSecurityBucketList mySecurities = pSource.getSecurities();

        /* Create a new table */
        final MetisHTMLTable myTable = theBuilder.createEmbeddedTable(pParent);

        /* Loop through the Security Buckets */
        final Iterator&lt;MoneyWiseXAnalysisSecurityBucket&gt; myIterator = mySecurities.iterator();
        while (myIterator.hasNext()) {
            final MoneyWiseXAnalysisSecurityBucket myBucket = myIterator.next();

            /* Access bucket name */
            final String myName = myBucket.getSecurityName();
            String myFullName = myBucket.getDecoratedName();
            myFullName = myFullName.replace(':', '-');

            /* Access values */
            final MoneyWiseXAnalysisSecurityValues myValues = myBucket.getValues();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportAssetGains.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportAssetGains.html#L139">139</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportMarketGrowth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportMarketGrowth.html#L202">202</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisSecurityAttr.REALISEDGAINS));

        /* Return the document */
        return theBuilder.getDocument();
    }

    @Override
    public MetisHTMLTable createDelayedTable(final DelayedTable pTable) {
        /* Access the source */
        final Object mySource = pTable.getSource();
        if (mySource instanceof MoneyWiseAnalysisPortfolioBucket mySourceBucket) {
            return createDelayedPortfolio(pTable.getParent(), mySourceBucket);
        }

        /* Return the null table */
        return null;
    }

    /**
     * Create a delayed portfolio table.
     * @param pParent the parent table
     * @param pSource the source bucket
     * @return the new document fragment
     */
    private MetisHTMLTable createDelayedPortfolio(final MetisHTMLTable pParent,
                                                  final MoneyWiseAnalysisPortfolioBucket pSource) {
        /* Access the securities and portfolio */
        final MoneyWiseAnalysisSecurityBucketList mySecurities = pSource.getSecurities();

        /* Create a new table */
        final MetisHTMLTable myTable = theBuilder.createEmbeddedTable(pParent);

        /* Loop through the Security Buckets */
        final Iterator&lt;MoneyWiseAnalysisSecurityBucket&gt; myIterator = mySecurities.iterator();
        while (myIterator.hasNext()) {
            final MoneyWiseAnalysisSecurityBucket myBucket = myIterator.next();

            /* Access bucket name */
            final String myName = myBucket.getSecurityName();
            String myFullName = myBucket.getDecoratedName();
            myFullName = myFullName.replace(':', '-');

            /* Access values */
            final MoneyWiseAnalysisSecurityValues myValues = myBucket.getValues();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportCapitalGains.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportCapitalGains.html#L316">316</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportCapitalGains.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportCapitalGains.html#L310">310</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>private void formatValuation(final MoneyWiseXAnalysisSecurityAttr pAttr,
                                 final Object pValue,
                                 final OceanusUnits pUnits,
                                 final OceanusPrice pPrice,
                                 final OceanusRatio pXchangeRate) {
        /* Ensure that we have an attribute table */
        ensureAttrTable();

        /* Format the attribute */
        theBuilder.startRow(theAttrTable);
        theBuilder.makeValueCell(theAttrTable, pAttr);
        theBuilder.makeValueCell(theAttrTable, formatValuation(pUnits, pPrice, pXchangeRate));
        theBuilder.makeValueCell(theAttrTable, pValue);
    }

    /**
     * Format a valuation.
     * @param pUnits the units
     * @param pPrice the price
     * @param pXchangeRate the exchange rate
     * @return the formatted valuation
     */
    private String formatValuation(final OceanusUnits pUnits,
                                   final OceanusPrice pPrice,
                                   final OceanusRatio pXchangeRate) {
        theStringBuilder.setLength(0);
        theStringBuilder.append(theFormatter.formatObject(pUnits));
        theStringBuilder.append('@');
        theStringBuilder.append(theFormatter.formatObject(pPrice));
        if (pXchangeRate != null) {
            theStringBuilder.append('/');
            theStringBuilder.append(theFormatter.formatObject(pXchangeRate));
        }
        return theStringBuilder.toString();
    }

    /**
     * Format a multiplication.
     * @param pAttr the attribute
     * @param pValue the value
     * @param pFirst the first item
     * @param pSecond the second item
     */
    private void formatMultiplication(final MoneyWiseXAnalysisSecurityAttr pAttr,</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseMarketPricesTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseMarketPricesTable.html#L363">363</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseMarketRatesTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseMarketRatesTable.html#L347">347</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theTable = new MoneyWiseMarketPricesTable(pView, theEditSet, theError);

            /* Create the action buttons */
            final TethysUIFactory&lt;?&gt; myGuiFactory = pView.getGuiFactory();
            theActionButtons = new PrometheusActionButtons(myGuiFactory, theEditSet);
            theActionButtons.setVisible(false);

            /* Create the header panel */
            final TethysUIPaneFactory myPanes = myGuiFactory.paneFactory();
            final TethysUIBorderPaneManager myHeader = myPanes.newBorderPane();
            myHeader.setCentre(theTable.getSelect());
            myHeader.setNorth(theError);
            myHeader.setEast(theActionButtons);

            /* Create the panel */
            thePanel = myPanes.newBorderPane();
            thePanel.setNorth(myHeader);
            thePanel.setCentre(theTable);

            /* Add listeners */
            theError.getEventRegistrar().addEventListener(e -&gt; handleErrorPane());
            theActionButtons.getEventRegistrar().addEventListener(this::handleActionButtons);
            theTable.getEventRegistrar().addEventListener(e -&gt; notifyChanges());
        }

        @Override
        public TethysUIComponent getUnderlying() {
            return thePanel;
        }

        @Override
        public OceanusEventRegistrar&lt;PrometheusDataEvent&gt; getEventRegistrar() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportBalanceSheet.html#L458">458</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportNetWorth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportNetWorth.html#L458">458</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisSecurityAttr.VALUEDELTA));

            /* Note the delayed subTable */
            setDelayedTable(myName, myTable, myBucket);
        }

        /* Embed the table correctly */
        theBuilder.embedTable(myTable, MoneyWiseBasicDataType.PORTFOLIO.getListName());
    }

    @Override
    public MetisHTMLTable createDelayedTable(final DelayedTable pTable) {
        /* Access the source */
        final Object mySource = pTable.getSource();
        if (mySource instanceof MoneyWiseXAnalysisDepositCategoryBucket mySourceBucket) {
            return createDelayedDeposit(pTable.getParent(), mySourceBucket);
        } else if (mySource instanceof MoneyWiseXAnalysisCashCategoryBucket mySourceBucket) {
            return createDelayedCash(pTable.getParent(), mySourceBucket);
        } else if (mySource instanceof MoneyWiseXAnalysisLoanCategoryBucket mySourceBucket) {
            return createDelayedLoan(pTable.getParent(), mySourceBucket);
        } else if (mySource instanceof MoneyWiseXAnalysisPortfolioBucket mySourceBucket) {
            return createDelayedPortfolio(pTable.getParent(), mySourceBucket);
        }

        /* Return the null table */
        return null;
    }

    /**
     * Create a delayed deposit category table.
     * @param pParent the parent table
     * @param pSource the source bucket
     * @return the new document fragment
     */
    private MetisHTMLTable createDelayedDeposit(final MetisHTMLTable pParent,
                                                final MoneyWiseXAnalysisDepositCategoryBucket pSource) {
        /* Access the category */
        final MoneyWiseXAnalysisDepositBucketList myDeposits = theAnalysis.getDeposits();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportBalanceSheet.html#L458">458</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportNetWorth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportNetWorth.html#L458">458</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisSecurityAttr.VALUEDELTA));

            /* Note the delayed subTable */
            setDelayedTable(myName, myTable, myBucket);
        }

        /* Embed the table correctly */
        theBuilder.embedTable(myTable, MoneyWiseBasicDataType.PORTFOLIO.getListName());
    }

    @Override
    public MetisHTMLTable createDelayedTable(final DelayedTable pTable) {
        /* Access the source */
        final Object mySource = pTable.getSource();
        if (mySource instanceof MoneyWiseAnalysisDepositCategoryBucket mySourceBucket) {
            return createDelayedDeposit(pTable.getParent(), mySourceBucket);
        } else if (mySource instanceof MoneyWiseAnalysisCashCategoryBucket mySourceBucket) {
            return createDelayedCash(pTable.getParent(), mySourceBucket);
        } else if (mySource instanceof MoneyWiseAnalysisLoanCategoryBucket mySourceBucket) {
            return createDelayedLoan(pTable.getParent(), mySourceBucket);
        } else if (mySource instanceof MoneyWiseAnalysisPortfolioBucket mySourceBucket) {
            return createDelayedPortfolio(pTable.getParent(), mySourceBucket);
        }

        /* Return the null table */
        return null;
    }

    /**
     * Create a delayed deposit category table.
     * @param pParent the parent table
     * @param pSource the source bucket
     * @return the new document fragment
     */
    private MetisHTMLTable createDelayedDeposit(final MetisHTMLTable pParent,
                                                final MoneyWiseAnalysisDepositCategoryBucket pSource) {
        /* Access the category */
        final MoneyWiseAnalysisDepositBucketList myDeposits = theAnalysis.getDeposits();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXCashAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXCashAnalysisSelect.html#L306">306</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseCashAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseCashAnalysisSelect.html#L309">309</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseXAnalysisCashCategoryBucket myBucket = myIterator.next();

            /* Only process low-level items */
            if (myBucket.getAccountCategory().isCategoryClass(MoneyWiseCashCategoryClass.PARENT)) {
                continue;
            }

            /* Determine menu to add to */
            final MoneyWiseCashCategory myParent = myBucket.getAccountCategory().getParentCategory();
            final String myParentName = myParent.getName();
            final TethysUIScrollSubMenu&lt;MoneyWiseCashCategory&gt; myMenu = myMap.computeIfAbsent(myParentName, theCategoryMenu::addSubMenu);

            /* Create a new JMenuItem and add it to the popUp */
            final MoneyWiseCashCategory myCategory = myBucket.getAccountCategory();
            final TethysUIScrollItem&lt;MoneyWiseCashCategory&gt; myItem = myMenu.getSubMenu().addItem(myCategory, myCategory.getSubCategory());

            /* If this is the active category */
            if (myCategory.equals(myCurrent)) {
                /* Record it */
                myActive = myItem;
            }
        }

        /* Ensure active item is visible */
        if (myActive != null) {
            myActive.scrollToItem();
        }
    }

    /**
     * Build Cash menu.
     */
    private void buildCashMenu() {
        /* Reset the popUp menu */
        theCashMenu.removeAllItems();

        /* Access current category and Account */
        final MoneyWiseCashCategory myCategory = theState.getCategory();
        final MoneyWiseXAnalysisCashBucket myCash = theState.getCash();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXDepositAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXDepositAnalysisSelect.html#L301">301</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseDepositAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseDepositAnalysisSelect.html#L304">304</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseXAnalysisDepositCategoryBucket myBucket = myIterator.next();

            /* Only process low-level items */
            if (myBucket.getAccountCategory().isCategoryClass(MoneyWiseDepositCategoryClass.PARENT)) {
                continue;
            }

            /* Determine menu to add to */
            final MoneyWiseDepositCategory myParent = myBucket.getAccountCategory().getParentCategory();
            final String myParentName = myParent.getName();
            final TethysUIScrollSubMenu&lt;MoneyWiseDepositCategory&gt; myMenu = myMap.computeIfAbsent(myParentName, theCategoryMenu::addSubMenu);

            /* Create a new JMenuItem and add it to the popUp */
            final MoneyWiseDepositCategory myCategory = myBucket.getAccountCategory();
            final TethysUIScrollItem&lt;MoneyWiseDepositCategory&gt; myItem = myMenu.getSubMenu().addItem(myCategory, myCategory.getSubCategory());

            /* If this is the active category */
            if (myCategory.equals(myCurrent)) {
                /* Record it */
                myActive = myItem;
            }
        }

        /* Ensure active item is visible */
        if (myActive != null) {
            myActive.scrollToItem();
        }
    }

    /**
     * Build Deposit menu.
     */
    private void buildDepositMenu() {
        /* Reset the popUp menu */
        theDepositMenu.removeAllItems();

        /* Access current category */
        final MoneyWiseDepositCategory myCategory = theState.getCategory();
        final MoneyWiseXAnalysisDepositBucket myDeposit = theState.getDeposit();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseDeposit.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseDeposit.html#L208">208</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseLoan.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseLoan.html#L195">195</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>? theInfoSet.getValue(MoneyWiseAccountInfoClass.MATURITY, OceanusDate.class)
                : null;
    }

    /**
     * Obtain SortCode.
     * @return the sort code
     */
    public char[] getSortCode() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.SORTCODE, char[].class)
                : null;
    }

    /**
     * Obtain Reference.
     * @return the reference
     */
    public char[] getReference() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.REFERENCE, char[].class)
                : null;
    }

    /**
     * Obtain Account.
     * @return the account
     */
    public char[] getAccount() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.ACCOUNT, char[].class)
                : null;
    }

    /**
     * Obtain Notes.
     * @return the notes
     */
    public char[] getNotes() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.NOTES, char[].class)
                : null;
    }

    @Override
    public OceanusMoney getOpeningBalance() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.OPENINGBALANCE, OceanusMoney.class)
                : null;
    }

    @Override
    public MoneyWiseDepositCategory getCategory() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXPayeeAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXPayeeAnalysisSelect.html#L94">94</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWisePayeeAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWisePayeeAnalysisSelect.html#L94">94</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theButton = pFactory.buttonFactory().newScrollButton(MoneyWiseXAnalysisPayeeBucket.class);

        /* Create Event Manager */
        theEventManager = new OceanusEventManager&lt;&gt;();

        /* Create the label */
        final TethysUILabel myLabel = pFactory.controlFactory().newLabel(NLS_PAYEE + TethysUIConstant.STR_COLON);

        /* Define the layout */
        thePanel = pFactory.paneFactory().newHBoxPane();
        thePanel.addSpacer();
        thePanel.addNode(myLabel);
        thePanel.addNode(theButton);

        /* Create initial state */
        theState = new MoneyWisePayeeState();
        theState.applyState();

        /* Access the menus */
        thePayeeMenu = theButton.getMenu();

        /* Create the listeners */
        final OceanusEventRegistrar&lt;TethysUIEvent&gt; myRegistrar = theButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewPayee());
        theButton.setMenuConfigurator(e -&gt; buildPayeeMenu());
    }

    @Override
    public TethysUIComponent getUnderlying() {
        return thePanel;
    }

    @Override
    public OceanusEventRegistrar&lt;PrometheusDataEvent&gt; getEventRegistrar() {
        return theEventManager.getEventRegistrar();
    }

    @Override
    public MoneyWiseXAnalysisPayeeFilter getFilter() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXPortfolioAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXPortfolioAnalysisSelect.html#L94">94</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWisePortfolioAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWisePortfolioAnalysisSelect.html#L94">94</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>thePortButton = pFactory.buttonFactory().newScrollButton(MoneyWiseXAnalysisPortfolioBucket.class);

        /* Create Event Manager */
        theEventManager = new OceanusEventManager&lt;&gt;();

        /* Create the labels */
        final TethysUILabel myPortLabel = pFactory.controlFactory().newLabel(NLS_PORTFOLIO + TethysUIConstant.STR_COLON);

        /* Define the layout */
        thePanel = pFactory.paneFactory().newHBoxPane();
        thePanel.addSpacer();
        thePanel.addNode(myPortLabel);
        thePanel.addNode(thePortButton);

        /* Create initial state */
        theState = new MoneyWisePortfolioState();
        theState.applyState();

        /* Access the menus */
        thePortfolioMenu = thePortButton.getMenu();

        /* Create the listeners */
        final OceanusEventRegistrar&lt;TethysUIEvent&gt; myRegistrar = thePortButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewPortfolio());
        thePortButton.setMenuConfigurator(e -&gt; buildPortfolioMenu());
    }

    @Override
    public TethysUIComponent getUnderlying() {
        return thePanel;
    }

    @Override
    public OceanusEventRegistrar&lt;PrometheusDataEvent&gt; getEventRegistrar() {
        return theEventManager.getEventRegistrar();
    }

    @Override
    public MoneyWiseXAnalysisPortfolioCashFilter getFilter() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXTransCategoryAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXTransCategoryAnalysisSelect.html#L99">99</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseTransCategoryAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseTransCategoryAnalysisSelect.html#L99">99</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theButton = pFactory.buttonFactory().newScrollButton(MoneyWiseXAnalysisTransCategoryBucket.class);

        /* Create the label */
        final TethysUILabel myLabel = pFactory.controlFactory().newLabel(NLS_CATEGORY + TethysUIConstant.STR_COLON);

        /* Create Event Manager */
        theEventManager = new OceanusEventManager&lt;&gt;();

        /* Define the layout */
        thePanel = pFactory.paneFactory().newHBoxPane();
        thePanel.addSpacer();
        thePanel.addNode(myLabel);
        thePanel.addNode(theButton);

        /* Create initial state */
        theState = new MoneyWiseEventState();
        theState.applyState();

        /* Access the menus */
        theCategoryMenu = theButton.getMenu();

        /* Create the listeners */
        final OceanusEventRegistrar&lt;TethysUIEvent&gt; myRegistrar = theButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewCategory());
        theButton.setMenuConfigurator(e -&gt; buildCategoryMenu());
    }

    @Override
    public TethysUIComponent getUnderlying() {
        return thePanel;
    }

    @Override
    public OceanusEventRegistrar&lt;PrometheusDataEvent&gt; getEventRegistrar() {
        return theEventManager.getEventRegistrar();
    }

    @Override
    public MoneyWiseXAnalysisTransCategoryFilter getFilter() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXTransTagSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXTransTagSelect.html#L94">94</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseTransTagSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseTransTagSelect.html#L94">94</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theTagButton = pFactory.buttonFactory().newScrollButton(MoneyWiseXAnalysisTransTagBucket.class);

        /* Create Event Manager */
        theEventManager = new OceanusEventManager&lt;&gt;();

        /* Create the label */
        final TethysUILabel myTagLabel = pFactory.controlFactory().newLabel(NLS_TAG + TethysUIConstant.STR_COLON);

        /* Define the layout */
        thePanel = pFactory.paneFactory().newHBoxPane();
        thePanel.addSpacer();
        thePanel.addNode(myTagLabel);
        thePanel.addNode(theTagButton);

        /* Create initial state */
        theState = new MoneyWiseTagState();
        theState.applyState();

        /* Create the listener */
        final OceanusEventRegistrar&lt;TethysUIEvent&gt; myRegistrar = theTagButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewTag());
        theTagButton.setMenuConfigurator(e -&gt; buildTagMenu());
        theTagMenu = theTagButton.getMenu();
    }

    @Override
    public TethysUIComponent getUnderlying() {
        return thePanel;
    }

    @Override
    public OceanusEventRegistrar&lt;PrometheusDataEvent&gt; getEventRegistrar() {
        return theEventManager.getEventRegistrar();
    }

    @Override
    public MoneyWiseXAnalysisTagFilter getFilter() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\dialog\MoneyWiseXTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/dialog/MoneyWiseXTransactionDialog.html#L269">269</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\dialog\MoneyWiseTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/dialog/MoneyWiseTransactionDialog.html#L267">267</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theFieldSet.addField(MoneyWiseTransInfoClass.WITHHELD, myWithheld, MoneyWiseXAnalysisEvent::getWithheld);

        /* Set currency */
        myTaxCredit.setDeemedCurrency(() -&gt; getItem().getAccount().getCurrency());
        myEeNatIns.setDeemedCurrency(() -&gt; getItem().getAccount().getCurrency());
        myErNatIns.setDeemedCurrency(() -&gt; getItem().getAccount().getCurrency());
        myBenefit.setDeemedCurrency(() -&gt; getItem().getAccount().getCurrency());
        myWithheld.setDeemedCurrency(() -&gt; getItem().getAccount().getCurrency());
    }

    /**
     * Build securities subPanel.
     * @param pFactory the GUI factory
     */
    private void buildSecuritiesPanel(final TethysUIFactory&lt;?&gt; pFactory) {
        /* Create a new panel */
        theFieldSet.newPanel(TAB_SECURITIES);

        /* Allocate fields */
        final TethysUIFieldFactory myFields = pFactory.fieldFactory();
        final TethysUIUnitsEditField myAccountUnits = myFields.newUnitsField();
        final TethysUIUnitsEditField myPartnerUnits = myFields.newUnitsField();
        final TethysUIRatioEditField myDilution = myFields.newRatioField();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportBalanceSheet.html#L309">309</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportBalanceSheet.html#L356">356</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportBalanceSheet.html#L403">403</a></td></tr>
<tr class="a">
<td colspan="2">
<pre>final MoneyWiseDepositCategory myCurr = myBucket.getAccountCategory();
            if (!MetisDataDifference.isEqual(myCurr.getParentCategory(), myCategory)) {
                continue;
            }

            /* Access bucket name */
            final String myName = myBucket.getName();

            /* Access values */
            final MoneyWiseXAnalysisAccountValues myValues = myBucket.getValues();
            final MoneyWiseXAnalysisAccountValues myBaseValues = myBucket.getBaseValues();

            /* Create the SubCategory row */
            theBuilder.startRow(myTable);
            theBuilder.makeDelayLinkCell(myTable, myName, myCurr.getSubCategory());
            theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
            theBuilder.makeTotalCell(myTable, myBaseValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));
            theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUEDELTA));

            /* Note the delayed subTable */
            setDelayedTable(myName, myTable, myBucket);
        }

        /* Embed the table correctly */
        theBuilder.embedTable(myTable, pCategory.getName());
    }

    /**
     * Build a category report.
     * @param pParent the table parent
     * @param pCategory the category bucket
     */
    private void makeCashCategoryReport(final MetisHTMLTable pParent,</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportBalanceSheet.html#L309">309</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportBalanceSheet.html#L356">356</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportBalanceSheet.html#L403">403</a></td></tr>
<tr class="a">
<td colspan="2">
<pre>final MoneyWiseDepositCategory myCurr = myBucket.getAccountCategory();
            if (!MetisDataDifference.isEqual(myCurr.getParentCategory(), myCategory)) {
                continue;
            }

            /* Access bucket name */
            final String myName = myBucket.getName();

            /* Access values */
            final MoneyWiseAnalysisAccountValues myValues = myBucket.getValues();
            final MoneyWiseAnalysisAccountValues myBaseValues = myBucket.getBaseValues();

            /* Create the SubCategory row */
            theBuilder.startRow(myTable);
            theBuilder.makeDelayLinkCell(myTable, myName, myCurr.getSubCategory());
            theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
            theBuilder.makeTotalCell(myTable, myBaseValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));
            theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUEDELTA));

            /* Note the delayed subTable */
            setDelayedTable(myName, myTable, myBucket);
        }

        /* Embed the table correctly */
        theBuilder.embedTable(myTable, pCategory.getName());
    }

    /**
     * Build a category report.
     * @param pParent the table parent
     * @param pCategory the category bucket
     */
    private void makeCashCategoryReport(final MetisHTMLTable pParent,</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWiseLoanDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWiseLoanDialog.html#L125">125</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWisePortfolioDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWisePortfolioDialog.html#L123">123</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>myCategoryButton.setMenuConfigurator(c -&gt; buildCategoryMenu(c, getItem()));
        myParentButton.setMenuConfigurator(c -&gt; buildParentMenu(c, getItem()));
        myCurrencyButton.setMenuConfigurator(c -&gt; buildCurrencyMenu(c, getItem()));
        final Map&lt;Boolean, TethysUIIconMapSet&lt;Boolean&gt;&gt; myMapSets = MoneyWiseIcon.configureLockedIconButton(pFactory);
        myClosedButton.setIconMapSet(() -&gt; myMapSets.get(theClosedState));

        /* Configure validation checks */
        myName.setValidator(this::isValidName);
        myDesc.setValidator(this::isValidDesc);
    }

    /**
     * Build account subPanel.
     * @param pFactory the GUI factory
     */
    private void buildAccountPanel(final TethysUIFactory&lt;?&gt; pFactory) {
        /* Create a new panel */
        theFieldSet.newPanel(TAB_ACCOUNT);

        /* Allocate fields */
        final TethysUIFieldFactory myFields = pFactory.fieldFactory();
        final TethysUICharArrayEditField mySortCode = myFields.newCharArrayField();
        final TethysUICharArrayEditField myAccount = myFields.newCharArrayField();
        final TethysUICharArrayEditField myReference = myFields.newCharArrayField();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportCapitalGains.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportCapitalGains.html#L423">423</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportCapitalGains.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportCapitalGains.html#L417">417</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>private void formatSubtraction(final MoneyWiseXAnalysisSecurityAttr pAttr,
                                   final Object pValue,
                                   final OceanusDecimal pFirst,
                                   final OceanusDecimal pSecond) {
        /* Ensure that we have an attribute table */
        ensureAttrTable();

        /* Format the attribute */
        theBuilder.startRow(theAttrTable);
        theBuilder.makeValueCell(theAttrTable, pAttr);
        theBuilder.makeValueCell(theAttrTable, formatSubtraction(pFirst, pSecond));
        theBuilder.makeValueCell(theAttrTable, pValue);
    }

    /**
     * Format a subtraction.
     * @param pFirst the first item
     * @param pSecond the second item
     * @return the formatted subtraction
     */
    private String formatSubtraction(final OceanusDecimal pFirst,
                                     final OceanusDecimal pSecond) {
        return formatCombination(pFirst, pSecond, '-');
    }

    /**
     * Format a combination.
     * @param pFirst the first item
     * @param pSecond the second item
     * @param pSymbol the symbol
     * @return the formatted combination
     */
    private String formatCombination(final OceanusDecimal pFirst,
                                     final OceanusDecimal pSecond,
                                     final char pSymbol) {
        theStringBuilder.setLength(0);
        theStringBuilder.append(theFormatter.formatObject(pFirst));
        theStringBuilder.append(pSymbol);
        theStringBuilder.append(theFormatter.formatObject(pSecond));
        return theStringBuilder.toString();
    }

    /**
     * Format a Transfer.
     * @param pEvent the event
     * @param pValues the values for the transaction
     */
    private void formatTransfer(final MoneyWiseXAnalysisEvent pEvent,</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseAssetBase.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseAssetBase.html#L442">442</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseCategoryBase.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseCategoryBase.html#L271">271</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>return isClosed();
    }

    /**
     * Set name value.
     * @param pValue the value
     * @throws OceanusException on error
     */
    private void setValueName(final String pValue) throws OceanusException {
        setEncryptedValue(PrometheusDataResource.DATAITEM_FIELD_NAME, pValue);
    }

    /**
     * Set name value.
     * @param pBytes the value
     * @throws OceanusException on error
     */
    private void setValueName(final byte[] pBytes) throws OceanusException {
        setEncryptedValue(PrometheusDataResource.DATAITEM_FIELD_NAME, pBytes, String.class);
    }

    /**
     * Set name value.
     * @param pValue the value
     */
    private void setValueName(final PrometheusEncryptedPair pValue) {
        getValues().setUncheckedValue(PrometheusDataResource.DATAITEM_FIELD_NAME, pValue);
    }

    /**
     * Set description value.
     * @param pValue the value
     * @throws OceanusException on error
     */
    private void setValueDesc(final String pValue) throws OceanusException {
        setEncryptedValue(PrometheusDataResource.DATAITEM_FIELD_DESC, pValue);
    }

    /**
     * Set description value.
     * @param pBytes the value
     * @throws OceanusException on error
     */
    private void setValueDesc(final byte[] pBytes) throws OceanusException {
        setEncryptedValue(PrometheusDataResource.DATAITEM_FIELD_DESC, pBytes, String.class);
    }

    /**
     * Set description value.
     * @param pValue the value
     */
    private void setValueDesc(final PrometheusEncryptedPair pValue) {
        getValues().setUncheckedValue(PrometheusDataResource.DATAITEM_FIELD_DESC, pValue);
    }

    /**
     * Set category value.
     * @param pValue the value
     */
    private void setValueCategory(final MoneyWiseAssetCategory pValue) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\dialog\MoneyWiseXTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/dialog/MoneyWiseXTransactionDialog.html#L369">369</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\dialog\MoneyWiseTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/dialog/MoneyWiseTransactionDialog.html#L375">375</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseTransaction myTrans = getItem().getTransaction();
        final boolean bIsReconciled = myTrans.isReconciled();
        final boolean bIsLocked = myTrans.isLocked();

        /* Determine whether the comments field should be visible */
        boolean bShowField = isEditable || myTrans.getComments() != null;
        theFieldSet.setFieldVisible(MoneyWiseTransInfoClass.COMMENTS, bShowField);

        /* Determine whether the reference field should be visible */
        bShowField = isEditable || myTrans.getReference() != null;
        theFieldSet.setFieldVisible(MoneyWiseTransInfoClass.REFERENCE, bShowField);

        /* Determine whether the tags field should be visible */
        bShowField = isEditable || myTrans.getTransactionTags() != null;
        theFieldSet.setFieldVisible(MoneyWiseTransInfoClass.TRANSTAG, bShowField);

        /* Determine whether the partnerAmount field should be visible */
        boolean bEditField = isEditable &amp;&amp; isEditableField(myTrans, MoneyWiseTransInfoClass.PARTNERAMOUNT);
        bShowField = bEditField || myTrans.getPartnerAmount() != null;
        theFieldSet.setFieldVisible(MoneyWiseTransInfoClass.PARTNERAMOUNT, bShowField);
        theFieldSet.setFieldEditable(MoneyWiseTransInfoClass.PARTNERAMOUNT, bEditField);

        /* Determine whether the taxCredit field should be visible */
        bEditField = isEditable &amp;&amp; isEditableField(myTrans, MoneyWiseTransInfoClass.TAXCREDIT);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseAssetBase.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseAssetBase.html#L442">442</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseRegion.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseRegion.html#L195">195</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseTransTag.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseTransTag.html#L195">195</a></td></tr>
<tr class="a">
<td colspan="2">
<pre>return isClosed();
    }

    /**
     * Set name value.
     * @param pValue the value
     * @throws OceanusException on error
     */
    private void setValueName(final String pValue) throws OceanusException {
        setEncryptedValue(PrometheusDataResource.DATAITEM_FIELD_NAME, pValue);
    }

    /**
     * Set name value.
     * @param pBytes the value
     * @throws OceanusException on error
     */
    private void setValueName(final byte[] pBytes) throws OceanusException {
        setEncryptedValue(PrometheusDataResource.DATAITEM_FIELD_NAME, pBytes, String.class);
    }

    /**
     * Set name value.
     * @param pValue the value
     */
    private void setValueName(final PrometheusEncryptedPair pValue) {
        getValues().setUncheckedValue(PrometheusDataResource.DATAITEM_FIELD_NAME, pValue);
    }

    /**
     * Set description value.
     * @param pValue the value
     * @throws OceanusException on error
     */
    private void setValueDesc(final String pValue) throws OceanusException {
        setEncryptedValue(PrometheusDataResource.DATAITEM_FIELD_DESC, pValue);
    }

    /**
     * Set description value.
     * @param pBytes the value
     * @throws OceanusException on error
     */
    private void setValueDesc(final byte[] pBytes) throws OceanusException {
        setEncryptedValue(PrometheusDataResource.DATAITEM_FIELD_DESC, pBytes, String.class);
    }

    /**
     * Set description value.
     * @param pValue the value
     */
    private void setValueDesc(final PrometheusEncryptedPair pValue) {
        getValues().setUncheckedValue(PrometheusDataResource.DATAITEM_FIELD_DESC, pValue);
    }</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\quicken\file\MoneyWiseQIFPortfolioBuilder.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/quicken/file/MoneyWiseQIFPortfolioBuilder.html#L696">696</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\quicken\file\MoneyWiseQIFPortfolioBuilder.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/quicken/file/MoneyWiseQIFPortfolioBuilder.html#L813">813</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final OceanusMoney myOutAmount = new OceanusMoney(myTaxCredit);
            myOutAmount.negate();

            /* If we are using a holding account */
            if (useHoldingAccount) {
                /* Access Holding Account */
                final MoneyWiseQIFAccountEvents myHolding = theFile.registerHoldingAccount(myPortfolio);

                /* Create an event */
                final MoneyWiseQIFEvent myHoldEvent = new MoneyWiseQIFEvent(theFile, pTrans);
                myHoldEvent.recordAmount(new OceanusMoney());
                myHoldEvent.recordPayee(myTaxPayee);

                /* record the splits */
                myHoldEvent.recordSplitRecord(myQPortfolio.getAccount(), myTaxCredit, myPortfolio.getName());
                myHoldEvent.recordSplitRecord(myTaxCategory, myOutAmount, myTaxPayee.getName());

                /* Add to event list */
                myHolding.addEvent(myHoldEvent);

                /* else we can do this properly */
            } else {
                /* Create a tax credit event */
                myEvent = new MoneyWiseQIFPortfolioEvent(theFile, pTrans, MoneyWiseQActionType.CASH);
                myEvent.recordAmount(myOutAmount);
                myEvent.recordPayee(myTaxPayee);
                myEvent.recordCategory(myTaxCategory);

                /* Add to event list */
                myQPortfolio.addEvent(myEvent);
            }
        }
    }</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseCategoryBase.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseCategoryBase.html#L152">152</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseRegion.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseRegion.html#L146">146</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseTransTag.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseTransTag.html#L146">146</a></td></tr>
<tr class="a">
<td colspan="2">
<pre>return getParentCategory() != null;
        }

        /* Pass call on */
        return super.includeXmlField(pField);
    }

    @Override
    public String getName() {
        return getValues().getValue(PrometheusDataResource.DATAITEM_FIELD_NAME, String.class);
    }

    /**
     * Obtain Encrypted name.
     * @return the bytes
     */
    public byte[] getNameBytes() {
        return getValues().getEncryptedBytes(PrometheusDataResource.DATAITEM_FIELD_NAME);
    }

    /**
     * Obtain Encrypted Name Field.
     * @return the Field
     */
    private PrometheusEncryptedPair getNameField() {
        return getValues().getEncryptedPair(PrometheusDataResource.DATAITEM_FIELD_NAME);
    }

    /**
     * Obtain Description.
     * @return the description
     */
    public String getDesc() {
        return getValues().getValue(PrometheusDataResource.DATAITEM_FIELD_DESC, String.class);
    }

    /**
     * Obtain Encrypted description.
     * @return the bytes
     */
    public byte[] getDescBytes() {
        return getValues().getEncryptedBytes(PrometheusDataResource.DATAITEM_FIELD_DESC);
    }

    /**
     * Obtain Encrypted Description Field.
     * @return the Field
     */
    private PrometheusEncryptedPair getDescField() {
        return getValues().getEncryptedPair(PrometheusDataResource.DATAITEM_FIELD_DESC);
    }</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\quicken\file\MoneyWiseQIFLine.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/quicken/file/MoneyWiseQIFLine.html#L962">962</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\quicken\file\MoneyWiseQIFLine.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/quicken/file/MoneyWiseQIFLine.html#L1242">1242</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>myLine = pLine.substring(i + 1);
            }

            /* If the line contains classes */
            if (myLine.contains(QIF_CLASS)) {
                /* drop preceding data */
                final int i = myLine.indexOf(QIF_CLASS);
                myLine = myLine.substring(i + 1);

                /* Build list of classes */
                final String[] myClasses = myLine.split(QIF_CLASSSEP);
                final List&lt;MoneyWiseQIFClass&gt; myList = new ArrayList&lt;&gt;();
                for (String myClass : myClasses) {
                    myList.add(pFile.getClass(myClass));
                }

                /* Return the classes */
                return myList;
            }

            /* Return no classes */
            return null;
        }

        @Override
        public boolean equals(final Object pThat) {
            /* Handle trivial cases */
            if (this == pThat) {
                return true;
            }
            if (pThat == null) {
                return false;
            }

            /* Check class */
            if (!getClass().equals(pThat.getClass())) {
                return false;
            }

            /* Cast correctly */
            final MoneyWiseQIFXferAccountLine&lt;?&gt; myLine = (MoneyWiseQIFXferAccountLine&lt;?&gt;) pThat;</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXCashAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXCashAnalysisSelect.html#L263">263</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseCashAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseCashAnalysisSelect.html#L266">266</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>protected MoneyWiseXAnalysisCashBucket getDefaultCash(final MoneyWiseCashCategory pCategory) {
        return theCash.getDefaultCash(pCategory);
    }

    /**
     * Handle new Category.
     */
    private void handleNewCategory() {
        /* Select the new category */
        if (theState.setCategory(theCatButton.getValue())) {
            theState.applyState();
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }
    }

    /**
     * Handle new Cash.
     */
    private void handleNewCash() {
        /* Select the new cash */
        if (theState.setCash(theCashButton.getValue())) {
            theState.applyState();
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }
    }

    /**
     * Build Category menu.
     */
    private void buildCategoryMenu() {
        /* Reset the popUp menu */
        theCategoryMenu.removeAllItems();

        /* Create a simple map for top-level categories */
        final Map&lt;String, TethysUIScrollSubMenu&lt;MoneyWiseCashCategory&gt;&gt; myMap = new HashMap&lt;&gt;();

        /* Record active item */
        final MoneyWiseCashCategory myCurrent = theState.getCategory();
        TethysUIScrollItem&lt;MoneyWiseCashCategory&gt; myActive = null;

        /* Loop through the available category values */
        final Iterator&lt;MoneyWiseXAnalysisCashCategoryBucket&gt; myIterator = theCategories.iterator();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXDepositAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXDepositAnalysisSelect.html#L258">258</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseDepositAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseDepositAnalysisSelect.html#L261">261</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>protected MoneyWiseXAnalysisDepositBucket getDefaultDeposit(final MoneyWiseDepositCategory pCategory) {
        return theDeposits.getDefaultDeposit(pCategory);
    }

    /**
     * Handle new Category.
     */
    private void handleNewCategory() {
        /* Select the new category */
        if (theState.setCategory(theCatButton.getValue())) {
            theState.applyState();
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }
    }

    /**
     * Handle new Deposit.
     */
    private void handleNewDeposit() {
        /* Select the new deposit */
        if (theState.setDeposit(theDepositButton.getValue())) {
            theState.applyState();
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }
    }

    /**
     * Build Category menu.
     */
    private void buildCategoryMenu() {
        /* Reset the popUp menu */
        theCategoryMenu.removeAllItems();

        /* Create a simple map for top-level categories */
        final Map&lt;String, TethysUIScrollSubMenu&lt;MoneyWiseDepositCategory&gt;&gt; myMap = new HashMap&lt;&gt;();

        /* Record active item */
        final MoneyWiseDepositCategory myCurrent = theState.getCategory();
        TethysUIScrollItem&lt;MoneyWiseDepositCategory&gt; myActive = null;

        /* Re-Loop through the available category values */
        final Iterator&lt;MoneyWiseXAnalysisDepositCategoryBucket&gt; myIterator = theCategories.iterator();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXLoanAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXLoanAnalysisSelect.html#L258">258</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseLoanAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseLoanAnalysisSelect.html#L261">261</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>protected MoneyWiseXAnalysisLoanBucket getDefaultLoan(final MoneyWiseLoanCategory pCategory) {
        return theLoans.getDefaultLoan(pCategory);
    }

    /**
     * Handle new Category.
     */
    private void handleNewCategory() {
        /* Select the new category */
        if (theState.setCategory(theCatButton.getValue())) {
            theState.applyState();
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }
    }

    /**
     * Handle new Loan.
     */
    private void handleNewLoan() {
        /* Select the new loan */
        if (theState.setLoan(theLoanButton.getValue())) {
            theState.applyState();
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }
    }

    /**
     * Build Category menu.
     */
    private void buildCategoryMenu() {
        /* Reset the popUp menu */
        theCategoryMenu.removeAllItems();

        /* Create a simple map for top-level categories */
        final Map&lt;String, TethysUIScrollSubMenu&lt;MoneyWiseLoanCategory&gt;&gt; myMap = new HashMap&lt;&gt;();

        /* Record active item */
        final MoneyWiseLoanCategory myCurrent = theState.getCategory();
        TethysUIScrollItem&lt;MoneyWiseLoanCategory&gt; myActive = null;

        /* Re-Loop through the available category values */
        final Iterator&lt;MoneyWiseXAnalysisLoanCategoryBucket&gt; myIterator = theCategories.iterator();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\dialog\MoneyWiseXTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/dialog/MoneyWiseXTransactionDialog.html#L431">431</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\dialog\MoneyWiseTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/dialog/MoneyWiseTransactionDialog.html#L455">455</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theFieldSet.setFieldEditable(MoneyWiseTransInfoClass.PARTNERDELTAUNITS, bEditField);

        /* Determine whether the dilution field should be visible */
        bEditField = isEditable &amp;&amp; isEditableField(myTrans, MoneyWiseTransInfoClass.DILUTION);
        bShowField = bEditField || myTrans.getDilution() != null;
        theFieldSet.setFieldVisible(MoneyWiseTransInfoClass.DILUTION, bShowField);
        theFieldSet.setFieldEditable(MoneyWiseTransInfoClass.DILUTION, bEditField);

        /* Determine whether the returnedAccount field should be visible */
        bEditField = isEditable &amp;&amp; isEditableField(myTrans, MoneyWiseTransInfoClass.RETURNEDCASHACCOUNT);
        bShowField = bEditField || myTrans.getReturnedCashAccount() != null;
        theFieldSet.setFieldVisible(MoneyWiseTransInfoClass.RETURNEDCASHACCOUNT, bShowField);
        theFieldSet.setFieldEditable(MoneyWiseTransInfoClass.RETURNEDCASHACCOUNT, bEditField);

        /* Determine whether the returnedCash field should be visible */
        bEditField = isEditable &amp;&amp; isEditableField(myTrans, MoneyWiseTransInfoClass.RETURNEDCASH);
        bShowField = bEditField || myTrans.getReturnedCash() != null;
        theFieldSet.setFieldVisible(MoneyWiseTransInfoClass.RETURNEDCASH, bShowField);
        theFieldSet.setFieldEditable(MoneyWiseTransInfoClass.RETURNEDCASH, bEditField);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseTransInfoSet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseTransInfoSet.html#L213">213</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\validate\MoneyWiseValidateTransInfoSet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/validate/MoneyWiseValidateTransInfoSet.html#L635">635</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>}
    }

    /**
     * Determine if AccountDeltaUnits can/mustBe/mustNotBe positive.
     * @param pDir the direction
     * @param pClass the category class
     * @return the status
     */
    public static MetisFieldRequired isAccountUnitsPositive(final MoneyWiseAssetDirection pDir,
                                                            final MoneyWiseTransCategoryClass pClass) {
        switch (pClass) {
            case TRANSFER:
                return pDir.isFrom()
                        ? MetisFieldRequired.MUSTEXIST
                        : MetisFieldRequired.NOTALLOWED;
            case UNITSADJUST:
            case STOCKSPLIT:
                return MetisFieldRequired.CANEXIST;
            case INHERITED:
            case DIVIDEND:
            case STOCKRIGHTSISSUE:
                return MetisFieldRequired.MUSTEXIST;
            case STOCKDEMERGER:
            default:
                return MetisFieldRequired.NOTALLOWED;
        }
    }

    /**
     * Determine if PartnerDeltaUnits can/mustBe/mustNotBe positive.
     * @param pDir the direction
     * @param pClass the category class
     * @return the status
     */
    public static MetisFieldRequired isPartnerUnitsPositive(final MoneyWiseAssetDirection pDir,
                                                            final MoneyWiseTransCategoryClass pClass) {
        switch (pClass) {
            case TRANSFER:
                return pDir.isTo()
                        ? MetisFieldRequired.MUSTEXIST
                        : MetisFieldRequired.NOTALLOWED;
            case STOCKDEMERGER:
            case SECURITYREPLACE:
            case STOCKTAKEOVER:
            case STOCKRIGHTSISSUE:
                return MetisFieldRequired.MUSTEXIST;
            default:
                return MetisFieldRequired.NOTALLOWED;
        }
    }</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseAccountPanel.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseAccountPanel.html#L595">595</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseCategoryPanel.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseCategoryPanel.html#L589">589</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theEventManager.fireEvent(PrometheusDataEvent.ADJUSTVISIBILITY);
    }

    /**
     * handleErrorPane.
     */
    private void handleErrorPane() {
        /* Determine whether we have an error */
        final boolean isError = theError.hasError();

        /* Hide selection panel on error */
        theSelectPanel.setVisible(!isError);

        /* Lock card panel */
        theCardPanel.setEnabled(!isError);

        /* Lock Action Buttons */
        theActionButtons.setEnabled(!isError);
    }

    /**
     * handleSelection.
     */
    private void handleSelection() {
        /* Cancel any editing */
        cancelEditing();

        /* Show selected panel */
        showPanel(theSelectButton.getValue());
    }

    /**
     * handle Action Buttons.
     * @param pEvent the event
     */
    private void handleActionButtons(final OceanusEvent&lt;PrometheusUIEvent&gt; pEvent) {
        /* Cancel editing */
        cancelEditing();

        /* Perform the command */
        theEditSet.processCommand(pEvent.getEventId(), theError);
    }

    /**
     * handle GoTo Event.
     * @param pEvent the event
     */
    private void handleGoToEvent(final OceanusEvent&lt;PrometheusDataEvent&gt; pEvent) {
        /* Access details */
        @SuppressWarnings(&quot;unchecked&quot;)
        final PrometheusGoToEvent&lt;MoneyWiseGoToId&gt; myEvent = pEvent.getDetails(PrometheusGoToEvent.class);

        /* Access event and obtain details */
        switch (myEvent.getId()) {
            /* Pass through the event */
            case STATEMENT:
            case CATEGORY:</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseRegionTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseRegionTable.html#L110">110</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseTransTagTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseTransTagTable.html#L110">110</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>.setOnCommit((r, v) -&gt; updateField(MoneyWiseRegion::setDescription, r, v));

        /* Create the Active column */
        final TethysUIIconMapSet&lt;MetisAction&gt; myActionMapSet = MetisIcon.configureStatusIconButton(pView.getGuiFactory());
        myTable.declareIconColumn(PrometheusDataResource.DATAITEM_TOUCH, MetisAction.class)
                .setIconMapSet(r -&gt; myActionMapSet)
                .setCellValueFactory(r -&gt; r.isActive() ? MetisAction.ACTIVE : MetisAction.DELETE)
                .setName(MoneyWiseUIResource.STATICDATA_ACTIVE.getValue())
                .setEditable(true)
                .setCellEditable(r -&gt; !r.isActive())
                .setColumnWidth(WIDTH_ICON)
                .setOnCommit((r, v) -&gt; updateField(this::deleteRow, r, v));

        /* Add listeners */
        myNewButton.getEventRegistrar().addEventListener(e -&gt; addNewItem());</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportBalanceSheet.html#L116">116</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportBalanceSheet.html#L116">116</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseXAnalysisPortfolioBucketList myPortfolios = theAnalysis.getPortfolios();
        final OceanusDateRange myDateRange = theAnalysis.getDateRange();

        /* Create the totals */
        final OceanusMoney myTotal = new OceanusMoney();
        final OceanusMoney myBase = new OceanusMoney();
        final OceanusMoney myDelta = new OceanusMoney();

        /* Start the report */
        final Element myBody = theBuilder.startReport();
        theBuilder.makeTitle(myBody, TEXT_TITLE, theFormatter.formatObject(myDateRange));

        /* Initialise the table */
        final MetisHTMLTable myTable = theBuilder.startTable(myBody);
        theBuilder.startTotalRow(myTable);
        theBuilder.makeTitleCell(myTable);
        theBuilder.makeTitleCell(myTable, theFormatter.formatObject(myDateRange.getEnd()));
        theBuilder.makeTitleCell(myTable, theFormatter.formatObject(myDateRange.getStart()));
        theBuilder.makeTitleCell(myTable, MoneyWiseXReportBuilder.TEXT_PROFIT);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\quicken\file\MoneyWiseQIFBuilder.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/quicken/file/MoneyWiseQIFBuilder.html#L954">954</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\quicken\file\MoneyWiseQIFBuilder.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/quicken/file/MoneyWiseQIFBuilder.html#L992">992</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>protected void processCashRecovery(final MoneyWisePayee pPayee,
                                       final MoneyWiseCash pCash,
                                       final MoneyWiseTransaction pTrans) {
        /* Access the Payee details */
        final MoneyWiseQIFPayee myPayee = theFile.registerPayee(pPayee);

        /* Access the Category details */
        final MoneyWiseQIFEventCategory myCategory = theFile.registerCategory(pTrans.getCategory());
        final MoneyWiseQIFEventCategory myAutoCategory = theFile.registerCategory(pCash.getAutoExpense());

        /* Access the Account details */
        final MoneyWiseQIFAccountEvents myAccount = theFile.registerAccount(pCash);

        /* Obtain classes */
        final List&lt;MoneyWiseQIFClass&gt; myList = getTransactionClasses(pTrans);

        /* Access the amount */
        final OceanusMoney myInAmount = pTrans.getAmount();
        final OceanusMoney myOutAmount = new OceanusMoney(myInAmount);
        myOutAmount.negate();

        /* Create a new event */
        final MoneyWiseQIFEvent myEvent = new MoneyWiseQIFEvent(theFile, pTrans);
        myEvent.recordAmount(new OceanusMoney());
        myEvent.recordPayee(myPayee);
        myEvent.recordSplitRecord(myCategory, myList, myInAmount, myPayee.getName());</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXAnalysisSelect.html#L366">366</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseAnalysisSelect.html#L366">366</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseXStatementSelect mySelect = new MoneyWiseXStatementSelect(theRangeSelect, new MoneyWiseXAnalysisAllFilter());
        selectStatement(mySelect);

        /* Access the menus */
        theTypeMenu = theFilterTypeButton.getMenu();
        theBucketMenu = theBucketButton.getMenu();
        theColumnMenu = theColumnButton.getMenu();

        /* Create the listeners */
        OceanusEventRegistrar&lt;TethysUIEvent&gt; myRegistrar = theFilterTypeButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleFilterType());
        theFilterTypeButton.setMenuConfigurator(e -&gt; buildAnalysisTypeMenu());
        myRegistrar = theBucketButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewBucket());
        theBucketButton.setMenuConfigurator(e -&gt; buildBucketMenu());
        myRegistrar = theColumnButton.getEventRegistrar();
        myRegistrar.addEventListener(TethysUIEvent.NEWVALUE, e -&gt; handleNewColumns());
        theColumnButton.setMenuConfigurator(e -&gt; buildColumnsMenu());</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWiseDepositDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWiseDepositDialog.html#L148">148</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWiseLoanDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWiseLoanDialog.html#L122">122</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theFieldSet.addField(MoneyWiseBasicResource.ASSET_CLOSED, myClosedButton, MoneyWiseDeposit::isClosed);

        /* Configure the menuBuilders */
        myCategoryButton.setMenuConfigurator(c -&gt; buildCategoryMenu(c, getItem()));
        myParentButton.setMenuConfigurator(c -&gt; buildParentMenu(c, getItem()));
        myCurrencyButton.setMenuConfigurator(c -&gt; buildCurrencyMenu(c, getItem()));
        final Map&lt;Boolean, TethysUIIconMapSet&lt;Boolean&gt;&gt; myMapSets = MoneyWiseIcon.configureLockedIconButton(pFactory);
        myClosedButton.setIconMapSet(() -&gt; myMapSets.get(theClosedState));

        /* Configure validation checks */
        myName.setValidator(this::isValidName);
        myDesc.setValidator(this::isValidDesc);
     }

    /**
     * Build account subPanel.
     * @param pFactory the GUI factory
     */
    private void buildAccountPanel(final TethysUIFactory&lt;?&gt; pFactory) {
        /* Create a new panel */
        theFieldSet.newPanel(TAB_ACCOUNT);

        /* Allocate fields */
        final TethysUIFieldFactory myFields = pFactory.fieldFactory();
        final TethysUIDateButtonField myMaturity = myFields.newDateField();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWiseDepositRateTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWiseDepositRateTable.html#L108">108</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWiseSecurityPriceTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWiseSecurityPriceTable.html#L103">103</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>.setOnCommit((r, v) -&gt; updateField(MoneyWiseDepositRate::setEndDate, r, v));

        /* Create the Active column */
        final TethysUIIconMapSet&lt;MetisAction&gt; myActionMapSet = MetisIcon.configureStatusIconButton(pView.getGuiFactory());
        theActiveColumn = myTable.declareIconColumn(PrometheusDataResource.DATAITEM_TOUCH, MetisAction.class)
                .setIconMapSet(r -&gt; myActionMapSet)
                .setCellValueFactory(r -&gt; r.isActive() ? MetisAction.ACTIVE : MetisAction.DELETE)
                .setName(MoneyWiseUIResource.STATICDATA_ACTIVE.getValue())
                .setEditable(true)
                .setCellEditable(r -&gt; !r.isActive())
                .setColumnWidth(WIDTH_ICON)
                .setOnCommit((r, v) -&gt; updateField(this::deleteRow, r, v));
    }

    @Override
    public void refreshData() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseAssetBase.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseAssetBase.html#L388">388</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseCategoryBase.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseCategoryBase.html#L157">157</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseRegion.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseRegion.html#L151">151</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseTransTag.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseTransTag.html#L151">151</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>}

    @Override
    public String getName() {
        return getValues().getValue(PrometheusDataResource.DATAITEM_FIELD_NAME, String.class);
    }

    /**
     * Obtain Encrypted name.
     * @return the bytes
     */
    public byte[] getNameBytes() {
        return getValues().getEncryptedBytes(PrometheusDataResource.DATAITEM_FIELD_NAME);
    }

    /**
     * Obtain Encrypted Name Field.
     * @return the Field
     */
    private PrometheusEncryptedPair getNameField() {
        return getValues().getEncryptedPair(PrometheusDataResource.DATAITEM_FIELD_NAME);
    }

    /**
     * Obtain Description.
     * @return the description
     */
    public String getDesc() {
        return getValues().getValue(PrometheusDataResource.DATAITEM_FIELD_DESC, String.class);
    }

    /**
     * Obtain Encrypted description.
     * @return the bytes
     */
    public byte[] getDescBytes() {
        return getValues().getEncryptedBytes(PrometheusDataResource.DATAITEM_FIELD_DESC);
    }

    /**
     * Obtain Encrypted Description Field.
     * @return the Field
     */
    private PrometheusEncryptedPair getDescField() {
        return getValues().getEncryptedPair(PrometheusDataResource.DATAITEM_FIELD_DESC);
    }</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXPortfolioAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXPortfolioAnalysisSelect.html#L219">219</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXSecurityAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXSecurityAnalysisSelect.html#L268">268</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>if (theState.setPortfolio(thePortButton.getValue())) {
            theState.applyState();
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }
    }

    /**
     * Build Portfolio menu.
     */
    private void buildPortfolioMenu() {
        /* Reset the popUp menu */
        thePortfolioMenu.removeAllItems();

        /* Record active item */
        TethysUIScrollItem&lt;MoneyWiseXAnalysisPortfolioBucket&gt; myActive = null;
        final MoneyWiseXAnalysisPortfolioBucket myCurr = theState.getPortfolio();

        /* Loop through the available portfolio values */
        final Iterator&lt;MoneyWiseXAnalysisPortfolioBucket&gt; myIterator = thePortfolios.iterator();
        while (myIterator.hasNext()) {
            final MoneyWiseXAnalysisPortfolioBucket myBucket = myIterator.next();

            /* Create a new MenuItem and add it to the popUp */
            final TethysUIScrollItem&lt;MoneyWiseXAnalysisPortfolioBucket&gt; myItem = thePortfolioMenu.addItem(myBucket);

            /* If this is the active bucket */
            if (myBucket.equals(myCurr)) {
                /* Record it */
                myActive = myItem;
            }
        }

        /* Ensure active item is visible */
        if (myActive != null) {
            myActive.scrollToItem();
        }
    }

    /**
     * SavePoint values.
     */
    private final class MoneyWisePortfolioState {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\panel\MoneyWiseXReportTab.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/panel/MoneyWiseXReportTab.html#L132">132</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\panel\MoneyWiseReportTab.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/panel/MoneyWiseReportTab.html#L125">125</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final TethysUIFactory&lt;?&gt; myFactory = pView.getGuiFactory();

        /* Create the event manager */
        theEventManager = new OceanusEventManager&lt;&gt;();

        /* Create the Panel */
        final TethysUIPaneFactory myPanes = myFactory.paneFactory();
        thePanel = myPanes.newBorderPane();

        /* Create the top level debug entry for this view */
        final MetisViewerManager myDataMgr = theView.getViewerManager();
        final MetisViewerEntry mySection = theView.getViewerEntry(PrometheusViewerEntryId.VIEW);
        final MetisViewerEntry myReport = myDataMgr.newEntry(mySection, NLS_DATAENTRY);
        theSpotEntry = myDataMgr.newEntry(myReport, PrometheusViewerEntryId.ANALYSIS.toString());
        theSpotEntry.setVisible(false);

        /* Create the HTML Pane */
        theHTMLPane = myFactory.controlFactory().newHTMLManager();

        /* Create Report Manager */
        theManager = new MetisReportManager&lt;&gt;(new MetisReportHTMLBuilder(pView.getDataFormatter()));

        /* Create the report builder */
        theBuilder = new MoneyWiseXReportBuilder(theManager);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWisePortfolioAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWisePortfolioAnalysisSelect.html#L222">222</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseSecurityAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseSecurityAnalysisSelect.html#L271">271</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>if (theState.setPortfolio(thePortButton.getValue())) {
            theState.applyState();
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }
    }

    /**
     * Build Portfolio menu.
     */
    private void buildPortfolioMenu() {
        /* Reset the popUp menu */
        thePortfolioMenu.removeAllItems();

        /* Record active item */
        TethysUIScrollItem&lt;MoneyWiseAnalysisPortfolioBucket&gt; myActive = null;
        final MoneyWiseAnalysisPortfolioBucket myCurr = theState.getPortfolio();

        /* Loop through the available portfolio values */
        final Iterator&lt;MoneyWiseAnalysisPortfolioBucket&gt; myIterator = thePortfolios.iterator();
        while (myIterator.hasNext()) {
            final MoneyWiseAnalysisPortfolioBucket myBucket = myIterator.next();

            /* Create a new MenuItem and add it to the popUp */
            final TethysUIScrollItem&lt;MoneyWiseAnalysisPortfolioBucket&gt; myItem = thePortfolioMenu.addItem(myBucket);

            /* If this is the active bucket */
            if (myBucket.equals(myCurr)) {
                /* Record it */
                myActive = myItem;
            }
        }

        /* Ensure active item is visible */
        if (myActive != null) {
            myActive.scrollToItem();
        }
    }

    /**
     * SavePoint values.
     */
    private final class MoneyWisePortfolioState {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXTaxBasisAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXTaxBasisAnalysisSelect.html#L234">234</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseTaxBasisAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseTaxBasisAnalysisSelect.html#L237">237</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>MoneyWiseXAnalysisTaxBasisBucket myTaxBasis = myFilter.getBucket();

            /* Obtain equivalent bucket */
            myTaxBasis = theTaxBases.getMatchingBasis(myTaxBasis);

            /* Set the taxBasis */
            theState.setTheTaxBasis(myTaxBasis);
            theState.setDateRange(myFilter.getDateRange());
            theState.applyState();
        }
    }

    /**
     * Handle new Basis.
     */
    private void handleNewBasis() {
        /* Select the new taxBasis */
        if (theState.setTaxBasis(theBasisButton.getValue())) {
            theState.applyState();
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }
    }

    /**
     * Handle new Account.
     */
    private void handleNewAccount() {
        /* Select the new account */
        if (theState.setTaxBasis(theAccountButton.getValue())) {
            theState.applyState();
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }
    }

    /**
     * Build Basis menu.
     */
    private void buildBasisMenu() {
        /* Reset the popUp menu */
        theTaxMenu.removeAllItems();

        /* Record active item */
        TethysUIScrollItem&lt;MoneyWiseXAnalysisTaxBasisBucket&gt; myActive = null;</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseDeposit.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseDeposit.html#L208">208</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWisePayee.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWisePayee.html#L228">228</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWisePortfolio.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWisePortfolio.html#L241">241</a></td></tr>
<tr class="a">
<td colspan="2">
<pre>? theInfoSet.getValue(MoneyWiseAccountInfoClass.MATURITY, OceanusDate.class)
                : null;
    }

    /**
     * Obtain SortCode.
     * @return the sort code
     */
    public char[] getSortCode() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.SORTCODE, char[].class)
                : null;
    }

    /**
     * Obtain Reference.
     * @return the reference
     */
    public char[] getReference() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.REFERENCE, char[].class)
                : null;
    }

    /**
     * Obtain Account.
     * @return the account
     */
    public char[] getAccount() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.ACCOUNT, char[].class)
                : null;
    }

    /**
     * Obtain Notes.
     * @return the notes
     */
    public char[] getNotes() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.NOTES, char[].class)
                : null;
    }

    @Override
    public OceanusMoney getOpeningBalance() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\database\MoneyWiseTableCash.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/database/MoneyWiseTableCash.html#L93">93</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\database\MoneyWiseTableDeposit.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/database/MoneyWiseTableDeposit.html#L97">97</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\database\MoneyWiseTableLoan.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/database/MoneyWiseTableLoan.html#L97">97</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\database\MoneyWiseTableSecurity.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/database/MoneyWiseTableSecurity.html#L97">97</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>myTableDef.setIntegerValue(iField, pItem.getCategoryId());
        } else if (MoneyWiseStaticDataType.CURRENCY.equals(iField)) {
            myTableDef.setIntegerValue(iField, pItem.getAssetCurrencyId());
        } else if (PrometheusDataResource.DATAITEM_FIELD_NAME.equals(iField)) {
            myTableDef.setBinaryValue(iField, pItem.getNameBytes());
        } else if (PrometheusDataResource.DATAITEM_FIELD_DESC.equals(iField)) {
            myTableDef.setBinaryValue(iField, pItem.getDescBytes());
        } else if (MoneyWiseBasicResource.ASSET_CLOSED.equals(iField)) {
            myTableDef.setBooleanValue(iField, pItem.isClosed());
        } else {
            super.setFieldValue(pItem, iField);
        }
    }
}</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWiseCashDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWiseCashDialog.html#L447">447</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWiseDepositDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWiseDepositDialog.html#L463">463</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWiseLoanDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWiseLoanDialog.html#L406">406</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWisePortfolioDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWisePortfolioDialog.html#L423">423</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWiseSecurityDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWiseSecurityDialog.html#L575">575</a></td></tr>
<tr class="a">
<td colspan="2">
<pre>final MoneyWiseCurrency myCurr = pCash.getAssetCurrency();
        TethysUIScrollItem&lt;MoneyWiseCurrency&gt; myActive = null;

        /* Access Currencies */
        final MoneyWiseCurrencyList myCurrencies = getDataList(MoneyWiseStaticDataType.CURRENCY, MoneyWiseCurrencyList.class);

        /* Loop through the AccountCurrencies */
        final Iterator&lt;MoneyWiseCurrency&gt; myIterator = myCurrencies.iterator();
        while (myIterator.hasNext()) {
            final MoneyWiseCurrency myCurrency = myIterator.next();

            /* Ignore deleted or disabled */
            final boolean bIgnore = myCurrency.isDeleted() || !myCurrency.getEnabled();
            if (bIgnore) {
                continue;
            }

            /* Create a new action for the currency */
            final TethysUIScrollItem&lt;MoneyWiseCurrency&gt; myItem = pMenu.addItem(myCurrency);

            /* If this is the active currency */
            if (myCurrency.equals(myCurr)) {
                /* Record it */
                myActive = myItem;
            }
        }

        /* Ensure active item is visible */
        if (myActive != null) {
            myActive.scrollToItem();
        }
    }
}</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWisePayeeDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWisePayeeDialog.html#L116">116</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWisePortfolioDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWisePortfolioDialog.html#L125">125</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>myTypeButton.setMenuConfigurator(c -&gt; buildPayeeTypeMenu(c, getItem()));
        final Map&lt;Boolean, TethysUIIconMapSet&lt;Boolean&gt;&gt; myMapSets = MoneyWiseIcon.configureLockedIconButton(pFactory);
        myClosedButton.setIconMapSet(() -&gt; myMapSets.get(theClosedState));

        /* Configure validation checks */
        myName.setValidator(this::isValidName);
        myDesc.setValidator(this::isValidDesc);
     }

    /**
     * Build account subPanel.
     * @param pFactory the GUI factory
     */
    private void buildAccountPanel(final TethysUIFactory&lt;?&gt; pFactory) {
        /* Create a new panel */
        theFieldSet.newPanel(TAB_ACCOUNT);

        /* Allocate fields */
        final TethysUIFieldFactory myFields = pFactory.fieldFactory();
        final TethysUICharArrayEditField mySortCode = myFields.newCharArrayField();
        final TethysUICharArrayEditField myAccount = myFields.newCharArrayField();
        final TethysUICharArrayEditField myReference = myFields.newCharArrayField();

        /* Assign the fields to the panel */
        theFieldSet.addField(MoneyWiseAccountInfoClass.SORTCODE, mySortCode, MoneyWisePayee::getSortCode);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\archive\MoneyWiseArchiveAccount.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/archive/MoneyWiseArchiveAccount.html#L547">547</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\archive\MoneyWiseArchiveAccount.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/archive/MoneyWiseArchiveAccount.html#L616">616</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final String myType = pView.getRowCellByIndex(pRow, ++iAdjust).getString();

        /* Skip class */
        ++iAdjust;

        /* Handle closed which may be missing */
        PrometheusSheetCell myCell = pView.getRowCellByIndex(pRow, ++iAdjust);
        Boolean isClosed = Boolean.FALSE;
        if (myCell != null) {
            isClosed = myCell.getBoolean();
        }

        /* Access Parent account */
        final String myParent = pView.getRowCellByIndex(pRow, ++iAdjust).getString();

        /* Skip alias, portfolio, maturity, openingBalance, symbol and region columns */
        ++iAdjust;
        ++iAdjust;
        ++iAdjust;
        ++iAdjust;
        ++iAdjust;
        ++iAdjust;

        /* Handle currency which may be missing */
        myCell = pView.getRowCellByIndex(pRow, ++iAdjust);
        MoneyWiseCurrency myCurrency = theData.getReportingCurrency();
        if (myCell != null) {
            final String myCurrName = myCell.getString();
            myCurrency = theData.getAccountCurrencies().findItemByName(myCurrName);
        }

        /* Build data values */
        final PrometheusDataValues myValues = new PrometheusDataValues(MoneyWiseLoan.OBJECT_NAME);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXCashAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXCashAnalysisSelect.html#L174">174</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseCashAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseCashAnalysisSelect.html#L174">174</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public MoneyWiseXAnalysisCashFilter getFilter() {
        return theState.getFilter();
    }

    @Override
    public boolean isAvailable() {
        return theCash != null
                &amp;&amp; !theCash.isEmpty();
    }

    /**
     * Create SavePoint.
     */
    protected void createSavePoint() {
        /* Create the savePoint */
        theSavePoint = new MoneyWiseCashState(theState);
    }

    /**
     * Restore SavePoint.
     */
    protected void restoreSavePoint() {
        /* Restore the savePoint */
        theState = new MoneyWiseCashState(theSavePoint);

        /* Apply the state */
        theState.applyState();
    }

    @Override
    public void setEnabled(final boolean bEnabled) {
        /* Determine whether there are any Accounts to select */
        final boolean csAvailable = bEnabled &amp;&amp; isAvailable();

        /* Pass call on to buttons */
        theCashButton.setEnabled(csAvailable);
        theCatButton.setEnabled(csAvailable);
    }

    @Override
    public void setVisible(final boolean pVisible) {
        thePanel.setVisible(pVisible);
    }

    /**
     * Set analysis.
     * @param pAnalysis the analysis.
     */
    public void setAnalysis(final MoneyWiseXAnalysis pAnalysis) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXSecurityAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXSecurityAnalysisSelect.html#L163">163</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseSecurityAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseSecurityAnalysisSelect.html#L163">163</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public MoneyWiseXAnalysisSecurityFilter getFilter() {
        return theState.getFilter();
    }

    @Override
    public boolean isAvailable() {
        return thePortfolios != null
                &amp;&amp; !thePortfolios.isEmpty();
    }

    /**
     * Create SavePoint.
     */
    public void createSavePoint() {
        /* Create the savePoint */
        theSavePoint = new MoneyWiseSecurityState(theState);
    }

    /**
     * Restore SavePoint.
     */
    public void restoreSavePoint() {
        /* Restore the savePoint */
        theState = new MoneyWiseSecurityState(theSavePoint);

        /* Apply the state */
        theState.applyState();
    }

    @Override
    public void setEnabled(final boolean bEnabled) {
        /* Determine whether there are any Securities to select */
        final boolean secAvailable = bEnabled &amp;&amp; isAvailable();

        /* Pass call on to buttons */
        theSecButton.setEnabled(secAvailable);
        thePortButton.setEnabled(secAvailable);
    }

    @Override
    public void setVisible(final boolean pVisible) {
        thePanel.setVisible(pVisible);
    }

    /**
     * Set analysis.
     * @param pAnalysis the analysis.
     */
    public void setAnalysis(final MoneyWiseXAnalysis pAnalysis) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXSecurityAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXSecurityAnalysisSelect.html#L243">243</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseSecurityAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseSecurityAnalysisSelect.html#L246">246</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseXAnalysisPortfolioBucket myPortfolio = thePortfolios.getMatchingPortfolio(mySecurity.getPortfolio());

            /* Set the security */
            theState.setTheSecurity(myPortfolio, mySecurity);
            theState.setDateRange(myFilter.getDateRange());
            theState.applyState();
        }
    }

    /**
     * Handle new Portfolio.
     */
    private void handleNewPortfolio() {
        /* Select the new portfolio */
        if (theState.setPortfolio(thePortButton.getValue())) {
            theState.applyState();
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }
    }

    /**
     * Handle new Security.
     */
    private void handleNewSecurity() {
        /* Select the new security */
        if (theState.setSecurity(theSecButton.getValue())) {
            theState.applyState();
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }
    }

    /**
     * Build Portfolio menu.
     */
    private void buildPortfolioMenu() {
        /* Reset the popUp menu */
        thePortfolioMenu.removeAllItems();

        /* Record active item */
        TethysUIScrollItem&lt;MoneyWiseXAnalysisPortfolioBucket&gt; myActive = null;</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\dialog\MoneyWiseXTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/dialog/MoneyWiseXTransactionDialog.html#L238">238</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\dialog\MoneyWiseTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/dialog/MoneyWiseTransactionDialog.html#L235">235</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theFieldSet.addField(MoneyWiseTransInfoClass.TRANSTAG, myTagButton, MoneyWiseXAnalysisEvent::getTransactionTags);

        /* Configure the tag button */
        myTagButton.setSelectables(this::buildTransactionTags);

        /* Set currency */
        myAmount.setDeemedCurrency(() -&gt; getItem().getPartner().getCurrency());
    }

    /**
     * Build tax subPanel.
     * @param pFactory the GUI factory
     */
    private void buildTaxPanel(final TethysUIFactory&lt;?&gt; pFactory) {
        /* Create a new panel */
        theFieldSet.newPanel(TAB_TAXES);

        /* Allocate fields */
        final TethysUIFieldFactory myFields = pFactory.fieldFactory();
        final TethysUIMoneyEditField myTaxCredit = myFields.newMoneyField();
        final TethysUIMoneyEditField myEeNatIns = myFields.newMoneyField();
        final TethysUIMoneyEditField myErNatIns = myFields.newMoneyField();
        final TethysUIMoneyEditField myBenefit = myFields.newMoneyField();
        final TethysUIMoneyEditField myWithheld = myFields.newMoneyField();
        final TethysUIIntegerEditField myYears = myFields.newIntegerField();

        /* Assign the fields to the panel */
        theFieldSet.addField(MoneyWiseTransInfoClass.TAXCREDIT, myTaxCredit, MoneyWiseXAnalysisEvent::getTaxCredit);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseLoan.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseLoan.html#L195">195</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWisePayee.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWisePayee.html#L228">228</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWisePortfolio.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWisePortfolio.html#L241">241</a></td></tr>
<tr class="a">
<td colspan="2">
<pre>return theInfoSet != null ? theInfoSet.getFieldValue(pFieldId) : null;
    }

    /**
     * Obtain SortCode.
     * @return the sort code
     */
    public char[] getSortCode() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.SORTCODE, char[].class)
                : null;
    }

    /**
     * Obtain Reference.
     * @return the reference
     */
    public char[] getReference() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.REFERENCE, char[].class)
                : null;
    }

    /**
     * Obtain Account.
     * @return the account
     */
    public char[] getAccount() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.ACCOUNT, char[].class)
                : null;
    }

    /**
     * Obtain Notes.
     * @return the notes
     */
    public char[] getNotes() {
        return hasInfoSet
                ? theInfoSet.getValue(MoneyWiseAccountInfoClass.NOTES, char[].class)
                : null;
    }

    @Override
    public OceanusMoney getOpeningBalance() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\validate\MoneyWiseValidateTransDefaults.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/validate/MoneyWiseValidateTransDefaults.html#L640">640</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\validate\MoneyWiseValidateTransDefaults.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/validate/MoneyWiseValidateTransDefaults.html#L681">681</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>private MoneyWiseSecurityHolding getDefaultHolding(final MoneyWiseTransCategory pCategory) {
        /* Access Portfolios and Holdings Map */
        final MoneyWisePortfolioList myPortfolios = theEditSet.getDataList(MoneyWiseBasicDataType.PORTFOLIO, MoneyWisePortfolioList.class);
        final MoneyWiseSecurityHoldingMap myMap = myPortfolios.getSecurityHoldingsMap();

        /* Loop through the Portfolios */
        final Iterator&lt;MoneyWisePortfolio&gt; myPortIterator = myPortfolios.iterator();
        while (myPortIterator.hasNext()) {
            final MoneyWisePortfolio myPortfolio = myPortIterator.next();

            /* Ignore deleted or closed */
            if (myPortfolio.isDeleted() || myPortfolio.isClosed()) {
                continue;
            }

            /* Look for existing holdings */
            final Iterator&lt;MoneyWiseSecurityHolding&gt; myExistIterator = myMap.existingIterator(myPortfolio);
            if (myExistIterator != null) {
                /* Loop through them */
                while (myExistIterator.hasNext()) {
                    final MoneyWiseSecurityHolding myHolding = myExistIterator.next();

                    /* Check whether the asset is allowable for the combination */
                    if (theValidator.isValidCategory(myHolding, pCategory)) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\panel\MoneyWiseXEventTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/panel/MoneyWiseXEventTable.html#L357">357</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\panel\MoneyWiseTransactionTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/panel/MoneyWiseTransactionTable.html#L362">362</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>.setOnCommit((r, v) -&gt; updateField(MoneyWiseXAnalysisEvent::setPartnerAmount, r, v));

        /* Create the debit column */
        myTable.declareRawDecimalColumn(MoneyWiseTransDataId.DEBIT)
                .setCellValueFactory(this::getFilteredDebit)
                .setEditable(false)
                .setColumnWidth(WIDTH_MONEY);

        /* Create the credit column */
        myTable.declareRawDecimalColumn(MoneyWiseTransDataId.CREDIT)
                .setCellValueFactory(this::getFilteredCredit)
                .setEditable(false)
                .setColumnWidth(WIDTH_MONEY);

        /* Create the balance column */
        myTable.declareRawDecimalColumn(MoneyWiseTransDataId.BALANCE)
                .setCellValueFactory(this::getFilteredBalance)
                .setEditable(false)
                .setColumnWidth(WIDTH_MONEY);

        /* Create the Active column */
        final TethysUIIconMapSet&lt;MetisAction&gt; myActionMapSet = MetisIcon.configureStatusIconButton(myGuiFactory);
        myTable.declareIconColumn(PrometheusDataResource.DATAITEM_TOUCH, MetisAction.class)
                .setIconMapSet(r -&gt; myActionMapSet)
                .setCellValueFactory(MoneyWiseXEventTable::getFilteredAction)</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportNetWorth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportNetWorth.html#L313">313</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportNetWorth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportNetWorth.html#L358">358</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseDepositCategory myCurr = myBucket.getAccountCategory();
            if (!myBucket.isActive()
                    || !MetisDataDifference.isEqual(myCurr.getParentCategory(), myCategory)) {
                continue;
            }

            /* Access bucket name */
            final String myName = myBucket.getName();

            /* Access values */
            final MoneyWiseXAnalysisAccountValues myValues = myBucket.getValues();

            /* Create the SubCategory row */
            theBuilder.startRow(myTable);
            theBuilder.makeDelayLinkCell(myTable, myName, myCurr.getSubCategory());
            theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));

            /* Note the delayed subTable */
            setDelayedTable(myName, myTable, myBucket);
        }

        /* Embed the table correctly */
        theBuilder.embedTable(myTable, pCategory.getName());
    }

    /**
     * Build a category report.
     * @param pParent the table parent
     * @param pCategory the category bucket
     */
    private void makeCategoryReport(final MetisHTMLTable pParent,
                                    final MoneyWiseXAnalysisCashCategoryBucket pCategory) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportResource.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportResource.html#L30">30</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportResource.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportResource.html#L30">30</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public enum MoneyWiseXReportResource implements OceanusBundleId {
    /**
     * NetWorth ReportType.
     */
    TYPE_NETWORTH(&quot;Type.NetWorth&quot;),

    /**
     * BalanceSheet ReportType.
     */
    TYPE_BALANCESHEET(&quot;Type.BalanceSheet&quot;),

    /**
     * CashFlow ReportType.
     */
    TYPE_CASHFLOW(&quot;Type.CashFlow&quot;),

    /**
     * IncomeExpense ReportType.
     */
    TYPE_INCEXP(&quot;Type.IncExp&quot;),

    /**
     * Portfolio ReportType.
     */
    TYPE_PORTFOLIO(&quot;Type.Portfolio&quot;),

    /**
     * MarketGrowth ReportType.
     */
    TYPE_MARKET(&quot;Type.Market&quot;),

    /**
     * TaxBasis ReportType.
     */
    TYPE_TAXBASIS(&quot;Type.TaxBasis&quot;),

    /**
     * TaxCalc ReportType.
     */
    TYPE_TAXCALC(&quot;Type.TaxCalc&quot;),

    /**
     * AssetGains ReportType.
     */
    TYPE_ASSETGAINS(&quot;Type.AssetGains&quot;),

    /**
     * CapitalGains ReportType.
     */
    TYPE_CAPITALGAINS(&quot;Type.CapitalGains&quot;),

    /**
     * NetWorth Title.
     */
    NETWORTH_TITLE(&quot;NetWorth.Title&quot;),

    /**
     * NetWorth Asset.
     */
    NETWORTH_ASSET(&quot;NetWorth.Asset&quot;),

    /**
     * BalanceSheet Title.
     */
    BALANCESHEET_TITLE(&quot;BalanceSheet.Title&quot;),

    /**
     * CashFlow Title.
     */
    CASHFLOW_TITLE(&quot;CashFlow.Title&quot;),

    /**
     * Income/Expense Title.
     */
    INCEXP_TITLE(&quot;IncExp.Title&quot;),

    /**
     * Portfolio Title.
     */
    PORTFOLIO_TITLE(&quot;Portfolio.Title&quot;),

    /**
     * MarketGrowth Title.
     */
    MARKETGROWTH_TITLE(&quot;MarketGrowth.Title&quot;),

    /**
     * MarketGrowth BaseValue.
     */
    MARKETGROWTH_BASE(&quot;MarketGrowth.Base&quot;),

    /**
     * AssetGains Title.
     */
    ASSETGAINS_TITLE(&quot;AssetGains.Title&quot;),

    /**
     * CapitalGains Title.
     */
    CAPITALGAINS_TITLE(&quot;CapitalGains.Title&quot;),

    /**
     * TaxBasis Title.
     */
    TAXBASIS_TITLE(&quot;TaxBasis.Title&quot;),

    /**
     * TaxCalc Title.
     */
    TAXCALC_TITLE(&quot;TaxCalc.Title&quot;);

    /**
     * The Report Map.
     */
    private static final Map&lt;MoneyWiseXReportType, OceanusBundleId&gt; REPORT_MAP = buildReportMap();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXAnalysisSelect.html#L1239">1239</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseAnalysisSelect.html#L1259">1259</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>private void setFilter(final MoneyWiseXAnalysisFilter&lt;?, ?&gt; pFilter) {
            theFilter = pFilter;
        }

        /**
         * Apply the State.
         */
        private void applyState() {
            /* Adjust the lock-down */
            setEnabled(true);
            theRangeButton.setText(theRange.toString());
            theFilterButton.setText((theFilter == null)
                    ? null
                    : theFilter.getName());
            theFilterTypeButton.setValue(theType);
            theBucketButton.setValue(theBucket);
            theColumnButton.setValue(theColumns);
            showColumns(showColumns);
        }

        /**
         * Show Columns.
         * @param pShow true/false
         */
        private void showColumns(final boolean pShow) {
            /* Show columns */
            theColumnLabel.setVisible(pShow);
            theColumnButton.setVisible(pShow);

            /* Hide buckets */
            theBucketLabel.setVisible(!pShow);
            theBucketButton.setVisible(!pShow);

            /* Record details */
            showColumns = pShow;
        }
    }

    /**
     * The Statement Select class.
     */
    public static final class MoneyWiseXStatementSelect {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportNetWorth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportNetWorth.html#L313">313</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportNetWorth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportNetWorth.html#L358">358</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseDepositCategory myCurr = myBucket.getAccountCategory();
            if (!myBucket.isActive()
                    || !MetisDataDifference.isEqual(myCurr.getParentCategory(), myCategory)) {
                continue;
            }

            /* Access bucket name */
            final String myName = myBucket.getName();

            /* Access values */
            final MoneyWiseAnalysisAccountValues myValues = myBucket.getValues();

            /* Create the SubCategory row */
            theBuilder.startRow(myTable);
            theBuilder.makeDelayLinkCell(myTable, myName, myCurr.getSubCategory());
            theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));

            /* Note the delayed subTable */
            setDelayedTable(myName, myTable, myBucket);
        }

        /* Embed the table correctly */
        theBuilder.embedTable(myTable, pCategory.getName());
    }

    /**
     * Build a category report.
     * @param pParent the table parent
     * @param pCategory the category bucket
     */
    private void makeCategoryReport(final MetisHTMLTable pParent,
                                    final MoneyWiseAnalysisCashCategoryBucket pCategory) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseRegion.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseRegion.html#L85">85</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseTransTag.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseTransTag.html#L85">85</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>private MoneyWiseRegion(final MoneyWiseRegionList pList,
                            final PrometheusDataValues pValues) throws OceanusException {
        /* Initialise the item */
        super(pList, pValues);

        /* Protect against exceptions */
        try {
            /* Store the Name */
            Object myValue = pValues.getValue(PrometheusDataResource.DATAITEM_FIELD_NAME);
            if (myValue instanceof String s) {
                setValueName(s);
            } else if (myValue instanceof byte[] ba) {
                setValueName(ba);
            }

            /* Store the Description */
            myValue = pValues.getValue(PrometheusDataResource.DATAITEM_FIELD_DESC);
            if (myValue instanceof String s) {
                setValueDesc(s);
            } else if (myValue instanceof byte[] ba) {
                setValueDesc(ba);
            }

            /* Catch Exceptions */
        } catch (OceanusException e) {
            /* Pass on exception */
            throw new MoneyWiseDataException(this, ERROR_CREATEITEM, e);
        }
    }

    /**
     * Edit Constructor.
     * @param pList the list
     */
    public MoneyWiseRegion(final MoneyWiseRegionList pList) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\quicken\file\MoneyWiseQIFPortfolioBuilder.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/quicken/file/MoneyWiseQIFPortfolioBuilder.html#L1224">1224</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\quicken\file\MoneyWiseQIFPortfolioBuilder.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/quicken/file/MoneyWiseQIFPortfolioBuilder.html#L1365">1365</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseQIFAccountEvents myTarget = theFile.registerAccount(pTarget);

            /* Obtain classes */
            final List&lt;MoneyWiseQIFClass&gt; myList = theBuilder.getTransactionClasses(pTrans);

            /* Create an XOut event */
            MoneyWiseQIFPortfolioEvent myEvent = new MoneyWiseQIFPortfolioEvent(theFile, pTrans, MoneyWiseQActionType.XOUT);
            myEvent.recordAmount(myAmount);
            myEvent.recordPayee(theBuilder.buildXferToPayee(pTarget));
            myEvent.recordXfer(myTarget.getAccount(), myList, myAmount);

            /* Add to event list */
            mySource.addEvent(myEvent);

            /* Create an XIn event */
            myEvent = new MoneyWiseQIFPortfolioEvent(theFile, pTrans, MoneyWiseQActionType.XIN);
            myEvent.recordAmount(myAmount);
            myEvent.recordPayee(theBuilder.buildXferFromPayee(pSource));
            myEvent.recordXfer(mySource.getAccount(), myList, myAmount);

            /* Add to event list */
            myTarget.addEvent(myEvent);
        }</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\panel\MoneyWiseXEventTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/panel/MoneyWiseXEventTable.html#L966">966</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\panel\MoneyWiseTransactionTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/panel/MoneyWiseTransactionTable.html#L974">974</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>myTable.getColumn(MoneyWiseTransInfoClass.RETURNEDCASH).setVisible(false);
     }


    /**
     * Analysis Header class.
     */
    private static class AnalysisHeader
            extends MoneyWiseTransaction {
        /**
         * Analysis Header Id.
         */
        static final int ID_VALUE = 1;

        /**
         * Constructor.
         * @param pList the Transaction list
         */
        protected AnalysisHeader(final MoneyWiseTransactionList pList) {
            super(pList);
            setHeader(true);
            setIndexedId(ID_VALUE);
        }
    }

    /**
     * Transaction DataIds.
     */
    private enum MoneyWiseTransDataId
            implements MetisDataFieldId {
        /**
         * Debit.
         */
        DEBIT(MoneyWiseUIResource.STATEMENT_COLUMN_DEBIT),

        /**
         * Credit.
         */
        CREDIT(MoneyWiseUIResource.STATEMENT_COLUMN_CREDIT),

        /**
         * Balance.
         */
        BALANCE(MoneyWiseUIResource.STATEMENT_COLUMN_BALANCE);

        /**
         * The Value.
         */
        private final String theValue;

        /**
         * Constructor.
         * @param pKeyName the key name
         */
        MoneyWiseTransDataId(final MetisDataFieldId pKeyName) {
            theValue = pKeyName.getId();
        }

        @Override
        public String getId() {
            return theValue;
        }

        @Override
        public String toString() {
            return getId();
        }
    }

    /**
     * Transaction Panel.
     */
    public static class MoneyWiseXStatementPanel</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\database\MoneyWiseTableDeposit.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/database/MoneyWiseTableDeposit.html#L77">77</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\database\MoneyWiseTableLoan.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/database/MoneyWiseTableLoan.html#L77">77</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\database\MoneyWiseTablePortfolio.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/database/MoneyWiseTablePortfolio.html#L77">77</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\database\MoneyWiseTableSecurity.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/database/MoneyWiseTableSecurity.html#L77">77</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final PrometheusDataValues myValues = getRowValues(MoneyWiseDeposit.OBJECT_NAME);
        myValues.addValue(PrometheusDataResource.DATAITEM_FIELD_NAME, myTableDef.getBinaryValue(PrometheusDataResource.DATAITEM_FIELD_NAME));
        myValues.addValue(PrometheusDataResource.DATAITEM_FIELD_DESC, myTableDef.getBinaryValue(PrometheusDataResource.DATAITEM_FIELD_DESC));
        myValues.addValue(MoneyWiseBasicResource.CATEGORY_NAME, myTableDef.getIntegerValue(MoneyWiseBasicResource.CATEGORY_NAME));
        myValues.addValue(MoneyWiseBasicResource.ASSET_PARENT, myTableDef.getIntegerValue(MoneyWiseBasicResource.ASSET_PARENT));
        myValues.addValue(MoneyWiseStaticDataType.CURRENCY, myTableDef.getIntegerValue(MoneyWiseStaticDataType.CURRENCY));
        myValues.addValue(MoneyWiseBasicResource.ASSET_CLOSED, myTableDef.getBooleanValue(MoneyWiseBasicResource.ASSET_CLOSED));

        /* Return the values */
        return myValues;
    }

    @Override
    protected void setFieldValue(final MoneyWiseDeposit pItem,</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWiseDepositDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWiseDepositDialog.html#L151">151</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWisePortfolioDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWisePortfolioDialog.html#L123">123</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>myCategoryButton.setMenuConfigurator(c -&gt; buildCategoryMenu(c, getItem()));
        myParentButton.setMenuConfigurator(c -&gt; buildParentMenu(c, getItem()));
        myCurrencyButton.setMenuConfigurator(c -&gt; buildCurrencyMenu(c, getItem()));
        final Map&lt;Boolean, TethysUIIconMapSet&lt;Boolean&gt;&gt; myMapSets = MoneyWiseIcon.configureLockedIconButton(pFactory);
        myClosedButton.setIconMapSet(() -&gt; myMapSets.get(theClosedState));

        /* Configure validation checks */
        myName.setValidator(this::isValidName);
        myDesc.setValidator(this::isValidDesc);
     }

    /**
     * Build account subPanel.
     * @param pFactory the GUI factory
     */
    private void buildAccountPanel(final TethysUIFactory&lt;?&gt; pFactory) {
        /* Create a new panel */
        theFieldSet.newPanel(TAB_ACCOUNT);

        /* Allocate fields */
        final TethysUIFieldFactory myFields = pFactory.fieldFactory();
        final TethysUIDateButtonField myMaturity = myFields.newDateField();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXPortfolioAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXPortfolioAnalysisSelect.html#L132">132</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWisePortfolioAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWisePortfolioAnalysisSelect.html#L132">132</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public MoneyWiseXAnalysisPortfolioCashFilter getFilter() {
        return theState.getFilter();
    }

    @Override
    public boolean isAvailable() {
        return thePortfolios != null
                &amp;&amp; !thePortfolios.isEmpty();
    }

    /**
     * Create SavePoint.
     */
    public void createSavePoint() {
        /* Create the savePoint */
        theSavePoint = new MoneyWisePortfolioState(theState);
    }

    /**
     * Restore SavePoint.
     */
    public void restoreSavePoint() {
        /* Restore the savePoint */
        theState = new MoneyWisePortfolioState(theSavePoint);

        /* Apply the state */
        theState.applyState();
    }

    @Override
    public void setEnabled(final boolean bEnabled) {
        /* Determine whether there are any portfolios to select */
        final boolean portAvailable = bEnabled &amp;&amp; isAvailable();

        /* Pass call on to buttons */
        thePortButton.setEnabled(portAvailable);
    }

    @Override
    public void setVisible(final boolean pVisible) {
        thePanel.setVisible(pVisible);
    }

    /**
     * Set analysis.
     * @param pAnalysis the analysis.
     */
    public void setAnalysis(final MoneyWiseXAnalysis pAnalysis) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXTransTagSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXTransTagSelect.html#L130">130</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseTransTagSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseTransTagSelect.html#L130">130</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public MoneyWiseXAnalysisTagFilter getFilter() {
        return theState.getFilter();
    }

    @Override
    public boolean isAvailable() {
        return theTags != null
                &amp;&amp; !theTags.isEmpty();
    }

    /**
     * Create SavePoint.
     */
    protected void createSavePoint() {
        /* Create the savePoint */
        theSavePoint = new MoneyWiseTagState(theState);
    }

    /**
     * Restore SavePoint.
     */
    protected void restoreSavePoint() {
        /* Restore the savePoint */
        theState = new MoneyWiseTagState(theSavePoint);

        /* Apply the state */
        theState.applyState();
    }

    @Override
    public void setEnabled(final boolean bEnabled) {
        /* Determine whether there are any Accounts to select */
        final boolean csAvailable = bEnabled &amp;&amp; isAvailable();

        /* Pass call on to buttons */
        theTagButton.setEnabled(csAvailable);
    }

    @Override
    public void setVisible(final boolean pVisible) {
        thePanel.setVisible(pVisible);
    }

    /**
     * Set analysis.
     * @param pAnalysis the analysis.
     */
    public void setAnalysis(final MoneyWiseXAnalysis pAnalysis) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseAccountPanel.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseAccountPanel.html#L182">182</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseCategoryPanel.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseCategoryPanel.html#L174">174</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>MoneyWiseAccountPanel(final MoneyWiseView pView) {
        /* Store details */
        theView = pView;

        /* Access GUI Factory */
        final TethysUIFactory&lt;?&gt; myFactory = pView.getGuiFactory();
        final MetisViewerManager myViewer = pView.getViewerManager();

        /* Create the event manager */
        theEventManager = new OceanusEventManager&lt;&gt;();

        /* Build the Update set */
        theEditSet = new PrometheusEditSet(pView);

        /* Create the Panel */
        final TethysUIPaneFactory myPanes = myFactory.paneFactory();
        thePanel = myPanes.newBorderPane();

        /* Create the top level viewer entry for this view */
        final MetisViewerEntry mySection = pView.getViewerEntry(PrometheusViewerEntryId.MAINTENANCE);
        theViewerEntry = myViewer.newEntry(mySection, NLS_DATAENTRY);
        theViewerEntry.setTreeObject(theEditSet);

        /* Create the error panel */
        theError = pView.getToolkit().getToolkit().newErrorPanel(theViewerEntry);

        /* Create the action buttons panel */
        theActionButtons = new PrometheusActionButtons(myFactory, theEditSet);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportPortfolioView.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportPortfolioView.html#L110">110</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportPortfolioView.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportPortfolioView.html#L110">110</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseXAnalysisPortfolioBucket myTotals = myPortfolios.getTotals();
        final OceanusDate myDate = pAnalysis.getDateRange().getEnd();

        /* Start the report */
        final Element myBody = theBuilder.startReport();
        theBuilder.makeTitle(myBody, TEXT_TITLE, theFormatter.formatObject(myDate));

        /* Initialise the table */
        final MetisHTMLTable myTable = theBuilder.startTable(myBody);
        theBuilder.startHdrRow(myTable);
        theBuilder.makeTitleCell(myTable);
        theBuilder.makeTitleCell(myTable, TEXT_VALUE);
        theBuilder.makeTitleCell(myTable, TEXT_COST);
        theBuilder.makeTitleCell(myTable, TEXT_GAINS);
        theBuilder.makeTitleCell(myTable, TEXT_DIVIDEND);
        theBuilder.makeTitleCell(myTable, TEXT_ADJUST);
        theBuilder.makeTitleCell(myTable, MoneyWiseXReportBuilder.TEXT_PROFIT);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\tax\uk\MoneyWiseUKCapitalScheme.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/tax/uk/MoneyWiseUKCapitalScheme.html#L52">52</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\tax\uk\MoneyWiseUKRoomRentalScheme.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/tax/uk/MoneyWiseUKRoomRentalScheme.html#L42">42</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>OceanusMoney myRemaining = adjustForAllowance(pConfig.getCapitalAllowance(), pAmount);

        /* If we have any gains left */
        if (myRemaining.isNonZero()) {
            /* Adjust the basic allowance */
            myRemaining = super.adjustAllowances(pConfig, myRemaining);
        }

        /* Return unallocated income */
        return myRemaining;
    }

    @Override
    protected OceanusMoney getAmountInAllowance(final MoneyWiseUKTaxConfig pConfig,
                                                final OceanusMoney pAmount) {
        /* Obtain the amount covered by the capital allowance */
        OceanusMoney myAmount = getAmountInBand(pConfig.getCapitalAllowance(), pAmount);

        /* If we have income left over */
        if (myAmount.compareTo(pAmount) &lt; 0) {
            /* Calculate remaining amount */
            final OceanusMoney myRemaining = new OceanusMoney(pAmount);
            myRemaining.subtractAmount(myAmount);

            /* Calculate the amount covered by basic allowance */
            final OceanusMoney myXtra = super.getAmountInAllowance(pConfig, myRemaining);

            /* Determine the total amount covered by the allowance */
            myAmount = new OceanusMoney(myAmount);
            myAmount.addAmount(myXtra);
        }

        /* return the amount */
        return myAmount;
    }</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXTaxBasisAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXTaxBasisAnalysisSelect.html#L438">438</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseTaxBasisAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseTaxBasisAnalysisSelect.html#L441">441</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theFilter = new MoneyWiseXAnalysisTaxBasisFilter(theBasis);
                    theFilter.setDateRange(theDateRange);
                } else {
                    theFilter = null;
                }
            }
        }

        /**
         * Set the dateRange.
         * @param pRange the dateRange
         */
        private void setDateRange(final OceanusDateRange pRange) {
            /* Store the dateRange */
            theDateRange = pRange;
            if (theFilter != null) {
                theFilter.setDateRange(theDateRange);
            }
        }

        /**
         * Apply the State.
         */
        private void applyState() {
            /* Adjust the lock-down */
            setEnabled(true);
            theBasisButton.setValue(theBasis);
            if (theAccount == null) {
                theAccountButton.setValue(null, NLS_ALL);
            } else {
                theAccountButton.setValue(theAccount, theAccount.getSimpleName());
            }
            theAccountButton.setEnabled((theBasis != null) &amp;&amp; theBasis.hasAccounts());
        }
    }
}</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\database\MoneyWiseTableCashCategory.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/database/MoneyWiseTableCashCategory.html#L91">91</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\database\MoneyWiseTableDepositCategory.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/database/MoneyWiseTableDepositCategory.html#L91">91</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\database\MoneyWiseTableLoanCategory.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/database/MoneyWiseTableLoanCategory.html#L91">91</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\database\MoneyWiseTableTransCategory.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/database/MoneyWiseTableTransCategory.html#L91">91</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>if (MoneyWiseStaticDataType.CASHTYPE.equals(iField)) {
            myTableDef.setIntegerValue(iField, pItem.getCategoryTypeId());
        } else if (PrometheusDataResource.DATAGROUP_PARENT.equals(iField)) {
            myTableDef.setIntegerValue(iField, pItem.getParentCategoryId());
        } else if (PrometheusDataResource.DATAITEM_FIELD_NAME.equals(iField)) {
            myTableDef.setBinaryValue(iField, pItem.getNameBytes());
        } else if (PrometheusDataResource.DATAITEM_FIELD_DESC.equals(iField)) {
            myTableDef.setBinaryValue(iField, pItem.getDescBytes());
        } else {
            super.setFieldValue(pItem, iField);
        }
    }
}</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\quicken\file\MoneyWiseQIFLine.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/quicken/file/MoneyWiseQIFLine.html#L1005">1005</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\quicken\file\MoneyWiseQIFLine.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/quicken/file/MoneyWiseQIFLine.html#L1438">1438</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>if (!getLineType().equals(myLine.getLineType())) {
                return false;
            }

            /* Check account */
            if (!theAccount.equals(myLine.getAccount())) {
                return false;
            }

            /* Check classes */
            final List&lt;MoneyWiseQIFClass&gt; myClasses = myLine.getClassList();
            if (theClasses == null) {
                return myClasses == null;
            } else if (myClasses == null) {
                return true;
            }
            return theClasses.equals(myClasses);
        }

        @Override
        public int hashCode() {
            int myResult = MoneyWiseQIFFile.HASH_BASE * getLineType().hashCode();
            if (theClasses != null) {
                myResult += theClasses.hashCode();
                myResult *= MoneyWiseQIFFile.HASH_BASE;
            }</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWiseDepositDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWiseDepositDialog.html#L123">123</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWiseLoanDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWiseLoanDialog.html#L97">97</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>});
    }

    /**
     * Build Main subPanel.
     * @param pFactory the GUI factory
     */
    private void buildMainPanel(final TethysUIFactory&lt;?&gt; pFactory) {
        /* Create the text fields */
        final TethysUIFieldFactory myFields = pFactory.fieldFactory();
        final TethysUIStringEditField myName = myFields.newStringField();
        final TethysUIStringEditField myDesc = myFields.newStringField();

        /* Create the buttons */
        final TethysUIScrollButtonField&lt;MoneyWiseAssetCategory&gt; myCategoryButton = myFields.newScrollField(MoneyWiseAssetCategory.class);
        final TethysUIScrollButtonField&lt;MoneyWisePayee&gt; myParentButton = myFields.newScrollField(MoneyWisePayee.class);
        final TethysUIScrollButtonField&lt;MoneyWiseCurrency&gt; myCurrencyButton = myFields.newScrollField(MoneyWiseCurrency.class);
        final TethysUIIconButtonField&lt;Boolean&gt; myClosedButton = myFields.newIconField(Boolean.class);

        /* Assign the fields to the panel */
        theFieldSet.addField(PrometheusDataResource.DATAITEM_FIELD_NAME, myName, MoneyWiseDeposit::getName);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWiseLoanDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWiseLoanDialog.html#L127">127</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWisePayeeDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWisePayeeDialog.html#L116">116</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>myCurrencyButton.setMenuConfigurator(c -&gt; buildCurrencyMenu(c, getItem()));
        final Map&lt;Boolean, TethysUIIconMapSet&lt;Boolean&gt;&gt; myMapSets = MoneyWiseIcon.configureLockedIconButton(pFactory);
        myClosedButton.setIconMapSet(() -&gt; myMapSets.get(theClosedState));

        /* Configure validation checks */
        myName.setValidator(this::isValidName);
        myDesc.setValidator(this::isValidDesc);
    }

    /**
     * Build account subPanel.
     * @param pFactory the GUI factory
     */
    private void buildAccountPanel(final TethysUIFactory&lt;?&gt; pFactory) {
        /* Create a new panel */
        theFieldSet.newPanel(TAB_ACCOUNT);

        /* Allocate fields */
        final TethysUIFieldFactory myFields = pFactory.fieldFactory();
        final TethysUICharArrayEditField mySortCode = myFields.newCharArrayField();
        final TethysUICharArrayEditField myAccount = myFields.newCharArrayField();
        final TethysUICharArrayEditField myReference = myFields.newCharArrayField();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWisePortfolioDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWisePortfolioDialog.html#L95">95</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWiseSecurityDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWiseSecurityDialog.html#L122">122</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>buildNotesPanel(pFactory);
    }

    /**
     * Build Main subPanel.
     * @param pFactory the GUI factory
     */
    private void buildMainPanel(final TethysUIFactory&lt;?&gt; pFactory) {
        /* Create the text fields */
        final TethysUIFieldFactory myFields = pFactory.fieldFactory();
        final TethysUIStringEditField myName = myFields.newStringField();
        final TethysUIStringEditField myDesc = myFields.newStringField();

        /* Create the buttons */
        final TethysUIScrollButtonField&lt;MoneyWiseAssetCategory&gt; myTypeButton = myFields.newScrollField(MoneyWiseAssetCategory.class);
        final TethysUIScrollButtonField&lt;MoneyWisePayee&gt; myParentButton = myFields.newScrollField(MoneyWisePayee.class);
        final TethysUIScrollButtonField&lt;MoneyWiseCurrency&gt; myCurrencyButton = myFields.newScrollField(MoneyWiseCurrency.class);
        final TethysUIIconButtonField&lt;Boolean&gt; myClosedButton = myFields.newIconField(Boolean.class);

        /* Assign the fields to the panel */
        theFieldSet.addField(PrometheusDataResource.DATAITEM_FIELD_NAME, myName, MoneyWisePortfolio::getName);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportNetWorth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportNetWorth.html#L313">313</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportNetWorth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportNetWorth.html#L403">403</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseDepositCategory myCurr = myBucket.getAccountCategory();
            if (!myBucket.isActive()
                    || !MetisDataDifference.isEqual(myCurr.getParentCategory(), myCategory)) {
                continue;
            }

            /* Access bucket name */
            final String myName = myBucket.getName();

            /* Access values */
            final MoneyWiseXAnalysisAccountValues myValues = myBucket.getValues();

            /* Create the SubCategory row */
            theBuilder.startRow(myTable);
            theBuilder.makeDelayLinkCell(myTable, myName, myCurr.getSubCategory());
            theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisAccountAttr.VALUATION));

            /* Note the delayed subTable */
            setDelayedTable(myName, myTable, myBucket);
        }

        /* Embed the table correctly */
        theBuilder.embedTable(myTable, pCategory.getName());
    }

    /**
     * Build a category report.
     * @param pParent the table parent
     * @param pCategory the category bucket
     */
    private void makeCategoryReport(final MetisHTMLTable pParent,</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportNetWorth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportNetWorth.html#L313">313</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportNetWorth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportNetWorth.html#L403">403</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseDepositCategory myCurr = myBucket.getAccountCategory();
            if (!myBucket.isActive()
                    || !MetisDataDifference.isEqual(myCurr.getParentCategory(), myCategory)) {
                continue;
            }

            /* Access bucket name */
            final String myName = myBucket.getName();

            /* Access values */
            final MoneyWiseAnalysisAccountValues myValues = myBucket.getValues();

            /* Create the SubCategory row */
            theBuilder.startRow(myTable);
            theBuilder.makeDelayLinkCell(myTable, myName, myCurr.getSubCategory());
            theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisAccountAttr.VALUATION));

            /* Note the delayed subTable */
            setDelayedTable(myName, myTable, myBucket);
        }

        /* Embed the table correctly */
        theBuilder.embedTable(myTable, pCategory.getName());
    }

    /**
     * Build a category report.
     * @param pParent the table parent
     * @param pCategory the category bucket
     */
    private void makeCategoryReport(final MetisHTMLTable pParent,</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\base\MoneyWiseCategoryTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/base/MoneyWiseCategoryTable.html#L145">145</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseStaticTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseStaticTable.html#L144">144</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>.setOnCommit((r, v) -&gt; updateField(MoneyWiseCategoryBase::setDescription, r, v));

        /* Create the Active column */
        final TethysUIIconMapSet&lt;MetisAction&gt; myActionMapSet = MetisIcon.configureStatusIconButton(myGuiFactory);
        myTable.declareIconColumn(PrometheusDataResource.DATAITEM_TOUCH, MetisAction.class)
                .setIconMapSet(r -&gt; myActionMapSet)
                .setCellValueFactory(r -&gt; r.isActive() ? MetisAction.ACTIVE : MetisAction.DELETE)
                .setName(MoneyWiseUIResource.STATICDATA_ACTIVE.getValue())
                .setEditable(true)
                .setCellEditable(r -&gt; !r.isActive())
                .setColumnWidth(WIDTH_ICON)
                .setOnCommit((r, v) -&gt; updateField(this::deleteRow, r, v));</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseCashCategoryTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseCashCategoryTable.html#L152">152</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseDepositCategoryTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseDepositCategoryTable.html#L152">152</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseLoanCategoryTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseLoanCategoryTable.html#L152">152</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseTransCategoryTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseTransCategoryTable.html#L152">152</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>MoneyWiseCashCategory myParent = pCategory.getParentCategory();
            if (!MetisDataDifference.isEqual(getParent(), myParent)) {
                if (myParent != null) {
                    myParent = theCategories.findItemById(myParent.getIndexedId());
                }
                selectParent(myParent);
            }

            /* Select the row and ensure that it is visible */
            getTable().selectRow(pCategory);
        }
    }

    @Override
    protected void handleRewind() {
        /* Only action if we are not editing */
        if (!theActiveCategory.isEditing()) {
            /* Handle the reWind */
            setEnabled(true);
            super.handleRewind();
        }

        /* Adjust for changes */
        notifyChanges();
    }

    /**
     * Handle panel state.
     */
    private void handlePanelState() {
        /* Only action if we are not editing */
        if (!theActiveCategory.isEditing()) {
            /* handle the edit transition */
            setEnabled(true);
            final MoneyWiseCashCategory myCategory = theActiveCategory.getSelectedItem();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\archive\MoneyWiseArchiveAccountInfoType.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/archive/MoneyWiseArchiveAccountInfoType.html#L87">87</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\archive\MoneyWiseArchiveTransInfoType.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/archive/MoneyWiseArchiveTransInfoType.html#L87">87</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theReport.setNewStage(AREA_ACCOUNTINFOTYPES);

            /* Count the number of InfoTypes */
            final int myTotal = myView.getRowCount();

            /* Declare the number of steps */
            theReport.setNumSteps(myTotal);

            /* Loop through the rows of the single column range */
            for (int i = 0; i &lt; myTotal; i++) {
                /* Access the cell by reference */
                final PrometheusSheetRow myRow = myView.getRowByIndex(i);
                final PrometheusSheetCell myCell = myView.getRowCellByIndex(myRow, 0);

                /* Add the value into the tables */
                myList.addBasicItem(myCell.getString());

                /* Report the progress */
                theReport.setNextStep();
            }

            /* PostProcess the list */
            myList.postProcessOnLoad();

            /* Handle Exceptions */
        } catch (TethysUIThreadCancelException e) {
            throw e;
        } catch (OceanusException e) {
            throw new MoneyWiseIOException(&quot;Failed to load &quot; + myList.getItemType().getListName(), e);
        }
    }
}</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\archive\MoneyWiseArchiveCashCategoryType.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/archive/MoneyWiseArchiveCashCategoryType.html#L87">87</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\archive\MoneyWiseArchiveDepositCategoryType.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/archive/MoneyWiseArchiveDepositCategoryType.html#L87">87</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\archive\MoneyWiseArchiveLoanCategoryType.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/archive/MoneyWiseArchiveLoanCategoryType.html#L88">88</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\archive\MoneyWiseArchivePayeeType.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/archive/MoneyWiseArchivePayeeType.html#L87">87</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\archive\MoneyWiseArchivePortfolioType.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/archive/MoneyWiseArchivePortfolioType.html#L87">87</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\archive\MoneyWiseArchiveSecurityType.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/archive/MoneyWiseArchiveSecurityType.html#L88">88</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\archive\MoneyWiseArchiveTaxBasis.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/archive/MoneyWiseArchiveTaxBasis.html#L87">87</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\archive\MoneyWiseArchiveTransCategoryType.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/archive/MoneyWiseArchiveTransCategoryType.html#L87">87</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theReport.setNewStage(AREA_CASHCATTYPES);

            /* Count the number of AccountCategoryTypes */
            final int myTotal = myView.getRowCount();

            /* Declare the number of steps */
            theReport.setNumSteps(myTotal);

            /* Loop through the rows of the single column range */
            for (int i = 0; i &lt; myTotal; i++) {
                /* Access the cell by reference */
                final PrometheusSheetRow myRow = myView.getRowByIndex(i);
                final PrometheusSheetCell myCell = myView.getRowCellByIndex(myRow, 0);

                /* Add the value into the tables */
                myList.addBasicItem(myCell.getString());

                /* Report the progress */
                theReport.setNextStep();
            }

            /* PostProcess the list */
            myList.postProcessOnLoad();

            /* Handle exceptions */
        } catch (TethysUIThreadCancelException e) {
            throw e;
        } catch (OceanusException e) {
            throw new MoneyWiseIOException(&quot;Failed to Load &quot; + myList.getItemType().getListName(), e);
        }
    }
}</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXPayeeAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXPayeeAnalysisSelect.html#L132">132</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWisePayeeAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWisePayeeAnalysisSelect.html#L132">132</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public MoneyWiseXAnalysisPayeeFilter getFilter() {
        return theState.getFilter();
    }

    @Override
    public boolean isAvailable() {
        return thePayees != null
                &amp;&amp; !thePayees.isEmpty();
    }

    /**
     * Create SavePoint.
     */
    public void createSavePoint() {
        /* Create the savePoint */
        theSavePoint = new MoneyWisePayeeState(theState);
    }

    /**
     * Restore SavePoint.
     */
    public void restoreSavePoint() {
        /* Restore the savePoint */
        theState = new MoneyWisePayeeState(theSavePoint);

        /* Apply the state */
        theState.applyState();
    }

    @Override
    public void setEnabled(final boolean bEnabled) {
        /* Pass call on to button */
        theButton.setEnabled(bEnabled &amp;&amp; isAvailable());
    }

    @Override
    public void setVisible(final boolean pVisible) {
        thePanel.setVisible(pVisible);
    }

    /**
     * Set analysis.
     * @param pAnalysis the analysis.
     */
    public void setAnalysis(final MoneyWiseXAnalysis pAnalysis) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXTaxBasisAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXTaxBasisAnalysisSelect.html#L167">167</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseTaxBasisAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseTaxBasisAnalysisSelect.html#L167">167</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public MoneyWiseXAnalysisTaxBasisFilter getFilter() {
        return theState.getFilter();
    }

    @Override
    public boolean isAvailable() {
        return theTaxBases != null
                &amp;&amp; !theTaxBases.isEmpty();
    }

    /**
     * Create SavePoint.
     */
    public void createSavePoint() {
        /* Create the savePoint */
        theSavePoint = new MoneyWiseTaxBasisState(theState);
    }

    /**
     * Restore SavePoint.
     */
    public void restoreSavePoint() {
        /* Restore the savePoint */
        theState = new MoneyWiseTaxBasisState(theSavePoint);

        /* Apply the state */
        theState.applyState();
    }

    @Override
    public void setEnabled(final boolean bEnabled) {
        /* Pass call on to basis button */
        theBasisButton.setEnabled(bEnabled &amp;&amp; isAvailable());
    }

    @Override
    public void setVisible(final boolean pVisible) {
        thePanel.setVisible(pVisible);
    }

    /**
     * Set analysis.
     * @param pAnalysis the analysis.
     */
    public void setAnalysis(final MoneyWiseXAnalysis pAnalysis) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXTransCategoryAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXTransCategoryAnalysisSelect.html#L137">137</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseTransCategoryAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseTransCategoryAnalysisSelect.html#L137">137</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public MoneyWiseXAnalysisTransCategoryFilter getFilter() {
        return theState.getFilter();
    }

    @Override
    public boolean isAvailable() {
        return theCategories != null
                &amp;&amp; !theCategories.isEmpty();
    }

    /**
     * Create SavePoint.
     */
    public void createSavePoint() {
        /* Create the savePoint */
        theSavePoint = new MoneyWiseEventState(theState);
    }

    /**
     * Restore SavePoint.
     */
    public void restoreSavePoint() {
        /* Restore the savePoint */
        theState = new MoneyWiseEventState(theSavePoint);

        /* Apply the state */
        theState.applyState();
    }

    @Override
    public void setEnabled(final boolean bEnabled) {
        /* Pass call on to button */
        theButton.setEnabled(bEnabled &amp;&amp; isAvailable());
    }

    @Override
    public void setVisible(final boolean pVisible) {
        thePanel.setVisible(pVisible);
    }

    /**
     * Set analysis.
     * @param pAnalysis the analysis.
     */
    public void setAnalysis(final MoneyWiseXAnalysis pAnalysis) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\panel\MoneyWiseXEventTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/panel/MoneyWiseXEventTable.html#L822">822</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\panel\MoneyWiseTransactionTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/panel/MoneyWiseTransactionTable.html#L827">827</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theActiveTran.buildReturnedAccountMenu(pMenu, pEvent);
    }

    /**
     * New item.
     */
    private void addNewItem() {
        /* Make sure that we have finished editing */
        cancelEditing();

        /* Create a new profile */
        final OceanusProfile myTask = getView().getNewProfile(&quot;addNewItem&quot;);

        /* Create the new transaction */
        myTask.startTask(&quot;buildItem&quot;);
        final MoneyWiseValidateTransaction myBuilder = (MoneyWiseValidateTransaction) theTransactions.getValidator();
        final MoneyWiseTransaction myTrans = theFilter.buildNewTransaction(myBuilder);

        /* If we have one available */
        if (myTrans != null) {
            /* Add the new item */
            myTask.startTask(&quot;addToList&quot;);
            theTransactions.add(myTrans);
            myTrans.setNewVersion();

            /* Validate the new item and notify of the changes */
            myTask.startTask(&quot;incrementVersion&quot;);
            getEditSet().incrementVersion();

            /* validate the item */
            myTask.startTask(&quot;validate&quot;);
            myTrans.validate();

            /* Lock the table */
            myTask.startTask(&quot;setItem&quot;);
            theActiveTran.setNewItem(theAnalysisMgr.getAnalysis().getEvents().newTransaction(myTrans));</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\archive\MoneyWiseArchiveAccount.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/archive/MoneyWiseArchiveAccount.html#L465">465</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\archive\MoneyWiseArchiveAccount.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/archive/MoneyWiseArchiveAccount.html#L542">542</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>private void processDeposit(final PrometheusSheetView pView,
                                final PrometheusSheetRow pRow) throws OceanusException {
        /* Access name and type */
        int iAdjust = -1;
        final String myName = pView.getRowCellByIndex(pRow, ++iAdjust).getString();
        final String myType = pView.getRowCellByIndex(pRow, ++iAdjust).getString();

        /* Skip class */
        ++iAdjust;

        /* Handle closed which may be missing */
        PrometheusSheetCell myCell = pView.getRowCellByIndex(pRow, ++iAdjust);
        Boolean isClosed = Boolean.FALSE;
        if (myCell != null) {
            isClosed = myCell.getBoolean();
        }

        /* Access Parent account */
        final String myParent = pView.getRowCellByIndex(pRow, ++iAdjust).getString();

        /* Skip alias and portfolio columns */
        ++iAdjust;
        ++iAdjust;</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\quicken\file\MoneyWiseQIFPortfolioBuilder.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/quicken/file/MoneyWiseQIFPortfolioBuilder.html#L204">204</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\quicken\file\MoneyWiseQIFPortfolioBuilder.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/quicken/file/MoneyWiseQIFPortfolioBuilder.html#L278">278</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>protected void processIncomeToSecurity(final MoneyWisePayee pPayee,
                                           final MoneyWiseSecurityHolding pHolding,
                                           final MoneyWiseTransaction pTrans) {
        /* Access Portfolio Account */
        final MoneyWisePortfolio myPort = pHolding.getPortfolio();
        final MoneyWiseSecurity mySecurity = pHolding.getSecurity();
        final MoneyWiseQIFAccountEvents myPortfolio = theFile.registerAccount(myPort);

        /* Determine style */
        final boolean useHoldingAccount = theFileType.useInvestmentHolding4Category();

        /* Access Transaction details */
        final MoneyWiseQIFPayee myQPayee = theFile.registerPayee(pPayee);
        final MoneyWiseQIFSecurity myQSecurity = theFile.registerSecurity(mySecurity);
        final MoneyWiseQIFEventCategory myQCategory = theFile.registerCategory(pTrans.getCategory());

        /* Obtain classes */
        final List&lt;MoneyWiseQIFClass&gt; myList = theBuilder.getTransactionClasses(pTrans);

        /* Access details */
        final OceanusMoney myAmount = pTrans.getAmount();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportAssetGains.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportAssetGains.html#L105">105</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportPortfolioView.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportPortfolioView.html#L126">126</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theBuilder.makeTitleCell(myTable, TEXT_GAINS);

        /* Loop through the Portfolio Buckets */
        final Iterator&lt;MoneyWiseXAnalysisPortfolioBucket&gt; myIterator = myPortfolios.iterator();
        while (myIterator.hasNext()) {
            final MoneyWiseXAnalysisPortfolioBucket myBucket = myIterator.next();

            /* Access bucket name */
            final String myName = myBucket.getName();

            /* Access values */
            final MoneyWiseXAnalysisSecurityValues myValues = myBucket.getValues();

            /* Format the Asset */
            theBuilder.startRow(myTable);
            theBuilder.makeDelayLinkCell(myTable, myName);

            /* Handle values bucket value */
            theBuilder.makeValueCell(myTable, myBucket.getNonCashValue(false));
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisSecurityAttr.RESIDUALCOST));
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseXAnalysisSecurityAttr.REALISEDGAINS));</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXCashAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXCashAnalysisSelect.html#L489">489</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseCashAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseCashAnalysisSelect.html#L492">492</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theFilter = new MoneyWiseXAnalysisCashFilter(theCash);
                theFilter.setDateRange(theDateRange);
            } else {
                theFilter = null;
            }
        }

        /**
         * Set new Category.
         * @param pCategory the Category
         * @return true/false did a change occur
         */
        private boolean setCategory(final MoneyWiseCashCategory pCategory) {
            /* Adjust the selected category */
            if (!MetisDataDifference.isEqual(pCategory, theCategory)) {
                setTheCash(pCategory, getDefaultCash(pCategory));
                return true;
            }
            return false;
        }

        /**
         * Set the dateRange.
         * @param pRange the dateRange
         */
        private void setDateRange(final OceanusDateRange pRange) {
            /* Store the dateRange */
            theDateRange = pRange;
            if (theFilter != null) {
                theFilter.setDateRange(theDateRange);
            }
        }

        /**
         * Apply the State.
         */
        private void applyState() {
            /* Adjust the lock-down */
            setEnabled(true);
            theCashButton.setValue(theCash);
            theCatButton.setValue(theCategory);
        }
    }
}</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXDepositAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXDepositAnalysisSelect.html#L484">484</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseDepositAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseDepositAnalysisSelect.html#L487">487</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theFilter = new MoneyWiseXAnalysisDepositFilter(theDeposit);
                theFilter.setDateRange(theDateRange);
            } else {
                theFilter = null;
            }
        }

        /**
         * Set new Category.
         * @param pCategory the Category
         * @return true/false did a change occur
         */
        private boolean setCategory(final MoneyWiseDepositCategory pCategory) {
            /* Adjust the selected category */
            if (!MetisDataDifference.isEqual(pCategory, theCategory)) {
                setTheDeposit(pCategory, getDefaultDeposit(pCategory));
                return true;
            }
            return false;
        }

        /**
         * Set the dateRange.
         * @param pRange the dateRange
         */
        private void setDateRange(final OceanusDateRange pRange) {
            /* Store the dateRange */
            theDateRange = pRange;
            if (theFilter != null) {
                theFilter.setDateRange(theDateRange);
            }
        }

        /**
         * Apply the State.
         */
        private void applyState() {
            /* Adjust the lock-down */
            setEnabled(true);
            theDepositButton.setValue(theDeposit);
            theCatButton.setValue(theCategory);
        }
    }
}</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXLoanAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXLoanAnalysisSelect.html#L491">491</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseLoanAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseLoanAnalysisSelect.html#L494">494</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theFilter = new MoneyWiseXAnalysisLoanFilter(theLoan);
                theFilter.setDateRange(theDateRange);
            } else {
                theFilter = null;
            }
        }

        /**
         * Set new Category.
         * @param pCategory the Category
         * @return true/false did a change occur
         */
        private boolean setCategory(final MoneyWiseLoanCategory pCategory) {
            /* Adjust the selected category */
            if (!MetisDataDifference.isEqual(pCategory, theCategory)) {
                setTheLoan(pCategory, getDefaultLoan(pCategory));
                return true;
            }
            return false;
        }

        /**
         * Set the dateRange.
         * @param pRange the dateRange
         */
        private void setDateRange(final OceanusDateRange pRange) {
            /* Store the dateRange */
            theDateRange = pRange;
            if (theFilter != null) {
                theFilter.setDateRange(theDateRange);
            }
        }

        /**
         * Apply the State.
         */
        private void applyState() {
            /* Adjust the lock-down */
            setEnabled(true);
            theLoanButton.setValue(theLoan);
            theCatButton.setValue(theCategory);
        }
    }
}</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseLoanInfoSet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseLoanInfoSet.html#L102">102</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseSecurityInfoSet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseSecurityInfoSet.html#L118">118</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>return myValue != null
                ? myValue
                : MetisDataFieldValue.SKIP;
    }

    /**
     * Obtain the class of the field if it is an infoSet field.
     * @param pField the field
     * @return the class
     */
    public static MoneyWiseAccountInfoClass getClassForField(final MetisDataFieldId pField) {
        /* Look up field in map */
        return FIELDSET_MAP.get(pField);
    }

    /**
     * Obtain the field for the infoSet class.
     * @param pClass the class
     * @return the field
     */
    public static MetisDataFieldId getFieldForClass(final MoneyWiseAccountInfoClass pClass) {
        /* Look up field in map */
        return REVERSE_FIELDMAP.get(pClass);
    }

    @Override
    public MetisDataFieldId getFieldForClass(final PrometheusDataInfoClass pClass) {
        return getFieldForClass((MoneyWiseAccountInfoClass) pClass);
    }

    @Override
    public Iterator&lt;PrometheusDataInfoClass&gt; classIterator() {
        final PrometheusDataInfoClass[] myValues = MoneyWiseAccountInfoClass.values();
        return Arrays.stream(myValues).iterator();
    }

    /**
     * Clone the dataInfoSet.
     * @param pSource the InfoSet to clone
     */
    protected void cloneDataInfoSet(final MoneyWiseLoanInfoSet pSource) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWisePayeeInfoSet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWisePayeeInfoSet.html#L102">102</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseSecurityInfoSet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseSecurityInfoSet.html#L118">118</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>return myValue != null
                ? myValue
                : MetisDataFieldValue.SKIP;
    }

    /**
     * Obtain the class of the field if it is an infoSet field.
     * @param pField the field
     * @return the class
     */
    public static MoneyWiseAccountInfoClass getClassForField(final MetisDataFieldId pField) {
        /* Look up field in map */
        return FIELDSET_MAP.get(pField);
    }

    /**
     * Obtain the field for the infoSet class.
     * @param pClass the class
     * @return the field
     */
    public static MetisDataFieldId getFieldForClass(final MoneyWiseAccountInfoClass pClass) {
        /* Look up field in map */
        return REVERSE_FIELDMAP.get(pClass);
    }

    @Override
    public MetisDataFieldId getFieldForClass(final PrometheusDataInfoClass pClass) {
        return getFieldForClass((MoneyWiseAccountInfoClass) pClass);
    }

    @Override
    public Iterator&lt;PrometheusDataInfoClass&gt; classIterator() {
        final PrometheusDataInfoClass[] myValues = MoneyWiseAccountInfoClass.values();
        return Arrays.stream(myValues).iterator();
    }

    /**
     * Clone the dataInfoSet.
     * @param pSource the InfoSet to clone
     */
    protected void cloneDataInfoSet(final MoneyWisePayeeInfoSet pSource) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWisePortfolioInfoSet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWisePortfolioInfoSet.html#L102">102</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseSecurityInfoSet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseSecurityInfoSet.html#L118">118</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>return myValue != null
                ? myValue
                : MetisDataFieldValue.SKIP;
    }

    /**
     * Obtain the class of the field if it is an infoSet field.
     * @param pField the field
     * @return the class
     */
    public static MoneyWiseAccountInfoClass getClassForField(final MetisDataFieldId pField) {
        /* Look up field in map */
        return FIELDSET_MAP.get(pField);
    }

    /**
     * Obtain the field for the infoSet class.
     * @param pClass the class
     * @return the field
     */
    public static MetisDataFieldId getFieldForClass(final MoneyWiseAccountInfoClass pClass) {
        /* Look up field in map */
        return REVERSE_FIELDMAP.get(pClass);
    }

    @Override
    public MetisDataFieldId getFieldForClass(final PrometheusDataInfoClass pClass) {
        return getFieldForClass((MoneyWiseAccountInfoClass) pClass);
    }

    @Override
    public Iterator&lt;PrometheusDataInfoClass&gt; classIterator() {
        final PrometheusDataInfoClass[] myValues = MoneyWiseAccountInfoClass.values();
        return Arrays.stream(myValues).iterator();
    }

    /**
     * Clone the dataInfoSet.
     * @param pSource the InfoSet to clone
     */
    protected void cloneDataInfoSet(final MoneyWisePortfolioInfoSet pSource) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportAssetGains.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportAssetGains.html#L105">105</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportPortfolioView.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportPortfolioView.html#L126">126</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theBuilder.makeTitleCell(myTable, TEXT_GAINS);

        /* Loop through the Portfolio Buckets */
        final Iterator&lt;MoneyWiseAnalysisPortfolioBucket&gt; myIterator = myPortfolios.iterator();
        while (myIterator.hasNext()) {
            final MoneyWiseAnalysisPortfolioBucket myBucket = myIterator.next();

            /* Access bucket name */
            final String myName = myBucket.getName();

            /* Access values */
            final MoneyWiseAnalysisSecurityValues myValues = myBucket.getValues();

            /* Format the Asset */
            theBuilder.startRow(myTable);
            theBuilder.makeDelayLinkCell(myTable, myName);

            /* Handle values bucket value */
            theBuilder.makeValueCell(myTable, myBucket.getNonCashValue(false));
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisSecurityAttr.RESIDUALCOST));
            theBuilder.makeValueCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisSecurityAttr.REALISEDGAINS));</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\base\MoneyWiseCategoryTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/base/MoneyWiseCategoryTable.html#L148">148</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseRegionTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseRegionTable.html#L113">113</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseTransTagTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseTransTagTable.html#L113">113</a></td></tr>
<tr class="a">
<td colspan="2">
<pre>final TethysUIIconMapSet&lt;MetisAction&gt; myActionMapSet = MetisIcon.configureStatusIconButton(myGuiFactory);
        myTable.declareIconColumn(PrometheusDataResource.DATAITEM_TOUCH, MetisAction.class)
                .setIconMapSet(r -&gt; myActionMapSet)
                .setCellValueFactory(r -&gt; r.isActive() ? MetisAction.ACTIVE : MetisAction.DELETE)
                .setName(MoneyWiseUIResource.STATICDATA_ACTIVE.getValue())
                .setEditable(true)
                .setCellEditable(r -&gt; !r.isActive())
                .setColumnWidth(WIDTH_ICON)
                .setOnCommit((r, v) -&gt; updateField(this::deleteRow, r, v));

        /* Add listeners */
        myNewButton.getEventRegistrar().addEventListener(e -&gt; addNewItem());</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseAccountPanel.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseAccountPanel.html#L554">554</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseCategoryPanel.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseCategoryPanel.html#L535">535</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>showPanel(PanelName.PAYEES);
        }
    }

    /**
     * Show panel.
     * @param pName the panel name
     */
    private void showPanel(final PanelName pName) {
        /* Obtain name of panel */
        final String myName = pName.toString();

        /* Move correct card to front */
        theCardPanel.selectCard(myName);
        theFilterCardPanel.selectCard(myName);

        /* Note the active panel */
        theActive = pName;
        theSelectButton.setFixedText(myName);

        /* Determine the focus */
        determineFocus();
    }

    /**
     * Set Visibility.
     */
    protected void setVisibility() {
        /* Determine whether we have updates */
        final boolean hasUpdates = hasUpdates();
        final boolean isItemEditing = isItemEditing();

        /* Update the action buttons */
        theActionButtons.setEnabled(true);
        theActionButtons.setVisible(hasUpdates &amp;&amp; !isItemEditing);

        /* Update the selection */
        theSelectButton.setEnabled(!isItemEditing);
        theFilterCardPanel.setEnabled(!isItemEditing);

        /* Alert listeners that there has been a change */
        theEventManager.fireEvent(PrometheusDataEvent.ADJUSTVISIBILITY);
    }

    /**
     * handleErrorPane.
     */
    private void handleErrorPane() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseMarketPricesTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseMarketPricesTable.html#L391">391</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseMarketRatesTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseMarketRatesTable.html#L385">385</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>}

        @Override
        public OceanusEventRegistrar&lt;PrometheusDataEvent&gt; getEventRegistrar() {
            return theEventManager.getEventRegistrar();
        }

        /**
         * handleErrorPane.
         */
        private void handleErrorPane() {
            /* Determine whether we have an error */
            final boolean isError = theError.hasError();

            /* Hide selection panel on error */
            theTable.getSelect().setVisible(!isError);

            /* Lock scroll area */
            theTable.setEnabled(!isError);

            /* Lock Action Buttons */
            theActionButtons.setEnabled(!isError);
        }

        /**
         * handle Action Buttons.
         * @param pEvent the event
         */
        private void handleActionButtons(final OceanusEvent&lt;PrometheusUIEvent&gt; pEvent) {
            /* Cancel editing */
            theTable.cancelEditing();

            /* Perform the command */
            theEditSet.processCommand(pEvent.getEventId(), theError);

            /* Adjust for changes */
            theTable.notifyChanges();
        }

        /**
         * Determine Focus.
         */
        public void determineFocus() {
            /* Request the focus */
            theTable.determineFocus();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportBalanceSheet.html#L758">758</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportNetWorth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportNetWorth.html#L778">778</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>setFilterForId(myFullName, myBucket);
        }

        /* Return the table */
        return myTable;
    }

    @Override
    public MoneyWiseXAnalysisFilter&lt;?, ?&gt; processFilter(final Object pSource) {
        /* If this is a DepositBucket */
        if (pSource instanceof MoneyWiseXAnalysisDepositBucket mySource) {
            /* Create the new filter */
            return new MoneyWiseXAnalysisDepositFilter(mySource);
        }
        /* If this is a CashBucket */
        if (pSource instanceof MoneyWiseXAnalysisCashBucket mySource) {
            /* Create the new filter */
            return new MoneyWiseXAnalysisCashFilter(mySource);
        }
        /* If this is a LoanBucket */
        if (pSource instanceof MoneyWiseXAnalysisLoanBucket mySource) {
            /* Create the new filter */
            return new MoneyWiseXAnalysisLoanFilter(mySource);
        }
        /* If this is a SecurityBucket */
        if (pSource instanceof MoneyWiseXAnalysisSecurityBucket mySource) {
            /* Create the new filter */
            return new MoneyWiseXAnalysisSecurityFilter(mySource);
        }
        /* If this is a PortfolioBucket */
        if (pSource instanceof MoneyWiseXAnalysisPortfolioBucket mySource) {
            /* Create the new filter */
            return new MoneyWiseXAnalysisPortfolioCashFilter(mySource);
        }
        return null;
    }
}</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\reports\MoneyWiseXReportCapitalGains.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/reports/MoneyWiseXReportCapitalGains.html#L121">121</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportCapitalGains.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportCapitalGains.html#L121">121</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theEndDate = pAnalysis.getDateRange().getEnd();

        /* Start the report */
        final Element myBody = theBuilder.startReport();
        theBuilder.makeTitle(myBody, TEXT_TITLE, theFormatter.formatObject(theEndDate));
        theBuilder.makeSubTitle(myBody, theSecurity.getDecoratedName());

        /* Initialise the table */
        theTable = theBuilder.startTable(myBody);
        theBuilder.startHdrRow(theTable);
        theBuilder.makeTitleCell(theTable, MoneyWiseBasicResource.MONEYWISEDATA_FIELD_DATE.getValue());
        theBuilder.makeTitleCell(theTable, MoneyWiseBasicDataType.TRANSACTION.getItemName());

        /* Format the history */
        formatHistory();

        /* Return the document */
        return theBuilder.getDocument();
    }

    /**
     * format the cost history.
     */
    private void formatHistory() {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXAnalysisSelect.html#L941">941</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseAnalysisSelect.html#L961">961</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theAnalysis = theAnalysisMgr.getRangedAnalysis(getRange());
            setAnalysis();

            /* Validate state and apply */
            checkType();
            theState.applyState();

            /* Remove refreshing flag and notify listeners */
            isRefreshing = false;
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }
    }

    /**
     * Set RangeSelect visibility.
     * @param pVisible the visibility setting
     */
    private void setRangeVisibility(final boolean pVisible) {
        theRangeButton.setIcon(pVisible
                ? TethysUIArrowIconId.UP
                : TethysUIArrowIconId.DOWN);
        theRangeSelect.setVisible(pVisible);
        isRangeVisible = pVisible;
    }

    /**
     * Set FilterSelect visibility.
     * @param pVisible the visibility setting
     */
    private void setFilterVisibility(final boolean pVisible) {
        theFilterButton.setIcon(pVisible
                ? TethysUIArrowIconId.UP
                : TethysUIArrowIconId.DOWN);
        theFilterSelect.setVisible(pVisible);
        isFilterVisible = pVisible;
    }

    /**
     * Handle New Bucket.
     */
    private void handleNewBucket() {
        /* Ignore if we are refreshing */
        if (isRefreshing) {
            return;
        }

        final MoneyWiseXAnalysisAttribute myBucket = theBucketButton.getValue();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportBalanceSheet.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportBalanceSheet.html#L758">758</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportNetWorth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportNetWorth.html#L778">778</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>setFilterForId(myFullName, myBucket);
        }

        /* Return the table */
        return myTable;
    }

    @Override
    public MoneyWiseAnalysisFilter&lt;?, ?&gt; processFilter(final Object pSource) {
        /* If this is a DepositBucket */
        if (pSource instanceof MoneyWiseAnalysisDepositBucket mySource) {
            /* Create the new filter */
            return new MoneyWiseAnalysisDepositFilter(mySource);
        }
        /* If this is a CashBucket */
        if (pSource instanceof MoneyWiseAnalysisCashBucket mySource) {
            /* Create the new filter */
            return new MoneyWiseAnalysisCashFilter(mySource);
        }
        /* If this is a LoanBucket */
        if (pSource instanceof MoneyWiseAnalysisLoanBucket mySource) {
            /* Create the new filter */
            return new MoneyWiseAnalysisLoanFilter(mySource);
        }
        /* If this is a SecurityBucket */
        if (pSource instanceof MoneyWiseAnalysisSecurityBucket mySource) {
            /* Create the new filter */
            return new MoneyWiseAnalysisSecurityFilter(mySource);
        }
        /* If this is a PortfolioBucket */
        if (pSource instanceof MoneyWiseAnalysisPortfolioBucket mySource) {
            /* Create the new filter */
            return new MoneyWiseAnalysisPortfolioCashFilter(mySource);
        }
        return null;
    }
}</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\panel\MoneyWiseXReportTab.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/panel/MoneyWiseXReportTab.html#L270">270</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\panel\MoneyWiseReportTab.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/panel/MoneyWiseReportTab.html#L264">264</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>: theAnalysisMgr.getRangedAnalysis(myRange);

        /* Record analysis and build report */
        theSelect.setAnalysis(myAnalysis);
        final Document myDoc = theBuilder.createReport(myAnalysis, myReportType, mySecurity);

        /* Declare to debugger */
        theSpotEntry.setObject(myAnalysis);
        theSpotEntry.setVisible(true);

        /* Declare the document */
        theManager.setDocument(myDoc);

        /* Create initial display version */
        final String myText = theManager.formatXML();
        theHTMLPane.setHTMLContent(myText, &quot;&quot;);
    }

    /**
     * handleErrorPane.
     */
    private void handleErrorPane() {
        /* Determine whether we have an error */
        final boolean isError = theError.hasError();

        /* Hide selection panel on error */
        theSelect.setVisible(!isError);

        /* Lock HTML area */
        theHTMLPane.setEnabled(!isError);
    }

    /**
     * handleGoToRequest.
     * @param pEvent the event
     */
    private void handleGoToRequest(final OceanusEvent&lt;MetisReportEvent&gt; pEvent) {
        /* Access the filter */
        final MoneyWiseXAnalysisFilter&lt;?, ?&gt; myFilter = pEvent.getDetails(MoneyWiseXAnalysisFilter.class);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportMarketGrowth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportMarketGrowth.html#L170">170</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\reports\MoneyWiseReportMarketGrowth.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/reports/MoneyWiseReportMarketGrowth.html#L193">193</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theBuilder.makeTotalCell(myTable, myBucket.getNonCashValue(true));
                theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisSecurityAttr.INVESTED));
                theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisSecurityAttr.GROWTHADJUST));
                theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisSecurityAttr.REALISEDGAINS));
                theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisSecurityAttr.MARKETGROWTH));
                if (hasForeign) {
                    theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisSecurityAttr.CURRENCYFLUCT));
                }
                theBuilder.makeTotalCell(myTable, myValues.getMoneyValue(MoneyWiseAnalysisSecurityAttr.MARKETPROFIT));
                checkPortfolioGrowth(myBucket);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\controls\MoneyWiseSpotPricesSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/controls/MoneyWiseSpotPricesSelect.html#L319">319</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\controls\MoneyWiseSpotRatesSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/controls/MoneyWiseSpotRatesSelect.html#L236">236</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public final void setRange(final OceanusDateRange pRange) {
        final OceanusDate myStart = (pRange == null)
                ? null
                : pRange.getStart();
        final OceanusDate myEnd = (pRange == null)
                ? null
                : pRange.getEnd();

        /* Set up range */
        theDateButton.setEarliestDate(myStart);
        theDateButton.setLatestDate(myEnd);
    }

    @Override
    public void setEnabled(final boolean bEnabled) {
        theNext.setEnabled(bEnabled &amp;&amp; (theState.getNextDate() != null));
        thePrev.setEnabled(bEnabled &amp;&amp; (theState.getPrevDate() != null));
        theDateButton.setEnabled(bEnabled);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\panel\MoneyWiseXEventTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/panel/MoneyWiseXEventTable.html#L562">562</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\panel\MoneyWiseTransactionTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/panel/MoneyWiseTransactionTable.html#L567">567</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>void selectStatement(final MoneyWiseXStatementSelect pSelect) {
        /* Update selection */
        theSelect.selectStatement(pSelect);

        /* Set the filter */
        theFilter = theSelect.getFilter();

        /* Ensure that columns are correct */
        adjustColumns(theSelect.showColumns()
                ? theSelect.getColumns()
                : MoneyWiseAnalysisColumnSet.BALANCE);

        /* Update the lists */
        updateList();
    }

    /**
     * handleErrorPane.
     */
    private void handleErrorPane() {
        /* Determine whether we have an error */
        final boolean isError = theError.hasError();

        /* Hide selection panel on error */
        theSelect.setVisible(!isError);

        /* Lock scroll area */
        getTable().setEnabled(!isError);

        /* Lock Action Buttons */
        theActionButtons.setEnabled(!isError);
    }

    @Override
    protected void refreshData() {
        /* Obtain the active profile */
        OceanusProfile myTask = getView().getActiveTask();
        myTask = myTask.startTask(&quot;refreshData&quot;);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\lethe\data\analysis\analyse\MoneyWiseAnalysisTransAnalyser.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/data/analysis/analyse/MoneyWiseAnalysisTransAnalyser.html#L1463">1463</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\data\analysis\analyse\MoneyWiseAnalysisTransAnalyser.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/data/analysis/analyse/MoneyWiseAnalysisTransAnalyser.html#L1628">1628</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final OceanusMoney myForeign = myInvested.convertCurrency(myCreditAsset.getCurrency().getCurrency(), myCreditRate);
            myCreditAsset.adjustCounter(MoneyWiseAnalysisSecurityAttr.FOREIGNINVESTED, myForeign);
        }

        /* Determine final value of the credit stock after the takeOver */
        myCreditUnits = myCreditAsset.getValues().getUnitsValue(MoneyWiseAnalysisSecurityAttr.UNITS);
        OceanusMoney myCreditValue = myCreditUnits.valueAtPrice(myCreditPrice);
        if (isForeignCredit) {
            myCreditValue = myCreditValue.convertCurrency(myCurrency, myCreditRate);
        }

        /* Register the transaction */
        final MoneyWiseAnalysisSecurityValues myCreditValues = myCreditAsset.registerTransaction(theHelper);
        myCreditValues.setValue(MoneyWiseAnalysisSecurityAttr.PRICE, myCreditPrice);
        myCreditValues.setValue(MoneyWiseAnalysisSecurityAttr.XFERREDVALUE, myCreditXferValue);
        myCreditValues.setValue(MoneyWiseAnalysisSecurityAttr.XFERREDCOST, myDebitCost);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXAnalysisSelect.html#L989">989</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseAnalysisSelect.html#L1009">1009</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>final MoneyWiseXAnalysisFilter&lt;?, ?&gt; myFilter = theState.getFilter();
            if (myBucket != null) {
                myFilter.setCurrentAttribute(myBucket);
            }
            theState.applyState();
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }
    }

    /**
     * Handle New Columns.
     */
    private void handleNewColumns() {
        /* Ignore if we are refreshing */
        if (isRefreshing) {
            return;
        }

        /* Record the columns */
        final MoneyWiseAnalysisColumnSet mySet = theColumnButton.getValue();
        if (theState.setColumns(mySet)) {
            theState.applyState();
            theEventManager.fireEvent(PrometheusDataEvent.SELECTIONCHANGED);
        }
    }

    /**
     * Handle FilterType.
     */
    private void handleFilterType() {
        /* Ignore if we are refreshing */
        if (isRefreshing) {
            return;
        }

        /* If the type has changed */
        final MoneyWiseXAnalysisType myType = theFilterTypeButton.getValue();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXDepositAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXDepositAnalysisSelect.html#L174">174</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseDepositAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseDepositAnalysisSelect.html#L174">174</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public MoneyWiseXAnalysisDepositFilter getFilter() {
        return theState.getFilter();
    }

    @Override
    public boolean isAvailable() {
        return theDeposits != null
                &amp;&amp; !theDeposits.isEmpty();
    }

    /**
     * Create SavePoint.
     */
    protected void createSavePoint() {
        /* Create the savePoint */
        theSavePoint = new MoneyWiseDepositState(theState);
    }

    /**
     * Restore SavePoint.
     */
    protected void restoreSavePoint() {
        /* Restore the savePoint */
        theState = new MoneyWiseDepositState(theSavePoint);

        /* Apply the state */
        theState.applyState();
    }

    @Override
    public void setEnabled(final boolean bEnabled) {
        /* Determine whether there are any Deposits to select */
        final boolean dpAvailable = bEnabled &amp;&amp; isAvailable();

        /* Pass call on to buttons */
        theDepositButton.setEnabled(dpAvailable);
        theCatButton.setEnabled(dpAvailable);
    }

    /**
     * Set analysis.
     * @param pAnalysis the analysis.
     */
    public void setAnalysis(final MoneyWiseXAnalysis pAnalysis) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\controls\MoneyWiseXLoanAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/controls/MoneyWiseXLoanAnalysisSelect.html#L174">174</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\controls\MoneyWiseLoanAnalysisSelect.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/controls/MoneyWiseLoanAnalysisSelect.html#L174">174</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>public MoneyWiseXAnalysisLoanFilter getFilter() {
        return theState.getFilter();
    }

    @Override
    public boolean isAvailable() {
        return theLoans != null
                &amp;&amp; !theLoans.isEmpty();
    }

    /**
     * Create SavePoint.
     */
    protected void createSavePoint() {
        /* Create the savePoint */
        theSavePoint = new MoneyWiseLoanState(theState);
    }

    /**
     * Restore SavePoint.
     */
    protected void restoreSavePoint() {
        /* Restore the savePoint */
        theState = new MoneyWiseLoanState(theSavePoint);

        /* Apply the state */
        theState.applyState();
    }

    @Override
    public void setEnabled(final boolean bEnabled) {
        /* Determine whether there are any Loans to select */
        final boolean lnAvailable = bEnabled &amp;&amp; isAvailable();

        /* Pass call on to buttons */
        theLoanButton.setEnabled(lnAvailable);
        theCatButton.setEnabled(lnAvailable);
    }

    /**
     * Set analysis.
     * @param pAnalysis the analysis.
     */
    public void setAnalysis(final MoneyWiseXAnalysis pAnalysis) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\atlas\ui\dialog\MoneyWiseXTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/atlas/ui/dialog/MoneyWiseXTransactionDialog.html#L335">335</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\lethe\ui\dialog\MoneyWiseTransactionDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/lethe/ui/dialog/MoneyWiseTransactionDialog.html#L341">341</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>setEditable(false);
    }

    /**
     * Update editors.
     * @param pRange the date range.
     */
    public void updateEditors(final OceanusDateRange pRange) {
        /* Update the range */
        theRange = pRange;
    }

    /**
     * Handle dateConfig.
     * @param pConfig the dateConfig
     */
    private void handleDateConfig(final OceanusDateConfig pConfig) {
        /* Update Date button */
        pConfig.setEarliestDate(theRange != null
                ? theRange.getStart()
                : null);
        pConfig.setLatestDate(theRange != null
                ? theRange.getEnd()
                : null);
    }

    @Override
    public boolean isDeletable() {
        return getItem() != null &amp;&amp; !getItem().isReconciled();
    }

    @Override
    protected void adjustFields(final boolean isEditable) {
        /* Access the item */
        final MoneyWiseTransaction myTrans = getItem().getTransaction();</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseMarketPricesTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseMarketPricesTable.html#L145">145</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseMarketRatesTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseMarketRatesTable.html#L146">146</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>.setCellEditable(r -&gt; r.getPrice() != null &amp;&amp; !r.isDisabled())
                .setColumnWidth(WIDTH_ICON)
                .setOnCommit((r, v) -&gt; updateField(this::deleteRow, r, v));

        /* Add listeners */
        theSelect.getEventRegistrar().addEventListener(PrometheusDataEvent.SELECTIONCHANGED, e -&gt; handleNewSelection());
        theSelect.getEventRegistrar().addEventListener(PrometheusDataEvent.DOWNLOAD, e -&gt; downloadPrices());
        pView.getEventRegistrar().addEventListener(e -&gt; refreshData());
        pEditSet.getEventRegistrar().addEventListener(e -&gt; updateTableData());
    }</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWisePayeeDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWisePayeeDialog.html#L142">142</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWisePortfolioDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWisePortfolioDialog.html#L151">151</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>theFieldSet.addField(MoneyWiseAccountInfoClass.REFERENCE, myReference, MoneyWisePayee::getReference);

        /* Configure validation checks */
        mySortCode.setValidator(this::isValidSortCode);
        myAccount.setValidator(this::isValidAccount);
        myReference.setValidator(this::isValidReference);
    }

    /**
     * Build web subPanel.
     * @param pFactory the GUI factory
     */
    private void buildWebPanel(final TethysUIFactory&lt;?&gt; pFactory) {
        /* Create a new panel */
        theFieldSet.newPanel(TAB_WEB);

        /* Allocate fields */
        final TethysUIFieldFactory myFields = pFactory.fieldFactory();
        final TethysUICharArrayEditField myWebSite = myFields.newCharArrayField();
        final TethysUICharArrayEditField myCustNo = myFields.newCharArrayField();
        final TethysUICharArrayEditField myUserId = myFields.newCharArrayField();
        final TethysUICharArrayEditField myPassWord = myFields.newCharArrayField();

        /* Assign the fields to the panel */
        theFieldSet.addField(MoneyWiseAccountInfoClass.WEBSITE, myWebSite, MoneyWisePayee::getWebSite);</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseCashCategoryTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseCashCategoryTable.html#L220">220</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseDepositCategoryTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseDepositCategoryTable.html#L220">220</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\panel\MoneyWiseLoanCategoryTable.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/panel/MoneyWiseLoanCategoryTable.html#L220">220</a></td></tr>
<tr class="a">
<td colspan="2">
<pre>final MoneyWiseCashCategory myCategory = theCategories.addNewItem();
            myCategory.setDefaults(getParent());

            /* Set as new and adjust map */
            myTask.startTask(&quot;incrementVersion&quot;);
            myCategory.setNewVersion();
            myCategory.adjustMapForItem();
            getEditSet().incrementVersion();

            /* Validate the new item */
            myTask.startTask(&quot;validate&quot;);
            myCategory.validate();

            /* update panel */
            myTask.startTask(&quot;setItem&quot;);
            theActiveCategory.setNewItem(myCategory);

            /* Lock the table */
            setTableEnabled(false);
            myTask.end();

            /* Handle Exceptions */
        } catch (OceanusException e) {
            /* Build the error */
            final OceanusException myError = new MoneyWiseDataException(&quot;Failed to create new category&quot;, e);

            /* Show the error */
            setError(myError);
        }
    }

    @Override
    protected boolean isFiltered(final MoneyWiseCashCategory pRow) {</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseDeposit.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseDeposit.html#L156">156</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseLoan.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseLoan.html#L152">152</a></td></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\data\basic\MoneyWiseSecurity.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/data/basic/MoneyWiseSecurity.html#L159">159</a></td></tr>
<tr class="a">
<td colspan="2">
<pre>theInfoSet = new MoneyWiseDepositInfoSet(this, pList.getActInfoTypes(), pList.getDepositInfo());
        hasInfoSet = true;
        useInfoSet = true;
    }

    @Override
    public MetisFieldSetDef getDataFieldSet() {
        return FIELD_DEFS;
    }

    @Override
    public boolean includeXmlField(final MetisDataFieldId pField) {
        /* Determine whether fields should be included */
        if (MoneyWiseBasicResource.CATEGORY_NAME.equals(pField)) {
            return true;
        }
        if (MoneyWiseStaticDataType.CURRENCY.equals(pField)) {
            return true;
        }
        if (MoneyWiseBasicResource.ASSET_PARENT.equals(pField)) {
            return true;
        }

        /* Pass call on */
        return super.includeXmlField(pField);
    }

    @Override
    public Long getExternalId() {
        return MoneyWiseAssetType.createExternalId(MoneyWiseAssetType.DEPOSIT, getIndexedId());</pre></td></tr></table>
<table class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWiseCashDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWiseCashDialog.html#L125">125</a></td></tr>
<tr class="a">
<td>net\sourceforge\joceanus\moneywise\ui\dialog\MoneyWiseSecurityDialog.java</td>
<td><a href="./xref/net/sourceforge/joceanus/moneywise/ui/dialog/MoneyWiseSecurityDialog.html#L151">151</a></td></tr>
<tr class="b">
<td colspan="2">
<pre>myCategoryButton.setMenuConfigurator(c -&gt; buildCategoryMenu(c, getItem()));
        myCurrencyButton.setMenuConfigurator(c -&gt; buildCurrencyMenu(c, getItem()));
        final Map&lt;Boolean, TethysUIIconMapSet&lt;Boolean&gt;&gt; myMapSets = MoneyWiseIcon.configureLockedIconButton(pFactory);
        myClosedButton.setIconMapSet(() -&gt; myMapSets.get(theClosedState));

        /* Configure validation checks */
        myName.setValidator(this::isValidName);
        myDesc.setValidator(this::isValidDesc);
    }

    /**
     * Build account subPanel.
     * @param pFactory the GUI factory
     */
    private void buildDetailsPanel(final TethysUIFactory&lt;?&gt; pFactory) {
        /* Create a new panel */
        theFieldSet.newPanel(TAB_DETAILS);

        /* Allocate fields */
        final TethysUIFieldFactory myFields = pFactory.fieldFactory();
        final TethysUIMoneyEditField myOpening = myFields.newMoneyField();</pre></td></tr></table></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Â©      2012â€“2026
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
