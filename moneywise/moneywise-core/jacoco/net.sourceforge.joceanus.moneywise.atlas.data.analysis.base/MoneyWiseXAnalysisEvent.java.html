<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang=""><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MoneyWiseXAnalysisEvent.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">MoneyWise Personal Finance - Core</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.joceanus.moneywise.atlas.data.analysis.base</a> &gt; <span class="el_source">MoneyWiseXAnalysisEvent.java</span></div><h1>MoneyWiseXAnalysisEvent.java</h1><pre class="source lang-java linenums">/*******************************************************************************
 * MoneyWise: Finance Application
 * Copyright 2012,2025 Tony Washer
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not
 * use this file except in compliance with the License.  You may obtain a copy
 * of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 * License for the specific language governing permissions and limitations under
 * the License.
 ******************************************************************************/
package net.sourceforge.joceanus.moneywise.atlas.data.analysis.base;

import net.sourceforge.joceanus.metis.field.MetisFieldSet;
import net.sourceforge.joceanus.moneywise.data.basic.MoneyWiseAssetBase;
import net.sourceforge.joceanus.moneywise.data.basic.MoneyWiseAssetDirection;
import net.sourceforge.joceanus.moneywise.data.basic.MoneyWiseBasicResource;
import net.sourceforge.joceanus.moneywise.data.basic.MoneyWiseExchangeRate;
import net.sourceforge.joceanus.moneywise.data.basic.MoneyWiseSecurityPrice;
import net.sourceforge.joceanus.moneywise.data.basic.MoneyWiseTransAsset;
import net.sourceforge.joceanus.moneywise.data.basic.MoneyWiseTransCategory;
import net.sourceforge.joceanus.moneywise.data.basic.MoneyWiseTransTag;
import net.sourceforge.joceanus.moneywise.data.basic.MoneyWiseTransaction;
import net.sourceforge.joceanus.moneywise.data.statics.MoneyWiseTransInfoClass;
import net.sourceforge.joceanus.oceanus.base.OceanusException;
import net.sourceforge.joceanus.oceanus.date.OceanusDate;
import net.sourceforge.joceanus.oceanus.decimal.OceanusMoney;
import net.sourceforge.joceanus.oceanus.decimal.OceanusRatio;
import net.sourceforge.joceanus.oceanus.decimal.OceanusUnits;
import net.sourceforge.joceanus.prometheus.data.PrometheusDataItem;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Iterator;
import java.util.List;
import java.util.Objects;

/**
 * Analysis Event.
 */
public class MoneyWiseXAnalysisEvent
        extends PrometheusDataItem {
    /**
     * Local Report fields.
     */
<span class="fc" id="L51">    static final MetisFieldSet&lt;MoneyWiseXAnalysisEvent&gt; FIELD_DEFS = MetisFieldSet.newFieldSet(MoneyWiseXAnalysisEvent.class);</span>

    /*
     * FieldIds.
     */
    static {
<span class="fc" id="L57">        FIELD_DEFS.declareLocalField(MoneyWiseXAnalysisBaseResource.EVENT_DATE, MoneyWiseXAnalysisEvent::getDate);</span>
<span class="fc" id="L58">        FIELD_DEFS.declareLocalField(MoneyWiseXAnalysisBaseResource.EVENT_TYPE, MoneyWiseXAnalysisEvent::getEventType);</span>
<span class="fc" id="L59">        FIELD_DEFS.declareLocalField(MoneyWiseBasicResource.TRANSACTION_NAME, MoneyWiseXAnalysisEvent::getTransaction);</span>
<span class="fc" id="L60">        FIELD_DEFS.declareLocalField(MoneyWiseXAnalysisBaseResource.EVENT_PRICES, MoneyWiseXAnalysisEvent::getPrices);</span>
<span class="fc" id="L61">        FIELD_DEFS.declareLocalField(MoneyWiseXAnalysisBaseResource.EVENT_XCHGRATES, MoneyWiseXAnalysisEvent::getXchgRates);</span>
<span class="fc" id="L62">        FIELD_DEFS.declareLocalField(MoneyWiseXAnalysisBaseResource.EVENT_DEPRATES, MoneyWiseXAnalysisEvent::getDepRates);</span>
<span class="fc" id="L63">        FIELD_DEFS.declareLocalField(MoneyWiseXAnalysisBaseResource.EVENT_BALANCES, MoneyWiseXAnalysisEvent::getBalances);</span>
<span class="fc" id="L64">    }</span>

    /**
     * Non-transaction indicator.
     */
    private static final int NONTRANS = 0x40000000;

    /**
     * EventType.
     */
    private final MoneyWiseXAnalysisEventType theEventType;

    /**
     * Transaction.
     */
    private final MoneyWiseTransaction theTransaction;

    /**
     * The Date.
     */
    private final OceanusDate theDate;

    /**
     * The securityPrice List.
     */
    private final List&lt;MoneyWiseSecurityPrice&gt; thePrices;

    /**
     * The exchangeRate List.
     */
    private final List&lt;MoneyWiseExchangeRate&gt; theXchgRates;

    /**
     * The depositRate List.
     */
    private final List&lt;MoneyWiseNewDepositRate&gt; theDepRates;

    /**
     * The opening balance list.
     */
    private final List&lt;MoneyWiseAssetBase&gt; theBalances;

    /**
     * Transaction constructor.
     *
     * @param pList  the owning list
     * @param pTrans the transaction.
     */
    public MoneyWiseXAnalysisEvent(final MoneyWiseXAnalysisEventList pList,
                                   final MoneyWiseTransaction pTrans) {
<span class="fc" id="L114">        super(pList, pTrans.getIndexedId());</span>
<span class="fc" id="L115">        theEventType = MoneyWiseXAnalysisEventType.TRANSACTION;</span>
<span class="fc" id="L116">        theTransaction = pTrans;</span>
<span class="fc" id="L117">        theDate = pTrans.getDate();</span>
<span class="fc" id="L118">        thePrices = null;</span>
<span class="fc" id="L119">        theXchgRates = null;</span>
<span class="fc" id="L120">        theDepRates = null;</span>
<span class="fc" id="L121">        theBalances = null;</span>
<span class="fc" id="L122">    }</span>

    /**
     * Event constructor.
     *
     * @param pList      the owning list
     * @param pEventType the eventType.
     * @param pDate      the date
     */
    public MoneyWiseXAnalysisEvent(final MoneyWiseXAnalysisEventList pList,
                                   final MoneyWiseXAnalysisEventType pEventType,
                                   final OceanusDate pDate) {
<span class="fc" id="L134">        super(pList, determineId(pEventType, pDate));</span>
<span class="fc" id="L135">        theEventType = pEventType;</span>
<span class="fc" id="L136">        theTransaction = null;</span>
<span class="fc" id="L137">        theDate = pDate;</span>
<span class="fc bfc" id="L138" title="All 2 branches covered.">        thePrices = MoneyWiseXAnalysisEventType.SECURITYPRICE == theEventType ? new ArrayList&lt;&gt;() : null;</span>
<span class="fc bfc" id="L139" title="All 2 branches covered.">        theXchgRates = MoneyWiseXAnalysisEventType.XCHANGERATE == theEventType ? new ArrayList&lt;&gt;() : null;</span>
<span class="pc bpc" id="L140" title="1 of 2 branches missed.">        theDepRates = MoneyWiseXAnalysisEventType.DEPOSITRATE == theEventType ? new ArrayList&lt;&gt;() : null;</span>
<span class="fc bfc" id="L141" title="All 2 branches covered.">        theBalances = MoneyWiseXAnalysisEventType.OPENINGBALANCE == theEventType ? new ArrayList&lt;&gt;() : null;</span>
<span class="fc" id="L142">    }</span>

    @Override
    public MetisFieldSetDef getDataFieldSet() {
<span class="fc" id="L146">        return FIELD_DEFS;</span>
    }

    /**
     * Determine the id of a non-transaction event.
     * @param pEventType the eventType
     * @param pDate the date
     * @return the id
     */
    private static Integer determineId(final MoneyWiseXAnalysisEventType pEventType,
                                       final OceanusDate pDate) {
<span class="fc" id="L157">        final int myId = NONTRANS + (pDate.getId() &lt;&lt; 2);</span>
<span class="pc bpc" id="L158" title="1 of 4 branches missed.">        switch (pEventType) {</span>
            case SECURITYPRICE:
<span class="fc" id="L160">                return myId - 1;</span>
            case XCHANGERATE:
<span class="fc" id="L162">                return myId;</span>
            case DEPOSITRATE:
<span class="nc" id="L164">                return myId + 1;</span>
            case OPENINGBALANCE:
            default:
<span class="fc" id="L167">                return myId + 2;</span>
        }
    }

    /**
     * Obtain the event type.
     *
     * @return the eventType
     */
    public MoneyWiseXAnalysisEventType getEventType() {
<span class="fc" id="L177">        return theEventType;</span>
    }

    /**
     * Obtain the transaction.
     *
     * @return the transaction
     */
    public MoneyWiseTransaction getTransaction() {
<span class="fc" id="L186">        return theTransaction;</span>
    }

    /**
     * Obtain the priceList.
     *
     * @return the priceList
     */
    private List&lt;MoneyWiseSecurityPrice&gt; getPrices() {
<span class="nc" id="L195">        return thePrices;</span>
    }

    /**
     * Obtain the xchgRateList.
     *
     * @return the xchgRateList
     */
    private List&lt;MoneyWiseExchangeRate&gt; getXchgRates() {
<span class="nc" id="L204">        return theXchgRates;</span>
    }

    /**
     * Obtain the depositRateList.
     *
     * @return the depositRateList
     */
    private List&lt;MoneyWiseNewDepositRate&gt; getDepRates() {
<span class="nc" id="L213">        return theDepRates;</span>
    }

    /**
     * Obtain the openingBalanceList.
     *
     * @return the openingBalanceList
     */
    private List&lt;MoneyWiseAssetBase&gt; getBalances() {
<span class="nc" id="L222">        return theBalances;</span>
    }

    @Override
    public int compareTo(final Object pThat) {
        /* Handle the trivial cases */
<span class="nc bnc" id="L228" title="All 2 branches missed.">        if (this.equals(pThat)) {</span>
<span class="nc" id="L229">            return 0;</span>
        }
<span class="nc bnc" id="L231" title="All 2 branches missed.">        if (pThat == null) {</span>
<span class="nc" id="L232">            return -1;</span>
        }

        /* Non-DataItems are last */
<span class="nc bnc" id="L236" title="All 2 branches missed.">        if (!(pThat instanceof MoneyWiseXAnalysisEvent)) {</span>
<span class="nc" id="L237">            return -1;</span>
        }

        /* Check date and then data type */
<span class="nc" id="L241">        final MoneyWiseXAnalysisEvent myThat = (MoneyWiseXAnalysisEvent) pThat;</span>
<span class="nc" id="L242">        final int iDiff = theDate.compareTo(myThat.getDate());</span>
<span class="nc bnc" id="L243" title="All 2 branches missed.">        if (iDiff != 0) {</span>
<span class="nc" id="L244">            return iDiff;</span>
        }
<span class="nc bnc" id="L246" title="All 2 branches missed.">        if (theEventType != myThat.getEventType()) {</span>
<span class="nc" id="L247">            return theEventType.compareTo(myThat.getEventType());</span>
        }

        /* Only event types with same date are transactions */
<span class="nc bnc" id="L251" title="All 2 branches missed.">        return theTransaction == null ? 0 : theTransaction.compareTo(myThat.getTransaction());</span>
    }

    @Override
    protected int compareValues(final PrometheusDataItem pThat) {
        /* Check date and then data type */
<span class="nc" id="L257">        final MoneyWiseXAnalysisEvent myThat = (MoneyWiseXAnalysisEvent) pThat;</span>
<span class="nc" id="L258">        final int iDiff = theDate.compareTo(myThat.getDate());</span>
<span class="nc bnc" id="L259" title="All 2 branches missed.">        if (iDiff != 0) {</span>
<span class="nc" id="L260">            return iDiff;</span>
        }
<span class="nc bnc" id="L262" title="All 2 branches missed.">        if (theEventType != myThat.getEventType()) {</span>
<span class="nc" id="L263">            return theEventType.compareTo(myThat.getEventType());</span>
        }

        /* Only event types with same date are transactions */
<span class="nc bnc" id="L267" title="All 2 branches missed.">        return theTransaction == null ? 0 : theTransaction.compareTo(myThat.getTransaction());</span>
    }

    @Override
    public boolean equals(final Object pThat) {
        /* Handle trivial cases */
<span class="nc bnc" id="L273" title="All 2 branches missed.">        if (this == pThat) {</span>
<span class="nc" id="L274">            return true;</span>
<span class="nc bnc" id="L275" title="All 2 branches missed.">        } else if (!(pThat instanceof MoneyWiseXAnalysisEvent)) {</span>
<span class="nc" id="L276">            return false;</span>
        }

        /* Access object correctly */
<span class="nc" id="L280">        final MoneyWiseXAnalysisEvent myThat = (MoneyWiseXAnalysisEvent) pThat;</span>

        /* Ensure date is identical */
<span class="nc bnc" id="L283" title="All 2 branches missed.">        if (!theDate.equals(myThat.getDate())) {</span>
<span class="nc" id="L284">            return false;</span>
        }

        /* Ensure eventType is identical */
<span class="nc bnc" id="L288" title="All 2 branches missed.">        if (theEventType != myThat.getEventType()) {</span>
<span class="nc" id="L289">            return false;</span>
        }

        /* Check transaction */
<span class="nc" id="L293">        return Objects.equals(theTransaction, myThat.getTransaction());</span>
    }

    @Override
    public int hashCode() {
<span class="nc" id="L298">        return Objects.hash(theDate, theEventType, theTransaction);</span>
    }

    /**
     * declare securityPrice.
     *
     * @param pPrice the security Price.
     */
    public void declareSecurityPrice(final MoneyWiseSecurityPrice pPrice) {
<span class="pc bpc" id="L307" title="1 of 2 branches missed.">        if (thePrices != null) {</span>
<span class="fc" id="L308">            thePrices.add(pPrice);</span>
        }
<span class="fc" id="L310">    }</span>

    /**
     * declare exchangeRate.
     *
     * @param pRate the exchangeRate.
     */
    public void declareExchangeRate(final MoneyWiseExchangeRate pRate) {
<span class="pc bpc" id="L318" title="1 of 2 branches missed.">        if (theXchgRates != null) {</span>
<span class="fc" id="L319">            theXchgRates.add(pRate);</span>
        }
<span class="fc" id="L321">    }</span>

    /**
     * declare depositRate.
     *
     * @param pRate the depositRate.
     */
    public void declareDepositRate(final MoneyWiseNewDepositRate pRate) {
<span class="nc bnc" id="L329" title="All 2 branches missed.">        if (theDepRates != null) {</span>
<span class="nc" id="L330">            theDepRates.add(pRate);</span>
        }
<span class="nc" id="L332">    }</span>

    /**
     * declare opening balance.
     *
     * @param pAsset the asset.
     */
    public void declareOpeningBalance(final MoneyWiseAssetBase pAsset) {
<span class="pc bpc" id="L340" title="1 of 2 branches missed.">        if (theBalances != null) {</span>
<span class="fc" id="L341">            theBalances.add(pAsset);</span>
        }
<span class="fc" id="L343">    }</span>

    /**
     * obtain the securityPrice iterator.
     *
     * @return the iterator.
     */
    public Iterator&lt;MoneyWiseSecurityPrice&gt; priceIterator() {
<span class="pc bpc" id="L351" title="1 of 2 branches missed.">        return thePrices != null ? thePrices.iterator() : Collections.emptyIterator();</span>
    }

    /**
     * obtain the exchangeRate iterator.
     *
     * @return the iterator.
     */
    public Iterator&lt;MoneyWiseExchangeRate&gt; xchgRateIterator() {
<span class="pc bpc" id="L360" title="1 of 2 branches missed.">        return theXchgRates != null ? theXchgRates.iterator() : Collections.emptyIterator();</span>
    }

    /**
     * obtain the depositRate iterator.
     *
     * @return the iterator.
     */
    public Iterator&lt;MoneyWiseNewDepositRate&gt; depRateIterator() {
<span class="nc bnc" id="L369" title="All 2 branches missed.">        return theDepRates != null ? theDepRates.iterator() : Collections.emptyIterator();</span>
    }

    /**
     * obtain the openingBalance iterator.
     *
     * @return the iterator.
     */
    public Iterator&lt;MoneyWiseAssetBase&gt; balanceIterator() {
<span class="pc bpc" id="L378" title="1 of 2 branches missed.">        return theBalances != null ? theBalances.iterator() : Collections.emptyIterator();</span>
    }

    /**
     * Obtain the date.
     *
     * @return the date
     */
    public OceanusDate getDate() {
<span class="fc" id="L387">        return theDate;</span>
    }

    /**
     * Set the date.
     *
     * @param pDate the date
     */
    public void setDate(final OceanusDate pDate) {
<span class="nc bnc" id="L396" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L397">            theTransaction.setDate(pDate);</span>
        }
<span class="nc" id="L399">    }</span>

    @Override
    public boolean isHeader() {
<span class="nc bnc" id="L403" title="All 4 branches missed.">        return theTransaction != null &amp;&amp; theTransaction.isHeader();</span>
    }

    /**
     * Obtain the account.
     *
     * @return the account
     */
    public MoneyWiseTransAsset getAccount() {
<span class="pc bpc" id="L412" title="1 of 2 branches missed.">        return theTransaction == null ? null : theTransaction.getAccount();</span>
    }

    /**
     * Set the account.
     *
     * @param pAccount the account
     */
    public void setAccount(final MoneyWiseTransAsset pAccount) {
<span class="nc bnc" id="L421" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L422">            theTransaction.setAccount(pAccount);</span>
        }
<span class="nc" id="L424">    }</span>

    /**
     * Obtain the category.
     *
     * @return the category
     */
    public MoneyWiseTransCategory getCategory() {
<span class="pc bpc" id="L432" title="1 of 2 branches missed.">        return theTransaction == null ? null : theTransaction.getCategory();</span>
    }

    /**
     * Set the category.
     *
     * @param pCategory the category
     */
    public void setCategory(final MoneyWiseTransCategory pCategory) {
<span class="nc bnc" id="L441" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L442">            theTransaction.setCategory(pCategory);</span>
        }
<span class="nc" id="L444">    }</span>

    /**
     * Obtain the direction.
     *
     * @return the direction
     */
    public MoneyWiseAssetDirection getDirection() {
<span class="pc bpc" id="L452" title="1 of 2 branches missed.">        return theTransaction == null ? null : theTransaction.getDirection();</span>
    }

    /**
     * Set the direction.
     *
     * @param pDirection the direction
     */
    public void setDirection(final MoneyWiseAssetDirection pDirection) {
<span class="nc bnc" id="L461" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L462">            theTransaction.setDirection(pDirection);</span>
        }
<span class="nc" id="L464">    }</span>

    /**
     * Obtain the partner.
     *
     * @return the partner
     */
    public MoneyWiseTransAsset getPartner() {
<span class="pc bpc" id="L472" title="1 of 2 branches missed.">        return theTransaction == null ? null : theTransaction.getPartner();</span>
    }

    /**
     * Set the partner.
     *
     * @param pPartner the partner
     */
    public void setPartner(final MoneyWiseTransAsset pPartner) {
<span class="nc bnc" id="L481" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L482">            theTransaction.setPartner(pPartner);</span>
        }
<span class="nc" id="L484">    }</span>

    /**
     * Obtain the amount.
     *
     * @return the amount
     */
    public OceanusMoney getAmount() {
<span class="pc bpc" id="L492" title="1 of 2 branches missed.">        return theTransaction == null ? null : theTransaction.getAmount();</span>
    }

    /**
     * Set the amount.
     *
     * @param pAmount the amount
     * @throws OceanusException on error
     */
    public void setAmount(final OceanusMoney pAmount) throws OceanusException {
<span class="nc bnc" id="L502" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L503">            theTransaction.setAmount(pAmount);</span>
        }
<span class="nc" id="L505">    }</span>

    /**
     * is the event reconciled?
     *
     * @return true/false
     */
    public Boolean isReconciled() {
<span class="nc bnc" id="L513" title="All 2 branches missed.">        return theTransaction == null ? Boolean.TRUE : theTransaction.isReconciled();</span>
    }

    /**
     * Set the reconciled.
     *
     * @param pReconciled the reconciled flag
     */
    public void setReconciled(final Boolean pReconciled) {
<span class="nc bnc" id="L522" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L523">            theTransaction.setReconciled(pReconciled);</span>
        }
<span class="nc" id="L525">    }</span>

    /**
     * Obtain the comment.
     *
     * @return the comment
     */
    public String getComments() {
<span class="nc bnc" id="L533" title="All 2 branches missed.">        return theTransaction == null ? null : theTransaction.getComments();</span>
    }

    /**
     * Set the comment.
     *
     * @param pComment the comment
     * @throws OceanusException on error
     */
    public void setComments(final String pComment) throws OceanusException {
<span class="nc bnc" id="L543" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L544">            theTransaction.setComments(pComment);</span>
        }
<span class="nc" id="L546">    }</span>

    /**
     * Obtain the reference.
     *
     * @return the reference
     */
    public String getReference() {
<span class="nc bnc" id="L554" title="All 2 branches missed.">        return theTransaction == null ? null : theTransaction.getReference();</span>
    }

    /**
     * Set the reference.
     *
     * @param pReference the reference
     * @throws OceanusException on error
     */
    public void setReference(final String pReference) throws OceanusException {
<span class="nc bnc" id="L564" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L565">            theTransaction.setReference(pReference);</span>
        }
<span class="nc" id="L567">    }</span>

    /**
     * Obtain the taxCredit.
     *
     * @return the taxCredit
     */
    public OceanusMoney getTaxCredit() {
<span class="nc bnc" id="L575" title="All 2 branches missed.">        return theTransaction == null ? null : theTransaction.getTaxCredit();</span>
    }

    /**
     * Set the taxCredit.
     *
     * @param pCredit the taxCredit
     * @throws OceanusException on error
     */
    public void setTaxCredit(final OceanusMoney pCredit) throws OceanusException {
<span class="nc bnc" id="L585" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L586">            theTransaction.setTaxCredit(pCredit);</span>
        }
<span class="nc" id="L588">    }</span>

    /**
     * Obtain the employeesNI.
     *
     * @return the employeesNI
     */
    public OceanusMoney getEmployeeNatIns() {
<span class="nc bnc" id="L596" title="All 2 branches missed.">        return theTransaction == null ? null : theTransaction.getEmployeeNatIns();</span>
    }

    /**
     * Set the employeeNI.
     *
     * @param pNatIns the employeeNI
     * @throws OceanusException on error
     */
    public void setEmployeeNatIns(final OceanusMoney pNatIns) throws OceanusException {
<span class="nc bnc" id="L606" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L607">            theTransaction.setEmployeeNatIns(pNatIns);</span>
        }
<span class="nc" id="L609">    }</span>

    /**
     * Obtain the employerNI.
     *
     * @return the employerNI
     */
    public OceanusMoney getEmployerNatIns() {
<span class="nc bnc" id="L617" title="All 2 branches missed.">        return theTransaction == null ? null : theTransaction.getEmployerNatIns();</span>
    }

    /**
     * Set the employerNI.
     *
     * @param pNatIns the employerNI
     * @throws OceanusException on error
     */
    public void setEmployerNatIns(final OceanusMoney pNatIns) throws OceanusException {
<span class="nc bnc" id="L627" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L628">            theTransaction.setEmployerNatIns(pNatIns);</span>
        }
<span class="nc" id="L630">    }</span>

    /**
     * Obtain the deemedBenefit.
     *
     * @return the deemedBenefit
     */
    public OceanusMoney getDeemedBenefit() {
<span class="nc bnc" id="L638" title="All 2 branches missed.">        return theTransaction == null ? null : theTransaction.getDeemedBenefit();</span>
    }

    /**
     * Set the deemedBenefit.
     *
     * @param pBenefit the benefit
     * @throws OceanusException on error
     */
    public void setDeemedBenefit(final OceanusMoney pBenefit) throws OceanusException {
<span class="nc bnc" id="L648" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L649">            theTransaction.setDeemedBenefit(pBenefit);</span>
        }
<span class="nc" id="L651">    }</span>

    /**
     * Obtain the withheld.
     *
     * @return the withheld
     */
    public OceanusMoney getWithheld() {
<span class="nc bnc" id="L659" title="All 2 branches missed.">        return theTransaction == null ? null : theTransaction.getWithheld();</span>
    }

    /**
     * Set the withheld.
     *
     * @param pWithheld the withheld
     * @throws OceanusException on error
     */
    public void setWithheld(final OceanusMoney pWithheld) throws OceanusException {
<span class="nc bnc" id="L669" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L670">            theTransaction.setWithheld(pWithheld);</span>
        }
<span class="nc" id="L672">    }</span>

    /**
     * Obtain the partnerAmount.
     *
     * @return the partnerAmount
     */
    public OceanusMoney getPartnerAmount() {
<span class="nc bnc" id="L680" title="All 2 branches missed.">        return theTransaction == null ? null : theTransaction.getPartnerAmount();</span>
    }

    /**
     * Set the partnerAmount.
     *
     * @param pAmount the amount
     * @throws OceanusException on error
     */
    public void setPartnerAmount(final OceanusMoney pAmount) throws OceanusException {
<span class="nc bnc" id="L690" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L691">            theTransaction.setEmployeeNatIns(pAmount);</span>
        }
<span class="nc" id="L693">    }</span>

    /**
     * Obtain the returnedCashAccount.
     *
     * @return the returnedCashAccount
     */
    public MoneyWiseTransAsset getReturnedCashAccount() {
<span class="nc bnc" id="L701" title="All 2 branches missed.">        return theTransaction == null ? null : theTransaction.getReturnedCashAccount();</span>
    }

    /**
     * Set the returnedCashAccount.
     *
     * @param pAccount the returnedCashAccount
     * @throws OceanusException on error
     */
    public void setReturnedCashAccount(final MoneyWiseTransAsset pAccount) throws OceanusException {
<span class="nc bnc" id="L711" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L712">            theTransaction.setReturnedCashAccount(pAccount);</span>
        }
<span class="nc" id="L714">    }</span>

    /**
     * Obtain the returnedCash.
     *
     * @return the returnedCash
     */
    public OceanusMoney getReturnedCash() {
<span class="nc bnc" id="L722" title="All 2 branches missed.">        return theTransaction == null ? null : theTransaction.getReturnedCash();</span>
    }

    /**
     * Set the returnedCash.
     *
     * @param pAmount the amount
     * @throws OceanusException on error
     */
    public void setReturnedCash(final OceanusMoney pAmount) throws OceanusException {
<span class="nc bnc" id="L732" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L733">            theTransaction.setReturnedCash(pAmount);</span>
        }
<span class="nc" id="L735">    }</span>

    /**
     * Obtain the accountDeltaUnits.
     *
     * @return the accountDeltaUnits
     */
    public OceanusUnits getAccountDeltaUnits() {
<span class="nc bnc" id="L743" title="All 2 branches missed.">        return theTransaction == null ? null : theTransaction.getAccountDeltaUnits();</span>
    }

    /**
     * Set the accountDeltaUnits.
     *
     * @param pDelta the deltaUnits
     * @throws OceanusException on error
     */
    public void setAccountDeltaUnits(final OceanusUnits pDelta) throws OceanusException {
<span class="nc bnc" id="L753" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L754">            theTransaction.setAccountDeltaUnits(pDelta);</span>
        }
<span class="nc" id="L756">    }</span>

    /**
     * Obtain the partnerDeltaUnits.
     *
     * @return the partnerDeltaUnits
     */
    public OceanusUnits getPartnerDeltaUnits() {
<span class="nc bnc" id="L764" title="All 2 branches missed.">        return theTransaction == null ? null : theTransaction.getPartnerDeltaUnits();</span>
    }

    /**
     * Set the partnerDeltaUnits.
     *
     * @param pDelta the deltaUnits
     * @throws OceanusException on error
     */
    public void setPartnerDeltaUnits(final OceanusUnits pDelta) throws OceanusException {
<span class="nc bnc" id="L774" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L775">            theTransaction.setPartnerDeltaUnits(pDelta);</span>
        }
<span class="nc" id="L777">    }</span>

    /**
     * Obtain the dilution.
     *
     * @return the dilution
     */
    public OceanusRatio getDilution() {
<span class="nc bnc" id="L785" title="All 2 branches missed.">        return theTransaction == null ? null : theTransaction.getDilution();</span>
    }

    /**
     * Set the dilution.
     *
     * @param pDilution the dilution
     * @throws OceanusException on error
     */
    public void setDilution(final OceanusRatio pDilution) throws OceanusException {
<span class="nc bnc" id="L795" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L796">            theTransaction.setDilution(pDilution);</span>
        }
<span class="nc" id="L798">    }</span>

    /**
     * Obtain the transactionTags.
     *
     * @return the transactionTags
     */
    public List&lt;MoneyWiseTransTag&gt; getTransactionTags() {
<span class="nc bnc" id="L806" title="All 2 branches missed.">        return theTransaction == null ? null : theTransaction.getTransactionTags();</span>
    }

    /**
     * Set the transactionTags.
     *
     * @param pTags the tags
     * @throws OceanusException on error
     */
    public void setTransactionTags(final List&lt;MoneyWiseTransTag&gt; pTags) throws OceanusException {
<span class="nc bnc" id="L816" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L817">            theTransaction.setTransactionTags(pTags);</span>
        }
<span class="nc" id="L819">    }</span>

    /**
     * Switch direction.
     */
    public void switchDirection() {
<span class="nc bnc" id="L825" title="All 2 branches missed.">        if (theTransaction != null) {</span>
<span class="nc" id="L826">            theTransaction.switchDirection();</span>
        }
<span class="nc" id="L828">    }</span>

    @Override
    public int getNextVersion() {
<span class="nc" id="L832">        return 0;</span>
    }

    @Override
    public boolean isLocked() {
<span class="nc bnc" id="L837" title="All 4 branches missed.">        return theTransaction == null || theTransaction.isLocked();</span>
    }

    /**
     * Determines whether we can switch direction.
     *
     * @return true/false
     */
    public boolean canSwitchDirection() {
<span class="nc bnc" id="L846" title="All 4 branches missed.">        return theTransaction != null &amp;&amp; theTransaction.canSwitchDirection();</span>
    }

    /**
     * Obtain EventInfo.
     * @param pInfoClass the infoClass
     * @return the Info
     */
    public Object getEventInfo(final MoneyWiseTransInfoClass pInfoClass) {
        /* No info unless this is a transaction */
<span class="pc bpc" id="L856" title="1 of 2 branches missed.">        if (theTransaction == null) {</span>
<span class="nc" id="L857">            return null;</span>
        }

        /* Obtain the relevant info */
<span class="pc bpc" id="L861" title="9 of 16 branches missed.">        switch (pInfoClass) {</span>
<span class="fc" id="L862">            case TAXCREDIT:           return theTransaction.getTaxCredit();</span>
<span class="nc" id="L863">            case EMPLOYEENATINS:      return theTransaction.getEmployeeNatIns();</span>
<span class="nc" id="L864">            case EMPLOYERNATINS:      return theTransaction.getEmployerNatIns();</span>
<span class="fc" id="L865">            case DEEMEDBENEFIT:       return theTransaction.getDeemedBenefit();</span>
<span class="fc" id="L866">            case WITHHELD:            return theTransaction.getWithheld();</span>
<span class="fc" id="L867">            case ACCOUNTDELTAUNITS:   return theTransaction.getAccountDeltaUnits();</span>
<span class="fc" id="L868">            case PARTNERDELTAUNITS:   return theTransaction.getPartnerDeltaUnits();</span>
<span class="nc" id="L869">            case DILUTION:            return theTransaction.getDilution();</span>
<span class="fc" id="L870">            case PRICE:               return theTransaction.getPrice();</span>
<span class="nc" id="L871">            case RETURNEDCASH:        return theTransaction.getReturnedCash();</span>
<span class="nc" id="L872">            case RETURNEDCASHACCOUNT: return theTransaction.getReturnedCashAccount();</span>
<span class="fc" id="L873">            case PARTNERAMOUNT:       return theTransaction.getPartnerAmount();</span>
<span class="nc" id="L874">            case REFERENCE:           return theTransaction.getReference();</span>
<span class="nc" id="L875">            case COMMENTS:            return theTransaction.getComments();</span>
<span class="nc" id="L876">            case TRANSTAG:            return theTransaction.getTransactionTags();</span>
<span class="nc" id="L877">            default:                  return null;</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.14.202510111229</span></div></body></html>