<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang=""><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MoneyWiseTransactionBuilder.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">MoneyWise Personal Finance - Core</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.joceanus.moneywise.data.builder</a> &gt; <span class="el_source">MoneyWiseTransactionBuilder.java</span></div><h1>MoneyWiseTransactionBuilder.java</h1><pre class="source lang-java linenums">/*******************************************************************************
 * MoneyWise: Finance Application
 * Copyright 2012,2025 Tony Washer
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not
 * use this file except in compliance with the License.  You may obtain a copy
 * of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 * License for the specific language governing permissions and limitations under
 * the License.
 ******************************************************************************/
package net.sourceforge.joceanus.moneywise.data.builder;

import net.sourceforge.joceanus.moneywise.data.basic.MoneyWiseAssetDirection;
import net.sourceforge.joceanus.moneywise.data.basic.MoneyWiseDataSet;
import net.sourceforge.joceanus.moneywise.data.basic.MoneyWisePortfolio;
import net.sourceforge.joceanus.moneywise.data.basic.MoneyWiseSecurity;
import net.sourceforge.joceanus.moneywise.data.basic.MoneyWiseTransAsset;
import net.sourceforge.joceanus.moneywise.data.basic.MoneyWiseTransCategory;
import net.sourceforge.joceanus.moneywise.data.basic.MoneyWiseTransTag;
import net.sourceforge.joceanus.moneywise.data.basic.MoneyWiseTransaction;
import net.sourceforge.joceanus.moneywise.exc.MoneyWiseDataException;
import net.sourceforge.joceanus.oceanus.base.OceanusException;
import net.sourceforge.joceanus.oceanus.date.OceanusDate;
import net.sourceforge.joceanus.oceanus.decimal.OceanusMoney;
import net.sourceforge.joceanus.oceanus.decimal.OceanusPrice;
import net.sourceforge.joceanus.oceanus.decimal.OceanusRatio;
import net.sourceforge.joceanus.oceanus.decimal.OceanusUnits;

import java.util.ArrayList;
import java.util.List;

/**
 * Transaction Builder.
 */
public class MoneyWiseTransactionBuilder {
    /**
     * DataSet.
     */
    private final MoneyWiseDataSet theDataSet;

    /**
     * The Tags.
     */
    private final List&lt;MoneyWiseTransTag&gt; theTags;

    /**
     * The Date.
     */
    private OceanusDate theDate;

    /**
     * The Account.
     */
    private MoneyWiseTransAsset theAccount;

    /**
     * The Partner.
     */
    private MoneyWiseTransAsset thePartner;

    /**
     * The direction.
     */
    private MoneyWiseAssetDirection theDirection;

    /**
     * The Transaction Category.
     */
    private MoneyWiseTransCategory theCategory;

    /**
     * The Amount.
     */
    private OceanusMoney theAmount;

    /**
     * The Reconciled.
     */
    private Boolean theReconciled;

    /**
     * The TaxCredit.
     */
    private OceanusMoney theTaxCredit;

    /**
     * The Employers NI.
     */
    private OceanusMoney theErNI;

    /**
     * The Employees NI.
     */
    private OceanusMoney theEeNI;

    /**
     * The Benefit.
     */
    private OceanusMoney theBenefit;

    /**
     * The Withheld.
     */
    private OceanusMoney theWithheld;

    /**
     * The Account Units.
     */
    private OceanusUnits theAccountUnits;

    /**
     * The PartnerUnits.
     */
    private OceanusUnits thePartnerUnits;

    /**
     * The Dilution.
     */
    private OceanusRatio theDilution;

    /**
     * The QualifyYears.
     */
    private Integer theQualifyYears;

    /**
     * The ReturnedCash.
     */
    private OceanusMoney theReturnedCash;

    /**
     * The ReturnedCashAccount.
     */
    private MoneyWiseTransAsset theReturnedCashAccount;

    /**
     * The PartnerAmount.
     */
    private OceanusMoney thePartnerAmount;

    /**
     * The Price.
     */
    private OceanusPrice thePrice;

    /**
     * The Reference.
     */
    private String theReference;

    /**
     * The Comment.
     */
    private String theComment;

    /**
     * Constructor.
     * @param pDataSet the dataSet
     */
<span class="fc" id="L166">    public MoneyWiseTransactionBuilder(final MoneyWiseDataSet pDataSet) {</span>
<span class="fc" id="L167">        theDataSet = pDataSet;</span>
<span class="fc" id="L168">        theReconciled = Boolean.FALSE;</span>
<span class="fc" id="L169">        theTags = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L170">    }</span>

    /**
     * Set Date.
     * @param pDate the date of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder date(final OceanusDate pDate) {
<span class="fc" id="L178">        theDate = pDate;</span>
<span class="fc" id="L179">        return this;</span>
    }

    /**
     * Set the date.
     * @param pDate the Date of the rate.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder date(final String pDate) {
<span class="fc" id="L188">        return date(new OceanusDate(pDate));</span>
    }

    /**
     * Set Account.
     * @param pAccount the account.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder account(final MoneyWiseTransAsset pAccount) {
<span class="nc" id="L197">        theAccount = pAccount;</span>
<span class="nc" id="L198">        return this;</span>
    }

    /**
     * Set Account.
     * @param pAccount the account.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder account(final String pAccount) {
<span class="fc" id="L207">        theAccount = resolveTransactionAsset(pAccount);</span>
<span class="fc" id="L208">        return this;</span>
    }

    /**
     * Set Partner.
     * @param pPartner the partner.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder partner(final MoneyWiseTransAsset pPartner) {
<span class="nc" id="L217">        thePartner = pPartner;</span>
<span class="nc" id="L218">        return this;</span>
    }

    /**
     * Set Partner.
     * @param pPartner the partner.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder partner(final String pPartner) {
<span class="fc" id="L227">        thePartner = resolveTransactionAsset(pPartner);</span>
<span class="fc" id="L228">        return this;</span>
    }

    /**
     * Set To.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder to() {
<span class="fc" id="L236">        theDirection = MoneyWiseAssetDirection.TO;</span>
<span class="fc" id="L237">        return this;</span>
    }

    /**
     * Set From.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder from() {
<span class="fc" id="L245">        theDirection = MoneyWiseAssetDirection.FROM;</span>
<span class="fc" id="L246">        return this;</span>
    }

    /**
     * Set category.
     * @param pCategory the category.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder category(final MoneyWiseTransCategory pCategory) {
<span class="fc" id="L255">        theCategory = pCategory;</span>
<span class="fc" id="L256">        return this;</span>
    }

    /**
     * Set category.
     * @param pCategory the category.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder category(final String pCategory) {
<span class="fc" id="L265">        return category(theDataSet.getTransCategories().findItemByName(pCategory));</span>
    }

    /**
     * Set the amount.
     * @param pAmount the amount of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder amount(final OceanusMoney pAmount) {
<span class="fc" id="L274">        theAmount = pAmount;</span>
<span class="fc" id="L275">        return this;</span>
    }

    /**
     * Set the amount.
     * @param pAmount the amount of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder amount(final String pAmount) {
<span class="fc" id="L284">        return amount(new OceanusMoney(pAmount, theAccount.getCurrency()));</span>
    }

    /**
     * Set the taxCredit.
     * @param pTaxCredit the taxCredit of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder taxCredit(final OceanusMoney pTaxCredit) {
<span class="fc" id="L293">        theTaxCredit = pTaxCredit;</span>
<span class="fc" id="L294">        return this;</span>
    }

    /**
     * Set the taxCredit.
     * @param pTaxCredit the taxCredit of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder taxCredit(final String pTaxCredit) {
<span class="fc" id="L303">        return taxCredit(new OceanusMoney(pTaxCredit, theAccount.getCurrency()));</span>
    }

    /**
     * Set the EmployersNI.
     * @param pNI the EmployersNI of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder employersNI(final OceanusMoney pNI) {
<span class="nc" id="L312">        theErNI = pNI;</span>
<span class="nc" id="L313">        return this;</span>
    }

    /**
     * Set the EmployersNI.
     * @param pNI the EmployersNI of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder employersNI(final String pNI) {
<span class="nc" id="L322">        return employersNI(new OceanusMoney(pNI, theAccount.getCurrency()));</span>
    }

    /**
     * Set the EmployeesNI.
     * @param pNI the EmployeesNI of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder employeesNI(final OceanusMoney pNI) {
<span class="nc" id="L331">        theEeNI = pNI;</span>
<span class="nc" id="L332">        return this;</span>
    }

    /**
     * Set the EmployeesNI.
     * @param pNI the EmployeesNI of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder employeesNI(final String pNI) {
<span class="nc" id="L341">        return employeesNI(new OceanusMoney(pNI, theAccount.getCurrency()));</span>
    }

    /**
     * Set the benefit.
     * @param pBenefit the benefit of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder benefit(final OceanusMoney pBenefit) {
<span class="fc" id="L350">        theBenefit = pBenefit;</span>
<span class="fc" id="L351">        return this;</span>
    }

    /**
     * Set the benefit.
     * @param pBenefit the benefit of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder benefit(final String pBenefit) {
<span class="fc" id="L360">        return benefit(new OceanusMoney(pBenefit, theDataSet.getReportingCurrency().getCurrency()));</span>
    }

    /**
     * Set the withheld.
     * @param pWithheld the withheld of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder withheld(final OceanusMoney pWithheld) {
<span class="fc" id="L369">        theWithheld = pWithheld;</span>
<span class="fc" id="L370">        return this;</span>
    }

    /**
     * Set the withheld.
     * @param pWithheld the withheld of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder withheld(final String pWithheld) {
<span class="fc" id="L379">        return withheld(new OceanusMoney(pWithheld, theAccount.getCurrency()));</span>
    }

    /**
     * Set the partner amount.
     * @param pAmount the partner amount of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder partnerAmount(final OceanusMoney pAmount) {
<span class="fc" id="L388">        thePartnerAmount = pAmount;</span>
<span class="fc" id="L389">        return this;</span>
    }

    /**
     * Set the partner amount.
     * @param pAmount the partner amount of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder partnerAmount(final String pAmount) {
<span class="fc" id="L398">        return partnerAmount(new OceanusMoney(pAmount, thePartner.getCurrency()));</span>
    }

    /**
     * Set the account units.
     * @param pUnits the account units.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder accountUnits(final OceanusUnits pUnits) {
<span class="fc" id="L407">        theAccountUnits = pUnits;</span>
<span class="fc" id="L408">        return this;</span>
    }

    /**
     * Set the account units.
     * @param pUnits the account units.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder accountUnits(final String pUnits) {
<span class="fc" id="L417">        return accountUnits(new OceanusUnits(pUnits));</span>
    }

    /**
     * Set the partner units.
     * @param pUnits the partner units.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder partnerUnits(final OceanusUnits pUnits) {
<span class="fc" id="L426">        thePartnerUnits = pUnits;</span>
<span class="fc" id="L427">        return this;</span>
    }

    /**
     * Set the partner units.
     * @param pUnits the partner units.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder partnerUnits(final String pUnits) {
<span class="fc" id="L436">        return partnerUnits(new OceanusUnits(pUnits));</span>
    }

    /**
     * Set the dilution.
     * @param pDilution the dilution of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder dilution(final OceanusRatio pDilution) {
<span class="nc" id="L445">        theDilution = pDilution;</span>
<span class="nc" id="L446">        return this;</span>
    }

    /**
     * Set the dilution.
     * @param pDilution the dilution of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder dilution(final String pDilution) {
<span class="nc" id="L455">        return dilution(new OceanusRatio(pDilution));</span>
    }

    /**
     * Set the qualifyYears.
     * @param pYears the qualifyYears of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder qualifyYears(final Integer pYears) {
<span class="nc" id="L464">        theQualifyYears = pYears;</span>
<span class="nc" id="L465">        return this;</span>
    }

    /**
     * Set the returnedCash.
     * @param pCash the returnedCash.
     * @param pAccount the account to which the cash was returned
     * @return the builder
     */
    public MoneyWiseTransactionBuilder returnedCash(final OceanusMoney pCash,
                                                    final MoneyWiseTransAsset pAccount) {
<span class="nc" id="L476">        theReturnedCash = pCash;</span>
<span class="nc" id="L477">        theReturnedCashAccount = pAccount;</span>
<span class="nc" id="L478">        return this;</span>
    }

    /**
     * Set the returnedCash.
     * @param pCash the returnedCash.
     * @param pAccount the account to which the cash was returned
     * @return the builder
     */
    public MoneyWiseTransactionBuilder returnedCash(final String pCash,
                                                    final String pAccount) {
<span class="nc" id="L489">        final MoneyWiseTransAsset myAsset = resolveTransactionAsset(pAccount);</span>
<span class="nc bnc" id="L490" title="All 2 branches missed.">        return returnedCash(new OceanusMoney(pCash, myAsset == null ? null : myAsset.getCurrency()), myAsset);</span>
    }

    /**
     * Set the price.
     * @param pPrice the price of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder price(final OceanusPrice pPrice) {
<span class="fc" id="L499">        thePrice = pPrice;</span>
<span class="fc" id="L500">        return this;</span>
    }

    /**
     * Set the price.
     * @param pPrice the price of the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder price(final String pPrice) {
<span class="fc" id="L509">        return price(new OceanusPrice(pPrice, theAccount.getCurrency()));</span>
    }

    /**
     * Set a tag.
     * @param pTag the tag for the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder tag(final MoneyWiseTransTag pTag) {
<span class="nc bnc" id="L518" title="All 2 branches missed.">        if (!theTags.contains(pTag)) {</span>
<span class="nc" id="L519">            theTags.add(pTag);</span>
        }
<span class="nc" id="L521">        return this;</span>
    }

    /**
     * Set a tag.
     * @param pTag the tag for the transaction.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder tag(final String pTag) {
<span class="nc" id="L530">        return tag(theDataSet.getTransactionTags().findItemByName(pTag));</span>
    }

    /**
     * Set reconciled.
     * @return the builder
     */
    public MoneyWiseTransactionBuilder reconciled() {
<span class="nc" id="L538">        theReconciled = Boolean.TRUE;</span>
<span class="nc" id="L539">        return this;</span>
    }

    /**
     * Set reference.
     * @param pRef the reference
     * @return the builder
     */
    public MoneyWiseTransactionBuilder reference(final String pRef) {
<span class="nc" id="L548">        theReference = pRef;</span>
<span class="nc" id="L549">        return this;</span>
    }

    /**
     * Set comment.
     * @param pComment the comment
     * @return the builder
     */
    public MoneyWiseTransactionBuilder comment(final String pComment) {
<span class="nc" id="L558">        theComment = pComment;</span>
<span class="nc" id="L559">        return this;</span>
    }

    /**
     * Build the transaction.
     * @return the new Transaction
     * @throws OceanusException on error
     */
    public MoneyWiseTransaction build() throws OceanusException {
        /* Create the transaction */
<span class="fc" id="L569">        final MoneyWiseTransaction myTrans = theDataSet.getTransactions().addNewItem();</span>
<span class="fc" id="L570">        myTrans.setDate(theDate);</span>
<span class="fc" id="L571">        myTrans.setAccount(theAccount);</span>
<span class="fc" id="L572">        myTrans.setPartner(thePartner);</span>
<span class="fc" id="L573">        myTrans.setDirection(theDirection);</span>
<span class="fc" id="L574">        myTrans.setCategory(theCategory);</span>
<span class="fc" id="L575">        myTrans.setAmount(theAmount);</span>
<span class="fc" id="L576">        myTrans.setReconciled(theReconciled);</span>

        /* Add details */
<span class="fc" id="L579">        myTrans.setComments(theComment);</span>
<span class="fc" id="L580">        myTrans.setReference(theReference);</span>
<span class="fc" id="L581">        myTrans.setTaxCredit(theTaxCredit);</span>
<span class="fc" id="L582">        myTrans.setEmployerNatIns(theErNI);</span>
<span class="fc" id="L583">        myTrans.setEmployeeNatIns(theEeNI);</span>
<span class="fc" id="L584">        myTrans.setDeemedBenefit(theBenefit);</span>
<span class="fc" id="L585">        myTrans.setWithheld(theWithheld);</span>
<span class="fc" id="L586">        myTrans.setPartnerAmount(thePartnerAmount);</span>
<span class="fc" id="L587">        myTrans.setAccountDeltaUnits(theAccountUnits);</span>
<span class="fc" id="L588">        myTrans.setPartnerDeltaUnits(thePartnerUnits);</span>
<span class="fc" id="L589">        myTrans.setDilution(theDilution);</span>
<span class="fc" id="L590">        myTrans.setYears(theQualifyYears);</span>
<span class="fc" id="L591">        myTrans.setReturnedCash(theReturnedCash);</span>
<span class="fc" id="L592">        myTrans.setReturnedCashAccount(theReturnedCashAccount);</span>
<span class="fc" id="L593">        myTrans.setPrice(thePrice);</span>
<span class="fc" id="L594">        myTrans.setTransactionTags(theTags);</span>

        /* Reset the values */
<span class="fc" id="L597">        reset();</span>

        /* Check for errors */
<span class="fc" id="L600">        myTrans.validate();</span>
<span class="fc bfc" id="L601" title="All 2 branches covered.">        if (myTrans.hasErrors()) {</span>
<span class="fc" id="L602">            myTrans.removeItem();</span>
<span class="fc" id="L603">            throw new MoneyWiseDataException(myTrans, &quot;Failed validation&quot;);</span>
        }

        /* Return the transaction */
<span class="fc" id="L607">        return myTrans;</span>
    }

    /**
     * Reset the builder.
     */
    public void reset() {
        /* Reset values */
<span class="fc" id="L615">        theDate = null;</span>
<span class="fc" id="L616">        theAccount = null;</span>
<span class="fc" id="L617">        thePartner = null;</span>
<span class="fc" id="L618">        theDirection = null;</span>
<span class="fc" id="L619">        theCategory = null;</span>
<span class="fc" id="L620">        theAmount = null;</span>
<span class="fc" id="L621">        theComment = null;</span>
<span class="fc" id="L622">        theReference = null;</span>
<span class="fc" id="L623">        theTaxCredit = null;</span>
<span class="fc" id="L624">        theErNI = null;</span>
<span class="fc" id="L625">        theEeNI = null;</span>
<span class="fc" id="L626">        theBenefit = null;</span>
<span class="fc" id="L627">        theWithheld = null;</span>
<span class="fc" id="L628">        thePartnerAmount = null;</span>
<span class="fc" id="L629">        theAccountUnits = null;</span>
<span class="fc" id="L630">        thePartnerUnits = null;</span>
<span class="fc" id="L631">        theDilution = null;</span>
<span class="fc" id="L632">        theQualifyYears = null;</span>
<span class="fc" id="L633">        theReturnedCash = null;</span>
<span class="fc" id="L634">        theReturnedCashAccount = null;</span>
<span class="fc" id="L635">        thePrice = null;</span>
<span class="fc" id="L636">        theTags.clear();</span>
<span class="fc" id="L637">        theReconciled = Boolean.FALSE;</span>
<span class="fc" id="L638">    }</span>

    /**
     * Resolve transactionAsset.
     * @param pAsset the asset name
     * @return the asset
     */
    public MoneyWiseTransAsset resolveTransactionAsset(final String pAsset) {
        /* Look fot security holding */
<span class="fc" id="L647">        final int myIndex = pAsset.lastIndexOf(':');</span>
<span class="fc bfc" id="L648" title="All 2 branches covered.">        if (myIndex != -1) {</span>
            /* Split into portfolio and security */
<span class="fc" id="L650">            final MoneyWiseSecurity mySec = theDataSet.getSecurities().findItemByName(pAsset.substring(myIndex + 1));</span>
<span class="fc" id="L651">            final MoneyWisePortfolio myPort = theDataSet.getPortfolios().findItemByName(pAsset.substring(0, myIndex));</span>

            /* Build security holding */
<span class="pc bpc" id="L654" title="2 of 4 branches missed.">            if (mySec != null &amp;&amp; myPort != null) {</span>
<span class="fc" id="L655">                return theDataSet.getPortfolios().getSecurityHoldingsMap().declareHolding(myPort, mySec);</span>
            } else {
<span class="nc" id="L657">                return null;</span>
            }

        } else {
            /* Look for Payee */
<span class="fc" id="L662">            MoneyWiseTransAsset myAsset = theDataSet.getPayees().findItemByName(pAsset);</span>
<span class="fc bfc" id="L663" title="All 2 branches covered.">            if (myAsset != null) {</span>
<span class="fc" id="L664">                return myAsset;</span>
            }

            /* Look for Deposit */
<span class="fc" id="L668">            myAsset = theDataSet.getDeposits().findItemByName(pAsset);</span>
<span class="fc bfc" id="L669" title="All 2 branches covered.">            if (myAsset != null) {</span>
<span class="fc" id="L670">                return myAsset;</span>
            }

            /* Look for Cash */
<span class="fc" id="L674">            myAsset = theDataSet.getCash().findItemByName(pAsset);</span>
<span class="fc bfc" id="L675" title="All 2 branches covered.">            if (myAsset != null) {</span>
<span class="fc" id="L676">                return myAsset;</span>
            }

            /* Look for Loan */
<span class="fc" id="L680">            myAsset = theDataSet.getLoans().findItemByName(pAsset);</span>
<span class="pc bpc" id="L681" title="1 of 2 branches missed.">            if (myAsset != null) {</span>
<span class="fc" id="L682">                return myAsset;</span>
            }

            /* Look for Portfolio */
<span class="nc" id="L686">            return theDataSet.getPortfolios().findItemByName(pAsset);</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.14.202510111229</span></div></body></html>