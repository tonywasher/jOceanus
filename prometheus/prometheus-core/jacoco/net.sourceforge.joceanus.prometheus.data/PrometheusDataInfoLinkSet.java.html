<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang=""><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PrometheusDataInfoLinkSet.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Prometheus Core Application Framework</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.joceanus.prometheus.data</a> &gt; <span class="el_source">PrometheusDataInfoLinkSet.java</span></div><h1>PrometheusDataInfoLinkSet.java</h1><pre class="source lang-java linenums">/*******************************************************************************
 * Prometheus: Application Framework
 * Copyright 2012,2025 Tony Washer
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not
 * use this file except in compliance with the License.  You may obtain a copy
 * of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 * License for the specific language governing permissions and limitations under
 * the License.
 ******************************************************************************/
package net.sourceforge.joceanus.prometheus.data;

import net.sourceforge.joceanus.metis.data.MetisDataDifference;
import net.sourceforge.joceanus.metis.data.MetisDataItem.MetisDataList;
import net.sourceforge.joceanus.metis.data.MetisDataItem.MetisDataObjectFormat;
import net.sourceforge.joceanus.metis.data.MetisDataState;
import net.sourceforge.joceanus.oceanus.base.OceanusException;
import net.sourceforge.joceanus.oceanus.format.OceanusDataFormatter;
import net.sourceforge.joceanus.tethys.api.base.TethysUIConstant;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

/**
 * Representation of a set of DataInfo links for a DataItem.
 * @author Tony Washer
 * @param &lt;T&gt; the data type
 */
public class PrometheusDataInfoLinkSet&lt;T extends PrometheusDataInfoItem&gt;
        extends PrometheusDataInfoItem {
    /**
     * Item separator.
     */
    public static final String ITEM_SEP = TethysUIConstant.LIST_SEP;

    /**
     * Report fields.
     */
    @SuppressWarnings(&quot;rawtypes&quot;)
<span class="nc" id="L47">    private static final PrometheusEncryptedFieldSet&lt;PrometheusDataInfoLinkSet&gt; FIELD_DEFS = PrometheusEncryptedFieldSet.newEncryptedFieldSet(PrometheusDataInfoLinkSet.class);</span>

    /*
     * FieldIds.
     */
    static {
<span class="nc" id="L53">        FIELD_DEFS.declareLocalField(PrometheusDataResource.DATAINFO_ACTIVE, PrometheusDataInfoLinkSet::getActive);</span>
<span class="nc" id="L54">        FIELD_DEFS.declareLocalField(PrometheusDataResource.DATAINFO_LINKSET, PrometheusDataInfoLinkSet::getLinkSet);</span>
<span class="nc" id="L55">    }</span>

    /**
     * List of active items.
     */
    private final PrometheusInfoSetValueList theActive;

    /**
     * List of underlying items.
     */
    private final PrometheusDataList&lt;T&gt; theLinkSet;

    /**
     * The owner.
     */
    private final PrometheusDataItem theOwner;

    /**
     * The infoType.
     */
    private final PrometheusStaticDataItem theInfoType;

    /**
     * The infoType.
     */
    private final PrometheusDataInfoList&lt;T&gt; theInfoList;

    /**
     * Constructor.
     * @param pList the infoList
     * @param pOwner the set owner
     * @param pInfoType the info type
     */
    protected PrometheusDataInfoLinkSet(final PrometheusDataInfoList&lt;T&gt; pList,
                                        final PrometheusDataItem pOwner,
                                        final PrometheusStaticDataItem pInfoType) {
        /* Call super-constructor */
<span class="nc" id="L92">        super(pList);</span>

        /* Save parameters */
<span class="nc" id="L95">        theOwner = pOwner;</span>
<span class="nc" id="L96">        theInfoType = pInfoType;</span>
<span class="nc" id="L97">        theInfoList = pList;</span>

        /* Allocate the lists */
<span class="nc" id="L100">        theActive = new PrometheusInfoSetValueList();</span>
<span class="nc" id="L101">        theLinkSet = pList.getEmptyList(pList.getStyle());</span>
<span class="nc" id="L102">    }</span>

    /**
     * Constructor.
     * @param pList the infoList
     * @param pSet the infoLinkSet to clone
     */
    protected PrometheusDataInfoLinkSet(final PrometheusDataInfoList&lt;T&gt; pList,
                                        final PrometheusDataInfoLinkSet&lt;T&gt; pSet) {
        /* Call standard constructor */
<span class="nc" id="L112">        this(pList, pSet.getOwner(), pSet.getInfoType());</span>

        /* Iterator through the links */
<span class="nc" id="L115">        final Iterator&lt;T&gt; myIterator = pSet.iterator();</span>
<span class="nc bnc" id="L116" title="All 2 branches missed.">        while (myIterator.hasNext()) {</span>
<span class="nc" id="L117">            final T myLink = myIterator.next();</span>

            /* Add a copy item */
<span class="nc" id="L120">            final T myNew = pList.addCopyItem(myLink);</span>
<span class="nc" id="L121">            theLinkSet.add(myNew);</span>
<span class="nc" id="L122">        }</span>

        /* build active links */
<span class="nc" id="L125">        buildActiveLinks();</span>
<span class="nc" id="L126">    }</span>

    @Override
    public MetisFieldSetDef getDataFieldSet() {
<span class="nc" id="L130">        return FIELD_DEFS;</span>
    }

    @Override
    public String formatObject(final OceanusDataFormatter pFormatter) {
<span class="nc" id="L135">        return theActive.toString();</span>
    }

    @Override
    public PrometheusDataItem getOwner() {
<span class="nc" id="L140">        return theOwner;</span>
    }

    @Override
    public PrometheusStaticDataItem getInfoType() {
<span class="nc" id="L145">        return theInfoType;</span>
    }

    @Override
    public PrometheusDataInfoClass getInfoClass() {
<span class="nc" id="L150">        return (PrometheusDataInfoClass) theInfoType.getStaticClass();</span>
    }

    /**
     * Obtain Active Links.
     * @return the Owner
     */
    public List&lt;Object&gt; getActive() {
<span class="nc bnc" id="L158" title="All 2 branches missed.">        return theActive.isEmpty()</span>
<span class="nc" id="L159">                ? null</span>
<span class="nc" id="L160">                : theActive.getUnderlyingList();</span>
    }

    /**
     * Obtain Active Links.
     * @return the Owner
     */
    private PrometheusDataList&lt;T&gt; getLinkSet() {
<span class="nc" id="L168">        return theLinkSet;</span>
    }

    /**
     * Is the link list empty?
     * @return true/false
     */
    public boolean isEmpty() {
<span class="nc" id="L176">        return theLinkSet.isEmpty();</span>
    }

    /**
     * Add link to Item.
     * @param pItem the item to link to
     */
    public void linkItem(final T pItem) {
        /* If the item is not already linked */
<span class="nc bnc" id="L185" title="All 2 branches missed.">        if (!isItemLinked(pItem)) {</span>
            /* Add the item to the list */
<span class="nc" id="L187">            theLinkSet.add(pItem);</span>
<span class="nc" id="L188">            sortLinks();</span>
        }
<span class="nc" id="L190">    }</span>

    /**
     * Remove link to Item.
     * @param pItem the item to unlink
     */
    public void unlinkItem(final T pItem) {
        /* If the item is already linked */
<span class="nc bnc" id="L198" title="All 2 branches missed.">        if (isItemLinked(pItem)) {</span>
            /* Remove the item from the list */
<span class="nc" id="L200">            theLinkSet.remove(pItem);</span>
<span class="nc" id="L201">            sortLinks();</span>
        }
<span class="nc" id="L203">    }</span>

    /**
     * Check whether an item is linked.
     * @param pItem the item to check
     * @return true/false
     */
    public boolean isItemLinked(final T pItem) {
<span class="nc bnc" id="L211" title="All 2 branches missed.">        return theLinkSet.indexOf(pItem) != -1;</span>
    }

    /**
     * Obtain item linked to value.
     * @param pValue the value to check
     * @return true/false
     */
    public T getItemForValue(final PrometheusDataItem pValue) {
        /* Loop through the list */
<span class="nc" id="L221">        T myItem = null;</span>
<span class="nc" id="L222">        final Iterator&lt;T&gt; myIterator = theLinkSet.iterator();</span>
<span class="nc bnc" id="L223" title="All 2 branches missed.">        while (myIterator.hasNext()) {</span>
<span class="nc" id="L224">            final T myLink = myIterator.next();</span>

            /* If this item is the correct link */
<span class="nc bnc" id="L227" title="All 2 branches missed.">            if (pValue.equals(myLink.getLink())) {</span>
<span class="nc" id="L228">                myItem = myLink;</span>
<span class="nc" id="L229">                break;</span>
            }
<span class="nc" id="L231">        }</span>

        /* Return the item */
<span class="nc" id="L234">        return myItem;</span>
    }

    /**
     * Clear all the links.
     */
    public void clearAllLinks() {
        /* For each existing value */
<span class="nc" id="L242">        final Iterator&lt;T&gt; myIterator = theLinkSet.iterator();</span>
<span class="nc bnc" id="L243" title="All 2 branches missed.">        while (myIterator.hasNext()) {</span>
<span class="nc" id="L244">            final T myLink = myIterator.next();</span>

            /* If the value is active */
<span class="nc bnc" id="L247" title="All 2 branches missed.">            if (!myLink.isDeleted()) {</span>
                /* Set the value as deleted */
<span class="nc" id="L249">                myLink.setDeleted(true);</span>
            }
<span class="nc" id="L251">        }</span>

        /* Clear the active links */
<span class="nc" id="L254">        theActive.clear();</span>
<span class="nc" id="L255">    }</span>

    /**
     * Add/restore all required links.
     * @param pActive the active items
     * @throws OceanusException on error
     */
    public void addNewLinks(final List&lt;? extends PrometheusDataItem&gt; pActive) throws OceanusException {
        /* For each existing value */
<span class="nc" id="L264">        final Iterator&lt;? extends PrometheusDataItem&gt; myIterator = pActive.iterator();</span>
<span class="nc bnc" id="L265" title="All 2 branches missed.">        while (myIterator.hasNext()) {</span>
<span class="nc" id="L266">            final PrometheusDataItem myItem = myIterator.next();</span>

            /* Link the item if it is not currently selected */
<span class="nc bnc" id="L269" title="All 2 branches missed.">            if (!theActive.getUnderlyingList().contains(myItem)) {</span>
                /* If we have never had such a link */
<span class="nc" id="L271">                T myLink = getItemForValue(myItem);</span>
<span class="nc bnc" id="L272" title="All 2 branches missed.">                if (myLink == null) {</span>
                    /* Create the new item */
<span class="nc" id="L274">                    myLink = theInfoList.addNewItem(theOwner, theInfoType);</span>
<span class="nc" id="L275">                    myLink.setValue(myItem);</span>
<span class="nc" id="L276">                    myLink.setValueLink(myItem);</span>
<span class="nc" id="L277">                    myLink.setNewVersion();</span>
<span class="nc" id="L278">                    theLinkSet.add(myLink);</span>

                    /* else restore the value */
                } else {
<span class="nc" id="L282">                    myLink.setDeleted(false);</span>
                }
            }
<span class="nc" id="L285">        }</span>
<span class="nc" id="L286">    }</span>

    /**
     * Clear all unnecessary links.
     * @param pActive the active items
     */
    public void clearUnnecessaryLinks(final List&lt;? extends PrometheusDataItem&gt; pActive) {
        /* For each existing link */
<span class="nc" id="L294">        final Iterator&lt;T&gt; myIterator = theLinkSet.iterator();</span>
<span class="nc bnc" id="L295" title="All 2 branches missed.">        while (myIterator.hasNext()) {</span>
<span class="nc" id="L296">            final T myLink = myIterator.next();</span>
<span class="nc" id="L297">            final PrometheusDataItem myItem = myLink.getLink();</span>

            /* Link the item if it is not currently selected */
<span class="nc bnc" id="L300" title="All 2 branches missed.">            if (!myLink.isDeleted()</span>
<span class="nc bnc" id="L301" title="All 2 branches missed.">                    &amp;&amp; !pActive.contains(myItem)) {</span>
<span class="nc" id="L302">                myLink.setDeleted(true);</span>
            }
<span class="nc" id="L304">        }</span>
<span class="nc" id="L305">    }</span>

    /**
     * Sort the list.
     */
    protected void sortLinks() {
        /* Sort using natural comparison */
<span class="nc" id="L312">        theLinkSet.reSort();</span>
<span class="nc" id="L313">        buildActiveLinks();</span>
<span class="nc" id="L314">    }</span>

    /**
     * Build the active links.
     */
    private void buildActiveLinks() {
        /* Clear the list */
<span class="nc" id="L321">        theActive.clear();</span>

        /* Loop through the list */
<span class="nc" id="L324">        final Iterator&lt;T&gt; myIterator = theLinkSet.iterator();</span>
<span class="nc bnc" id="L325" title="All 2 branches missed.">        while (myIterator.hasNext()) {</span>
<span class="nc" id="L326">            final T myLink = myIterator.next();</span>

            /* Ignore deleted elements */
<span class="nc bnc" id="L329" title="All 2 branches missed.">            if (myLink.isDeleted()) {</span>
<span class="nc" id="L330">                continue;</span>
            }

            /* Add to the list */
<span class="nc" id="L334">            theActive.add(myLink.getLink());</span>
<span class="nc" id="L335">        }</span>
<span class="nc" id="L336">    }</span>

    /**
     * Determine whether any item has changed in this edit view.
     * @return &lt;code&gt;true/false&lt;/code&gt;
     */
    public MetisDataDifference fieldChanged() {
        /* Loop through the list */
<span class="nc" id="L344">        final Iterator&lt;T&gt; myIterator = theLinkSet.iterator();</span>
<span class="nc bnc" id="L345" title="All 2 branches missed.">        while (myIterator.hasNext()) {</span>
<span class="nc" id="L346">            final T myLink = myIterator.next();</span>

            /* Notify if the item has changed */
<span class="nc bnc" id="L349" title="All 2 branches missed.">            if (myLink.hasHistory()</span>
<span class="nc bnc" id="L350" title="All 2 branches missed.">                    || myLink.getOriginalValues().getVersion() &gt; 0) {</span>
<span class="nc" id="L351">                return MetisDataDifference.DIFFERENT;</span>
            }
<span class="nc" id="L353">        }</span>

        /* No change has occurred */
<span class="nc" id="L356">        return MetisDataDifference.IDENTICAL;</span>
    }

    @Override
    public boolean hasHistory() {
        /* Loop through the list */
<span class="nc" id="L362">        final Iterator&lt;T&gt; myIterator = theLinkSet.iterator();</span>
<span class="nc bnc" id="L363" title="All 2 branches missed.">        while (myIterator.hasNext()) {</span>
<span class="nc" id="L364">            final T myLink = myIterator.next();</span>

            /* Notify if the item has changed */
<span class="nc bnc" id="L367" title="All 2 branches missed.">            if (myLink.hasHistory()) {</span>
<span class="nc" id="L368">                return true;</span>
            }
<span class="nc" id="L370">        }</span>

        /* No change has occurred */
<span class="nc" id="L373">        return false;</span>
    }

    @Override
    public void pushHistory() {
        /* Loop through the list */
<span class="nc" id="L379">        final Iterator&lt;T&gt; myIterator = theLinkSet.iterator();</span>
<span class="nc bnc" id="L380" title="All 2 branches missed.">        while (myIterator.hasNext()) {</span>
<span class="nc" id="L381">            final T myLink = myIterator.next();</span>

            /* Notify if the item has changed */
<span class="nc" id="L384">            myLink.pushHistory();</span>
<span class="nc" id="L385">        }</span>
<span class="nc" id="L386">    }</span>

    @Override
    public void popHistory() {
        /* Iterate through table values */
<span class="nc" id="L391">        final Iterator&lt;T&gt; myIterator = iterator();</span>
<span class="nc bnc" id="L392" title="All 2 branches missed.">        while (myIterator.hasNext()) {</span>
<span class="nc" id="L393">            final T myValue = myIterator.next();</span>

            /* If the entry should be removed */
<span class="nc bnc" id="L396" title="All 2 branches missed.">            if (myValue.getOriginalValues().getVersion() &gt; theInfoList.getVersion()) {</span>
                /* Remove the value */
<span class="nc" id="L398">                myIterator.remove();</span>
<span class="nc" id="L399">                myValue.unLink();</span>
<span class="nc" id="L400">                continue;</span>
            }

            /* Pop the value */
<span class="nc" id="L404">            myValue.popHistory();</span>
<span class="nc" id="L405">        }</span>
<span class="nc" id="L406">    }</span>

    @Override
    public boolean checkForHistory() {
        /* Iterate through table values */
<span class="nc" id="L411">        boolean bChanges = false;</span>
<span class="nc" id="L412">        final Iterator&lt;T&gt; myIterator = iterator();</span>
<span class="nc bnc" id="L413" title="All 2 branches missed.">        while (myIterator.hasNext()) {</span>
<span class="nc" id="L414">            final T myValue = myIterator.next();</span>

            /* If this is a newly created item */
<span class="nc bnc" id="L417" title="All 2 branches missed.">            if (!myValue.hasHistory()) {</span>
<span class="nc" id="L418">                bChanges = true;</span>

                /* else existing entry */
            } else {
                /* Check for history */
<span class="nc" id="L423">                bChanges |= myValue.checkForHistory();</span>
            }
<span class="nc" id="L425">        }</span>

        /* return result */
<span class="nc" id="L428">        return bChanges;</span>
    }

    /**
     * Get the State for this infoSet.
     * @return the State
     */
    @Override
    public MetisDataState getState() {
        /* Default to clean */
<span class="nc" id="L438">        final MetisDataState myState = MetisDataState.CLEAN;</span>

        /* Loop through each existing value */
<span class="nc" id="L441">        final Iterator&lt;T&gt; myIterator = iterator();</span>
<span class="nc bnc" id="L442" title="All 2 branches missed.">        while (myIterator.hasNext()) {</span>
<span class="nc" id="L443">            final T myValue = myIterator.next();</span>

            /* If we have changes */
<span class="nc bnc" id="L446" title="All 2 branches missed.">            if (myValue.getState() != MetisDataState.CLEAN) {</span>
                /* Note that new state is changed */
<span class="nc" id="L448">                return MetisDataState.CHANGED;</span>
            }
<span class="nc" id="L450">        }</span>

        /* return result */
<span class="nc" id="L453">        return myState;</span>
    }

    /**
     * Is there active values for the infoClass?
     * @return true/false
     */
    public boolean isExisting() {
        /* Loop through each existing value */
<span class="nc" id="L462">        final Iterator&lt;T&gt; myIterator = iterator();</span>
<span class="nc bnc" id="L463" title="All 2 branches missed.">        while (myIterator.hasNext()) {</span>
<span class="nc" id="L464">            final T myValue = myIterator.next();</span>

            /* If we have changes */
<span class="nc bnc" id="L467" title="All 2 branches missed.">            if (!myValue.isDeleted()) {</span>
                /* Note that new state is changed */
<span class="nc" id="L469">                return true;</span>
            }
<span class="nc" id="L471">        }</span>

        /* No active entry found */
<span class="nc" id="L474">        return false;</span>
    }

    @Override
    public void setDeleted(final boolean bDeleted) {
        /* If we are restoring */
<span class="nc bnc" id="L480" title="All 2 branches missed.">        if (!bDeleted) {</span>
            /* Handle separately */
<span class="nc" id="L482">            setRestored();</span>
<span class="nc" id="L483">            return;</span>
        }

        /* Clear all the links */
<span class="nc" id="L487">        clearAllLinks();</span>
<span class="nc" id="L488">    }</span>

    /**
     * Restore values that we deleted at the same time as the owner.
     */
    private void setRestored() {
        /* Access the version of the owner */
<span class="nc" id="L495">        int myVersion = theOwner.getValueSetVersion();</span>

        /* We are restoring an edit version if delete was in this session */
<span class="nc bnc" id="L498" title="All 2 branches missed.">        final boolean bEditRestore = myVersion &gt; 0;</span>
<span class="nc bnc" id="L499" title="All 2 branches missed.">        if (!bEditRestore) {</span>
            /* Access underlying version if not editRestore */
<span class="nc" id="L501">            myVersion = theOwner.getBase().getValueSetVersion();</span>
        }

        /* For each existing value */
<span class="nc" id="L505">        final Iterator&lt;T&gt; myIterator = theLinkSet.iterator();</span>
<span class="nc bnc" id="L506" title="All 2 branches missed.">        while (myIterator.hasNext()) {</span>
<span class="nc" id="L507">            final T myLink = myIterator.next();</span>

            /* Access version of value */
<span class="nc bnc" id="L510" title="All 2 branches missed.">            final int myValueVersion = bEditRestore</span>
<span class="nc" id="L511">                    ? myLink.getValueSetVersion()</span>
<span class="nc" id="L512">                    : myLink.getBase().getValueSetVersion();</span>

            /* If the value was deleted at same time as owner */
<span class="nc bnc" id="L515" title="All 2 branches missed.">            if (myValueVersion == myVersion) {</span>
                /* Set the value as restored */
<span class="nc" id="L517">                myLink.setDeleted(false);</span>
            }
<span class="nc" id="L519">        }</span>

        /* build the active links */
<span class="nc" id="L522">        buildActiveLinks();</span>
<span class="nc" id="L523">    }</span>

    @Override
    public void touchUnderlyingItems() {
        /* Loop through the list */
<span class="nc" id="L528">        final Iterator&lt;T&gt; myIterator = theLinkSet.iterator();</span>
<span class="nc bnc" id="L529" title="All 2 branches missed.">        while (myIterator.hasNext()) {</span>
<span class="nc" id="L530">            final T myLink = myIterator.next();</span>

            /* If the link is not deleted */
<span class="nc bnc" id="L533" title="All 2 branches missed.">            if (!myLink.isDeleted()) {</span>
                /* Touch the underlying items */
<span class="nc" id="L535">                myLink.touchUnderlyingItems();</span>
            }
<span class="nc" id="L537">        }</span>
<span class="nc" id="L538">    }</span>

    @Override
    public void touchOnUpdate() {
        /* Loop through the list */
<span class="nc" id="L543">        final Iterator&lt;T&gt; myIterator = theLinkSet.iterator();</span>
<span class="nc bnc" id="L544" title="All 2 branches missed.">        while (myIterator.hasNext()) {</span>
<span class="nc" id="L545">            final T myLink = myIterator.next();</span>

            /* If the link is not deleted */
<span class="nc bnc" id="L548" title="All 2 branches missed.">            if (!myLink.isDeleted()) {</span>
                /* Touch the underlying items */
<span class="nc" id="L550">                myLink.touchOnUpdate();</span>
            }
<span class="nc" id="L552">        }</span>
<span class="nc" id="L553">    }</span>

    /**
     * Obtain an iterator through the list.
     * @return the iterator
     */
    public Iterator&lt;T&gt; iterator() {
<span class="nc" id="L560">        return theLinkSet.iterator();</span>
    }

    /**
     * Value List.
     */
    public static final class PrometheusInfoSetValueList
            implements MetisDataObjectFormat, MetisDataList&lt;Object&gt; {
        /**
         * The list.
         */
        private final List&lt;Object&gt; theList;

        /**
         * Constructor.
         */
<span class="nc" id="L576">        PrometheusInfoSetValueList() {</span>
<span class="nc" id="L577">            theList = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L578">        }</span>

        @Override
        public String toString() {
            /* Create the string builder */
<span class="nc" id="L583">            final StringBuilder myBuilder = new StringBuilder();</span>
<span class="nc" id="L584">            boolean isFirst = true;</span>

            /* Loop through the list */
<span class="nc" id="L587">            final Iterator&lt;?&gt; myIterator = iterator();</span>
<span class="nc bnc" id="L588" title="All 2 branches missed.">            while (myIterator.hasNext()) {</span>
<span class="nc" id="L589">                final Object myLink = myIterator.next();</span>

                /* If this is not the first item */
<span class="nc bnc" id="L592" title="All 2 branches missed.">                if (!isFirst) {</span>
                    /* add separator */
<span class="nc" id="L594">                    myBuilder.append(ITEM_SEP);</span>
                }

                /* Append the name */
<span class="nc" id="L598">                myBuilder.append(myLink.toString());</span>
<span class="nc" id="L599">                isFirst = false;</span>
<span class="nc" id="L600">            }</span>

            /* Return the list */
<span class="nc" id="L603">            return myBuilder.toString();</span>
        }

        @Override
        public String formatObject(final OceanusDataFormatter pFormatter) {
<span class="nc" id="L608">            return toString();</span>
        }

        @Override
        public List&lt;Object&gt; getUnderlyingList() {
<span class="nc" id="L613">            return theList;</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.14.202510111229</span></div></body></html>